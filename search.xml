<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>31关于毕设的一些思考</title>
    <url>/2020/03/02/31%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/</url>
    <content><![CDATA[<blockquote>
<p>摘要：随着毕业设计的深入，对项目也积累了一些认识，虽然在开发的路上还刚刚起步，但是这几天静下心来敲代码感觉还是爱上了这种产品在手中一步步成型的感觉。</p>
</blockquote>
<a id="more"></a>
<h4 id="做好自己的选择"><a href="#做好自己的选择" class="headerlink" title="做好自己的选择"></a>做好自己的选择</h4><p>程序世界里面可以选择的技术千千万万，每年的新技术也不停的出现，因此做技术注定是学习无止境的，提前选好自己的技术路线是一个首要性的问题，然后逐渐往深挖掘，往广拓展，这要比浅尝辄止重要得多。</p>
<h4 id="做项目应该求快还是应该求好"><a href="#做项目应该求快还是应该求好" class="headerlink" title="做项目应该求快还是应该求好"></a>做项目应该求快还是应该求好</h4><p>从某种目的出发，如果是老师或者课程要求的话，我认为应该注重功能，把更多的精力放到功能实现上去，如果时间富裕，可以充分向外拓展，使用更高级的技术，或者往深挖掘，探索更优的策略，优化项目。</p>
<p>如果是自己做项目，我觉得还是尽量打磨得更加精美比较好，让体验更加好一些，可以尝试研究一些技术之外的东西运用在项目里面，比如项目中如何贴近用户习惯，用户心理等等。</p>
<h4 id="规划自我发展路线"><a href="#规划自我发展路线" class="headerlink" title="规划自我发展路线"></a>规划自我发展路线</h4><p>及早去探索发现自己的发展路线，很多涉及到自身的发展问题不要抱着“水到渠成”，“车到山前必有路”这样的想法，时间越长，我越发现路是自己探索出来的，有时候也许发现是错的，但是总比停在原地要好，时常抬抬头看看前面的路可以更好的走好脚下的路。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>问题总结</category>
      </categories>
  </entry>
  <entry>
    <title>30使用haystack进行全文检索</title>
    <url>/2020/03/01/30%E4%BD%BF%E7%94%A8haystack%E8%BF%9B%E8%A1%8C%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/</url>
    <content><![CDATA[<blockquote>
<p>摘要：搜索功能升级，使用haystack进行全文搜索。</p>
</blockquote>
<a id="more"></a>
<h4 id="Haystack介绍以及安装"><a href="#Haystack介绍以及安装" class="headerlink" title="Haystack介绍以及安装"></a>Haystack介绍以及安装</h4><p>全文检索不同于特定字段的模糊查询，使用全文检索的效率更高，并且能够对于中文进行分词处理。</p>
<ul>
<li>haystack：全文检索的框架，支持whoosh、solr、Xapian、Elasticsearc四种全文检索引擎，<a href="http://haystacksearch.org/" target="_blank" rel="noopener">官方网站</a></li>
<li>whoosh：纯Python编写的全文搜索引擎，虽然性能比不上sphinx、xapian、Elasticsearc等，但是无二进制包，程序不会莫名其妙的崩溃，对于小型的站点，whoosh已经足够使用，<a href="https://whoosh.readthedocs.io/en/latest/" target="_blank" rel="noopener">whoosh文档</a></li>
<li>jieba：中文分词包，用于语句拆分。</li>
</ul>
<p>1）在虚拟环境中依次安装需要的包。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install django-haystack</span><br><span class="line">pip install whoosh</span><br><span class="line">pip install jieba</span><br></pre></td></tr></table></figure>
<p>2）修改项目settings.py文件，安装应用haystack。</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml">INSTALLED_APPS = (</span></span><br><span class="line"><span class="xml">    'haystack',</span></span><br><span class="line"><span class="xml">)</span></span><br></pre></td></tr></table></figure>
<p>3）在test6/settings.py文件中配置搜索引擎。</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml">...</span></span><br><span class="line"><span class="xml">HAYSTACK_CONNECTIONS = &#123;</span></span><br><span class="line"><span class="xml">    'default': &#123;</span></span><br><span class="line"><span class="xml">        #使用whoosh引擎</span></span><br><span class="line"><span class="xml">        'ENGINE': 'haystack.backends.whoosh_backend.WhooshEngine',</span></span><br><span class="line"><span class="xml">        #索引文件路径</span></span><br><span class="line"><span class="xml">        'PATH': os.path.join(BASE_DIR, 'whoosh_index'),</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">#当添加、修改、删除数据时，自动生成索引</span></span><br><span class="line"><span class="xml">HAYSTACK_SIGNAL_PROCESSOR = 'haystack.signals.RealtimeSignalProcessor'</span></span><br></pre></td></tr></table></figure>
<p>4）在项目urls.py中添加搜索的配置。</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml">path('search/', include('haystack.urls')),</span></span><br></pre></td></tr></table></figure>
<h4 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h4><p>1）在需要索引的应用目录下创建search_indexes.py文件，比如我要索引商品，就在goods目录下新建search_indexes.py文件，注意文件名很重要，不能修改。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> haystack <span class="keyword">import</span> indexes</span><br><span class="line"><span class="keyword">from</span> goods.models <span class="keyword">import</span> GoodsSKU</span><br><span class="line"><span class="comment">#指定对于某个类的某些数据建立索引</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsSKUIndex</span><span class="params">(indexes.SearchIndex, indexes.Indexable)</span>:</span></span><br><span class="line">    text = indexes.CharField(document=<span class="literal">True</span>, use_template=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_model</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> GoodsSKU</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">index_queryset</span><span class="params">(self, using=None)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.get_model().objects.all()</span><br></pre></td></tr></table></figure>
<p>2）在templates目录下创建”search/indexes/goods/“目录。</p>
<p><img src="/2020/03/01/30使用haystack进行全文检索/1.png" alt="image-20200301191212079"></p>
<p>3）在上面的目录中创建”goodssku_text.txt”文件。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 指定根据表中的哪些字段建立索引</span><br><span class="line">&#123;&#123; object.name &#125;&#125;			# 商品名称</span><br><span class="line">&#123;&#123; object.desc &#125;&#125;			# 商品简介</span><br><span class="line">&#123;&#123; object.goods.detail &#125;&#125;	# 商品详情</span><br></pre></td></tr></table></figure>
<p>4）找到虚拟环境下的haystack目录,我的项目环境是Anaconda创建的DjangoTest环境。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">D:\ProgramFiles\Anaconda\envs\DjangoTest\Lib\site-packages\haystack\backends</span><br></pre></td></tr></table></figure>
<p>5）在上面的目录中创建ChineseAnalyzer.py文件。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">from</span> whoosh.analysis <span class="keyword">import</span> Tokenizer, Token</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChineseTokenizer</span><span class="params">(Tokenizer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, value, positions=False, chars=False,keeporiginal=False,removestops=True,start_pos=<span class="number">0</span>, start_char=<span class="number">0</span>, mode=<span class="string">''</span>, **kwargs)</span>:</span></span><br><span class="line">        t=Token(positions,chars,removestops=removestops, mode=mode,**kwargs)</span><br><span class="line">        seglist = jieba.cut(value, cut_all=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> seglist:</span><br><span class="line">            t.original = t.text = w</span><br><span class="line">            t.boost = <span class="number">1.0</span></span><br><span class="line">            <span class="keyword">if</span> positions:</span><br><span class="line">                t.pos = start_pos + value.find(w)</span><br><span class="line">            <span class="keyword">if</span> chars:</span><br><span class="line">                t.startchar = start_char + value.find(w)</span><br><span class="line">                t.endchar = start_char + value.find(w) + len(w)</span><br><span class="line">             <span class="keyword">yield</span> t</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ChineseAnalyzer</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> ChineseTokenizer()</span><br></pre></td></tr></table></figure>
<p>6）复制whoosh_backend.py文件，改为如下名称：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">whoosh_cn_backend.py</span><br></pre></td></tr></table></figure>
<p>7）打开复制出来的新文件，引入中文分析类，内部采用jieba分词。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> .ChineseAnalyzer <span class="keyword">import</span> ChineseAnalyzer</span><br></pre></td></tr></table></figure>
<p>8）更改词语分析类。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">查找</span><br><span class="line">analyzer=StemmingAnalyzer()</span><br><span class="line">改为</span><br><span class="line">analyzer=ChineseAnalyzer()</span><br></pre></td></tr></table></figure>
<p>9）初始化索引数据。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python manage.py rebuild_index</span><br></pre></td></tr></table></figure>
<p>初始化之后项目目录中会自动生成whoosh_index目录，目录里是whoosh的索引结构.</p>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>按照配置，在admin管理中添加数据后，会自动为数据创建索引，可以直接进行搜索，可以先创建一些测试数据。</p>
<p>1）在goods/views.py中定义视图query。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render(request,<span class="string">'goods/query.html'</span>)</span><br></pre></td></tr></table></figure>
<p>2）在goods/urls.py中配置。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">path(&apos;query/&apos;, views.query),</span><br></pre></td></tr></table></figure>
<p>3）在templates/目录中创建模板query.html。</p>
<blockquote>
<p>参数q表示搜索内容，传递到模板中的数据为query。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>全文检索<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">'get'</span> <span class="attr">action</span>=<span class="string">"/search/"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"q"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"查询"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>4）自定义搜索结果模板：在templates/search/目录下创建search.html。</p>
<p>搜索结果进行分页，视图向模板中传递的上下文如下：</p>
<ul>
<li>query：搜索关键字</li>
<li>page：当前页的page对象</li>
<li>paginator：分页paginator对象</li>
</ul>
<p>视图接收的参数如下：</p>
<ul>
<li>参数q表示搜索内容，传递到模板中的数据为query</li>
<li>参数page表示当前页码</li>
</ul>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>全文检索--结果页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>搜索<span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span></span><span class="template-variable">&#123;&#123;query&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="symbol">&amp;nbsp;</span>结果如下：<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">for</span></span> item <span class="keyword">in</span> page%&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><span class="template-variable">&#123;&#123;item.object.id&#125;&#125;</span><span class="xml">--</span><span class="template-variable">&#123;&#123;item.object.gcontent|<span class="name">safe</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">empty</span></span>%&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>啥也没找到<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">endfor</span></span>%&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">for</span></span> pindex <span class="keyword">in</span> page.paginator.page_range%&#125;</span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;%<span class="name"><span class="name">if</span></span> pindex == page.number%&#125;</span></span><br><span class="line"><span class="xml">        </span><span class="template-variable">&#123;&#123;pindex&#125;&#125;</span><span class="xml"><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;%<span class="name"><span class="name">else</span></span>%&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"?q=</span></span></span><span class="template-variable">&#123;&#123;query&#125;&#125;</span><span class="xml"><span class="tag"><span class="string"><span class="symbol">&amp;amp;</span>page=</span></span></span><span class="template-variable">&#123;&#123;pindex&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span><span class="template-variable">&#123;&#123;pindex&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;%<span class="name"><span class="name">endif</span></span>%&#125;</span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">endfor</span></span>%&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>5）运行服务器，在浏览器中输入如下地址：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://127.0.0.1:8000/query/</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>毕业设计</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>Haystack</tag>
        <tag>Whoosh</tag>
      </tags>
  </entry>
  <entry>
    <title>29疑难问题记录</title>
    <url>/2020/02/29/29%E7%96%91%E9%9A%BE%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<blockquote>
<p>咦，明明在我电脑上就没问题……</p>
</blockquote>
<a id="more"></a>
<p>今天继续修改代码，写完代码之后启动项目发现了一个问题：</p>
<p>Reverse for ‘detail’ with arguments ‘(‘’,)’ not found. 1 pattern(s) tried: [‘…</p>
<p>总之就是url跳转时候正则匹配有问题，查了很长时间的百度，也尝试了很多种办法，但是都没有解决，url跳转感觉也没什么问题。</p>
<p>后来没办法只能创建了一个git分支，然后把主分支版本回退，回退到昨天的版本之后可以正常启动项目了，说明昨天的代码没有问题。</p>
<p>然后我又切到分支版本重新启动，这次没什么问题了，分支版本也能正常启动，就很奇怪，不知道到底是哪里不对，总感觉代码哪里有隐患。</p>
<p>记录一下，等哪天问题再出来了再来填坑。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>问题总结</category>
      </categories>
  </entry>
  <entry>
    <title>28页面静态化以及用户历史浏览记录的添加</title>
    <url>/2020/02/28/28%E9%A1%B5%E9%9D%A2%E9%9D%99%E6%80%81%E5%8C%96%E4%BB%A5%E5%8F%8A%E7%94%A8%E6%88%B7%E5%8E%86%E5%8F%B2%E6%B5%8F%E8%A7%88%E8%AE%B0%E5%BD%95%E7%9A%84%E6%B7%BB%E5%8A%A0/</url>
    <content><![CDATA[<blockquote>
<p>摘要：使用页面静态化防止高并发用户访问时频繁刷新页面导致服务器卡顿，使用redis存储用户浏览记录也是同样的道理，防止用户频繁的数据库写入。</p>
</blockquote>
<a id="more"></a>
<h4 id="页面静态化"><a href="#页面静态化" class="headerlink" title="页面静态化"></a>页面静态化</h4><p>什么时候首页的静态页面需要重新生成？</p>
<p>当管理员后台修改首页信息对应的表格中的数据的时候，需要重新生成首页静态页面。</p>
<h4 id="页面数据的缓存"><a href="#页面数据的缓存" class="headerlink" title="页面数据的缓存:"></a>页面数据的缓存:</h4><p>把页面使用的数据放在缓存中，当再次使用这些数据的时候，先从缓存中读取，如果获取不到，再去查询数据库，减少数据库查询的次数。</p>
<h4 id="历史浏览记录的添加"><a href="#历史浏览记录的添加" class="headerlink" title="历史浏览记录的添加"></a>历史浏览记录的添加</h4><ul>
<li><p>什么时候需要添加历史浏览记录？</p>
<ul>
<li>访问商品的详情页面的时候（在商品详情对应的视图中），需要添加历史浏览记录。</li>
</ul>
</li>
<li><p>什么时候需要获取历史浏览记录？</p>
<ul>
<li>访问用户个人信息页面的时候获取用户历史浏览记录。</li>
</ul>
</li>
<li><p>历史浏览记录需要存储在哪里？</p>
<ul>
<li><p>redis数据库 -&gt; 内存型数据库</p>
<p>使用redis数据库存储历史浏览记录。</p>
</li>
</ul>
</li>
<li><p>redis中存储历史浏览记录的格式？</p>
<ul>
<li><p>string</p>
</li>
<li><p>hash</p>
</li>
<li><p>list</p>
</li>
<li><p>set</p>
</li>
<li><p>zset</p>
<p>存储用户的历史浏览记录时，所有用户的历史浏览记录用同一条数据保存</p>
<p>hash：</p>
<p>​        history：user_用户id: ‘1, 2, 3’</p>
<p>每个用户的历史浏览记录用一条数据结构保存：</p>
<p>list:</p>
<p>​    history_用户id：[3, 2, 1]</p>
<p>添加历史浏览记录时，用户最新的浏览的商品id从列表的左侧插入。</p>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>问题总结</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>27Linux上安装Anaconda3以及环境迁移</title>
    <url>/2020/02/27/27Linux%E4%B8%8A%E5%AE%89%E8%A3%85Anaconda3%E4%BB%A5%E5%8F%8A%E7%8E%AF%E5%A2%83%E8%BF%81%E7%A7%BB/</url>
    <content><![CDATA[<blockquote>
<p>摘要：安装过程很简单，但是环境迁移很烦，尝试了很多次才成功，记录一下闭坑过程。</p>
</blockquote>
<a id="more"></a>
<h3 id="Anaconda3的安装"><a href="#Anaconda3的安装" class="headerlink" title="Anaconda3的安装"></a>Anaconda3的安装</h3><h4 id="安装包下载"><a href="#安装包下载" class="headerlink" title="安装包下载"></a>安装包下载</h4><ol>
<li>历史版本：<a href="https://repo.continuum.io/archive/" target="_blank" rel="noopener">https://repo.continuum.io/archive/</a></li>
<li>清华镜像源：<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a></li>
</ol>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bash Anaconda3-5.0.0-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>
<p>之后提示接下来是许可协议，按Enter继续</p>
<p>许可协议有很多页，按Q跳到最后，输入yes接受协议</p>
<p>Anaconda默认按照位置是用户的home目录下的anaconda目录，修改为/usr/local目录下(我习惯把安装的软件都放到/usr/local/下面)，Enter开始进行安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[/root/anaconda3] &gt;&gt;&gt; /usr/<span class="built_in">local</span>/anaconda3</span><br></pre></td></tr></table></figure>
<p>等待安装几分钟后，会询问是否将Anaconda目录添加到.bashrc文件的PATH中，输入yes，安装完成后刷新.bashrc文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">source</span> /root/.bashrc</span><br></pre></td></tr></table></figure>
<h3 id="环境迁移"><a href="#环境迁移" class="headerlink" title="环境迁移"></a>环境迁移</h3><h4 id="Windows导出环境"><a href="#Windows导出环境" class="headerlink" title="Windows导出环境"></a>Windows导出环境</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda env <span class="built_in">export</span> &gt; environment.yaml</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">conda list -e &gt; requirments.txt</span><br></pre></td></tr></table></figure>
<p>环境会被保存在environment.yaml文件中，我们把文件上传到Linux服务器上面，通过以下命令进行环境复现</p>
<h4 id="Linux环境复现"><a href="#Linux环境复现" class="headerlink" title="Linux环境复现"></a>Linux环境复现</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda env create -f environment.yaml</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">conda install --yes --file requirements.txt</span><br></pre></td></tr></table></figure>
<p>因为是通过conda命令来创建虚拟环境，所以环境中使用到的库也是通过conda命令来安装，但是conda库没有我们需要的库的时候，我们会从pip库里面安装，这就导致conda命令无法安装pip的库，环境迁移不成功，所以我们在进行环境迁移的时候可以直接使用pip导出库，在Linux上进行install。</p>
<h4 id="一种实际上更好用的方法"><a href="#一种实际上更好用的方法" class="headerlink" title="一种实际上更好用的方法"></a>一种实际上更好用的方法</h4><p>pip导出库到requirements.txt</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>
<p>Linux上创建虚拟环境</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda create -n envname python=3.6</span><br></pre></td></tr></table></figure>
<p>进入虚拟环境</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> activate envname</span><br></pre></td></tr></table></figure>
<p>使用pip安装需要的包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
<p>这样就会顺利很多。</p>
<p><strong>Linux上Anaconda进出环境命令比Windows多了一个source</strong></p>
<p>进入环境：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> activate env_name</span><br></pre></td></tr></table></figure>
<p>退出环境：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> deactivate</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Anaconda3</tag>
      </tags>
  </entry>
  <entry>
    <title>26CentOS7上安装MySQL</title>
    <url>/2020/02/26/26CentOS7%E4%B8%8A%E5%AE%89%E8%A3%85MySQL/</url>
    <content><![CDATA[<blockquote>
<p>摘要：安装了一遍居然出错了，只能卸载再安一遍记录一下。</p>
<p>最近发现做东西总要出错，明明很简单的配置过程总要出点问题，偶尔顺利一次都要怀疑到底对不对。</p>
</blockquote>
<a id="more"></a>
<h4 id="为防止安装失败，先说卸载"><a href="#为防止安装失败，先说卸载" class="headerlink" title="为防止安装失败，先说卸载"></a>为防止安装失败，先说卸载</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看yum是否安装过mysql</span></span><br><span class="line">$ yum list installed mysql*</span><br></pre></td></tr></table></figure>
<p>如果显示了列表，说明系统中有MySQL。</p>
<p>根据列表上的名字进行yum卸载</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yum remove mysql-community-client mysql-community-common mysql-community-libs mysql-community-libs-compat mysql-community-server mysql57-community-release</span><br><span class="line"></span><br><span class="line">$ rm -rf /var/lib/mysql  </span><br><span class="line">$ rm /etc/my.cnf</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>rpm查看安装</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ rpm -qa | grep -i mysql</span><br></pre></td></tr></table></figure>
<p>根据列表上的名字进行rpm卸载</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ rpm -ev mysql57-community-release-el7-9.noarch</span><br><span class="line">$ rpm -ev mysql-community-server-5.7.17-1.el7.x86_64</span><br><span class="line">$ rpm -ev mysql-community-libs-5.7.17-1.el7.x86_64</span><br><span class="line">$ rpm -ev mysql-community-libs-compat-5.7.17-1.el7.x86_64</span><br><span class="line">$ rpm -ev mysql-community-common-5.7.17-1.el7.x86_64</span><br><span class="line">$ rpm -ev mysql-community-client-5.7.17-1.el7.x86_64</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> /var/lib/  </span><br><span class="line">$ rm -rf mysql/</span><br></pre></td></tr></table></figure>
<p>注意：这里有可能会抛依赖错误 error:Failed dependencies:，则加上 –nodeps不检查依赖关系删除，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ rpm -e --nodeps mysql-community-server-5.7.17-1.el7.x86_64</span><br></pre></td></tr></table></figure>
<p>清除余项</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ whereis mysql</span><br><span class="line">mysql: /usr/bin/mysql /usr/lib64/mysql /usr/<span class="built_in">local</span>/mysql /usr/share/mysql /usr/share/man/man1/mysql.1.gz</span><br><span class="line"><span class="comment"># 删除上面的文件夹</span></span><br><span class="line">$ rm -rf /usr/bin/mysql</span><br><span class="line">…</span><br><span class="line">…</span><br></pre></td></tr></table></figure>
<p>删除配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ rm –rf /usr/my.cnf</span><br><span class="line">$ rm -rf /root/.mysql_sercret</span><br></pre></td></tr></table></figure>
<p>剩余配置检查</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ chkconfig --list | grep -i mysql</span><br><span class="line">$ chkconfig --del mysqld</span><br></pre></td></tr></table></figure>
<p>根据上面的列表，删除 , 如：mysqld</p>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><ol>
<li>安装软件源</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ wget http://repo.mysql.com/mysql57-community-release-el7-9.noarch.rpm</span><br><span class="line">$ rpm -ivh mysql57-community-release-el7-9.noarch.rpm</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>接下来使用yum安装</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 更新yum软件包</span></span><br><span class="line">$ yum check-update  </span><br><span class="line"><span class="comment"># 更新系统 </span></span><br><span class="line">$ yum update</span><br><span class="line"> <span class="comment">#安装mysql</span></span><br><span class="line">$ yum install mysql mysql-server</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>安装完成后启动服务</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ service start mysqld</span><br><span class="line">$ systemctl start mysqld.service</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>查看MySQL的运行状态</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ service mysqld status</span><br><span class="line">$ systemctl status mysqld.service</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>获取MySQL的默认密码</li>
</ol>
<p>MySQL5.7安装完成后为root用户随机生成了一个密码，在error log中，关于error log的位置，如果安装的是RPM包，则默认是/var/log/mysqld.log。<br>只有启动过一次mysql才可以查看临时密码。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ grep <span class="string">'temporary password'</span> /var/<span class="built_in">log</span>/mysqld.log</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/26/26CentOS7上安装MySQL/1.png" alt="image-20200226214404829"></p>
<p>我这里的密码是rMThio2k&gt;aWp</p>
<ol start="6">
<li>使用默认密码登录并修改密码</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mysql -u root -p</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;root&apos;;</span><br></pre></td></tr></table></figure>
<p>如果密码太简单，会出现一个错误<code>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</code>,对于这个错误，可以修改两个参数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global validate_password_policy=0; </span><br><span class="line">mysql&gt; set global validate_password_length=1;</span><br></pre></td></tr></table></figure>
<p>再次执行修改密码就可以了</p>
<ol start="7">
<li>授权可以外网访问MySQL</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;mypassword&apos; WITH GRANT OPTION;</span><br><span class="line">mysql&gt; FLUSH  PRIVILEGES;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>兼职酱前端设计图</title>
    <url>/2020/02/26/%E5%85%BC%E8%81%8C%E9%85%B1%E5%89%8D%E7%AB%AF%E8%AE%BE%E8%AE%A1%E5%9B%BE/</url>
    <content><![CDATA[<blockquote>
<p>摘要：以前做的一个项目的前端设计图，图中APP界面均为实际效果图。</p>
</blockquote>
<a id="more"></a>
<p><img src="/2020/02/26/兼职酱前端设计图/1.jpg" alt></p>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>前端设计</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis随笔</title>
    <url>/2020/02/25/Redis%E9%9A%8F%E7%AC%94/</url>
    <content><![CDATA[<blockquote>
<p>摘要：把Redis移到服务器端进行配置实现购物车功能。</p>
</blockquote>
<a id="more"></a>
<h4 id="使用外网访问Linux上的Redis"><a href="#使用外网访问Linux上的Redis" class="headerlink" title="使用外网访问Linux上的Redis"></a>使用外网访问Linux上的Redis</h4><p>只需修改/etc/redis.conf文件。将bind注释掉即可。</p>
<p>linux上操作redis相关命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># service命令启动reids脚本</span></span><br><span class="line">service redis start</span><br><span class="line"><span class="comment"># service命令停止redis脚本</span></span><br><span class="line">service redis stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># systemctl命令兼容了service</span></span><br><span class="line">systemctl redis start</span><br><span class="line">systemctl redis stop</span><br><span class="line">systemctl redis restart</span><br></pre></td></tr></table></figure>
<h4 id="使用Redis实现购物车功能"><a href="#使用Redis实现购物车功能" class="headerlink" title="使用Redis实现购物车功能"></a>使用Redis实现购物车功能</h4><ol>
<li><p>什么时候添加购物车记录？</p>
<p>当用户点击加入购物车时需要添加购物车记录</p>
</li>
<li><p>什么时候需要获取购物车记录？</p>
<p>使用到购物车中数据和访问购物车页面的时候需要获取购物车记录</p>
</li>
<li><p>使用什么存储购物车记录?</p>
<p>Redis存储购物车记录</p>
</li>
<li><p>分析存储购物车记录的格式？</p>
<p>一个用户的购物车记录用户一条数据保存</p>
<p>hash:</p>
<p>‘cart_用户id’：[‘sku_id’：商品数目，’sku_id’：商品数目]</p>
<p>例子:</p>
<p>‘cart_1’：[‘1’：3，’2’：5]</p>
</li>
</ol>
<ol start="5">
<li><p>获取用户购物车中商品总数目：</p>
<p>使用hlen</p>
</li>
</ol>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>25FastDFS+Nginx学习记录</title>
    <url>/2020/02/25/25FastDFS+Nginx%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<blockquote>
<p>摘要：简单介绍一下FastDFS和Nginx。</p>
</blockquote>
<a id="more"></a>
<h3 id="FastDFS"><a href="#FastDFS" class="headerlink" title="FastDFS"></a>FastDFS</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>FastDFS 是一个开源的高性能分布式文件系统（DFS）。 它的主要功能包括：文件存储，文件同步和文件访问，以及高容量和负载平衡。主要解决了海量数据存储问题，特别适合以中小文件（建议范围：4KB &lt; file_size &lt;500MB）为载体的在线服务。</p>
<p>FastDFS 系统有三个角色：跟踪服务器(Tracker Server)、存储服务器(Storage Server)和客户端(Client)。</p>
<p>　　<strong>Tracker Server</strong>：跟踪服务器，主要做调度工作，起到均衡的作用；负责管理所有的 storage server和 group，每个 storage 在启动后会连接 Tracker，告知自己所属 group 等信息，并保持周期性心跳。</p>
<p>　　<strong>Storage Server</strong>：存储服务器，主要提供容量和备份服务；以 group 为单位，每个 group 内可以有多台 storage server，数据互为备份。</p>
<p>　　<strong>Client</strong>：客户端，上传下载数据的服务器，也就是我们自己的项目所部署在的服务器。</p>
<p><img src="/2020/02/25/25FastDFS+Nginx学习记录/1.png" alt="img"></p>
<h4 id="FastDFS的存储策略"><a href="#FastDFS的存储策略" class="headerlink" title="FastDFS的存储策略"></a>FastDFS的存储策略</h4><p>为了支持大容量，存储节点（服务器）采用了分卷（或分组）的组织方式。存储系统由一个或多个卷组成，卷与卷之间的文件是相互独立的，所有卷的文件容量累加就是整个存储系统中的文件容量。一个卷可以由一台或多台存储服务器组成，一个卷下的存储服务器中的文件都是相同的，卷中的多台存储服务器起到了冗余备份和负载均衡的作用。</p>
<p>在卷中增加服务器时，同步已有的文件由系统自动完成，同步完成后，系统自动将新增服务器切换到线上提供服务。当存储空间不足或即将耗尽时，可以动态添加卷。只需要增加一台或多台服务器，并将它们配置为一个新的卷，这样就扩大了存储系统的容量。</p>
<h4 id="FastDFS的上传过程"><a href="#FastDFS的上传过程" class="headerlink" title="FastDFS的上传过程"></a>FastDFS的上传过程</h4><p>FastDFS向使用者提供基本文件访问接口，比如upload、download、append、delete等，以客户端库的方式提供给用户使用。</p>
<p>Storage Server会定期的向Tracker Server发送自己的存储信息。当Tracker Server Cluster中的Tracker Server不止一个时，各个Tracker之间的关系是对等的，所以客户端上传时可以选择任意一个Tracker。</p>
<p>当Tracker收到客户端上传文件的请求时，会为该文件分配一个可以存储文件的group，当选定了group后就要决定给客户端分配group中的哪一个storage server。当分配好storage server后，客户端向storage发送写文件请求，storage将会为文件分配一个数据存储目录。然后为文件分配一个fileid，最后根据以上的信息生成文件名存储文件。</p>
<p><img src="/2020/02/25/25FastDFS+Nginx学习记录/2.png" alt></p>
<h4 id="FastDFS的文件同步"><a href="#FastDFS的文件同步" class="headerlink" title="FastDFS的文件同步"></a>FastDFS的文件同步</h4><p>写文件时，客户端将文件写至group内一个storage server即认为写文件成功，storage server写完文件后，会由后台线程将文件同步至同group内其他的storage server。</p>
<p>每个storage写文件后，同时会写一份binlog，binlog里不包含文件数据，只包含文件名等元信息，这份binlog用于后台同步，storage会记录向group内其他storage同步的进度，以便重启后能接上次的进度继续同步；进度以时间戳的方式进行记录，所以最好能保证集群内所有server的时钟保持同步。</p>
<p>storage的同步进度会作为元数据的一部分汇报到tracker上，tracke在选择读storage的时候会以同步进度作为参考。</p>
<h4 id="FastDFS的文件下载"><a href="#FastDFS的文件下载" class="headerlink" title="FastDFS的文件下载"></a>FastDFS的文件下载</h4><p>客户端uploadfile成功后，会拿到一个storage生成的文件名，接下来客户端根据这个文件名即可访问到该文件。</p>
<p><img src="/2020/02/25/25FastDFS+Nginx学习记录/3.png" alt></p>
<p>跟upload file一样，在downloadfile时客户端可以选择任意tracker server。tracker发送download请求给某个tracker，必须带上文件名信息，tracke从文件名中解析出文件的group、大小、创建时间等信息，然后为该请求选择一个storage用来服务读请求。</p>
<h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><p><strong>Nginx：</strong>Nginx（“engine x”），Nginx是俄罗斯人Igor Sysoev编写的一款高性能的 HTTP 和反向代理服务器。也是一个IMAP/POP3/SMTP代理服务器，也就是说，Nginx本身就可以托管网站，进行HTTP服务处理，也可以作为反向代理服务器使用。</p>
<p>Nginx就是反向代理服务器。</p>
<p>代理服务器是介于客户端和Web服务器之间的另一台服务器，有了它之后，浏览器不是直接到Web服务器去取回网页，而是通过向代理服务器发送请求，信号会先送到代理服务器，由代理服务器来取回浏览器所需要的信息并传送给你的浏览器。</p>
<p><img src="/2020/02/25/25FastDFS+Nginx学习记录/4.png" alt></p>
<p>一个完整的代理请求过程为：客户端首先与代理服务器创建连接，然后根据代理服务器所使用的代理协议，请求对目标服务器创建连接、或则获得目标服务器的指定资源。</p>
<p>正向代理是一个位于客户端和原始服务器之间的服务器，为了从原始服务器取的内容，客户端向代理发送一个请求并指定目标（原始服务器），然后代理向原始服务器转交请求并将获得的内容返回给客户端，客户端必须要进行一些特别的设置才能使用正向代理。</p>
<p>反向代理服务器：在服务器端接收客户端的请求，然后把请求分发给具体的服务器进行处理，然后再将服务器的响应结果反馈给客户端。Nginx就是其中的一种反向代理服务器软件。</p>
<p><strong>简单的说：</strong></p>
<p>正向代理：客户端知道服务器端，通过代理端连接服务器端。代理端代理的是服务器端。<br>反向代理：所谓反向，是对正向而言的。服务器端知道客户端，客户端不知道服务器端，通过代理端连接服务器端。代理端代理的是客户端。代理对象刚好相反，所以叫反向代理。</p>
<h4 id="Nginx的特点"><a href="#Nginx的特点" class="headerlink" title="Nginx的特点"></a>Nginx的特点</h4><p>（1）跨平台：Nginx 可以在大多数 Unix like OS编译运行，而且也有Windows的移植版本。<br>（2）配置异常简单，非常容易上手。配置风格跟程序开发一样，神一般的配置<br>（3）非阻塞、高并发连接：数据复制时，磁盘I/O的第一阶段是非阻塞的。官方测试能够支撑5万并发连接，在实际生产环境中跑到2～3万并发连接数.(这得益于Nginx使用了最新的epoll模型)<br>（4）事件驱动：通信机制采用epoll模型，支持更大的并发连接。<br>（5）master/worker结构：一个master进程，生成一个或多个worker进程<br>（6）内存消耗小：处理大并发的请求内存消耗非常小。在3万并发连接下，开启的10个Nginx 进程才消耗150M内存（15M*10=150M）<br>（7）成本低廉：Nginx为开源软件，可以免费使用。而购买F5 BIG-IP、NetScaler等硬件负载均衡交换机则需要十多万至几十万人民币<br>（8）内置的健康检查功能：如果 Nginx Proxy 后端的某台 Web 服务器宕机了，不会影响前端访问。<br>（9）节省带宽：支持 GZIP 压缩，可以添加浏览器本地缓存的 Header 头。<br>（10）稳定性高：用于反向代理，宕机的概率微乎其微</p>
<h4 id="使用FastDFS-Nginx搭建文件分布系统"><a href="#使用FastDFS-Nginx搭建文件分布系统" class="headerlink" title="使用FastDFS + Nginx搭建文件分布系统"></a>使用FastDFS + Nginx搭建文件分布系统</h4><p>海量存储，存储容量扩展方便。</p>
<p>文件内容重复。</p>
<p>结合nginx提高网站提供图片的效率。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>FastDFS</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>24Python与FDFS交互时遇到的问题</title>
    <url>/2020/02/24/24Python%E4%B8%8EFDFS%E4%BA%A4%E4%BA%92%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<blockquote>
<p>今天使用python在本地和服务器的FastDFS进行交互，遇到了几个问题，记录一下。</p>
</blockquote>
<a id="more"></a>
<h4 id="python与FDFS交互时报错"><a href="#python与FDFS交互时报错" class="headerlink" title="python与FDFS交互时报错"></a>python与FDFS交互时报错</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> fdfs_client.client <span class="keyword">import</span> Fdfs_client</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>client = Fdfs_client(<span class="string">'/etc/fdfs/client.conf'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret = client.upload_by_filename(<span class="string">'test'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret</span><br><span class="line">&#123;<span class="string">'Group name'</span>:<span class="string">'group1'</span>,<span class="string">'Status'</span>:<span class="string">'Upload successed.'</span>, <span class="string">'Remote file_id'</span>:<span class="string">'group1/M00/00/00/</span></span><br><span class="line"><span class="string">	wKjzh0_xaR63RExnAAAaDqbNk5E1398.py'</span>,<span class="string">'Uploaded size'</span>:<span class="string">'6.0KB'</span>,<span class="string">'Local file name'</span>:<span class="string">'test'</span></span><br><span class="line">	, <span class="string">'Storage IP'</span>:<span class="string">'192.168.243.133'</span>&#125;</span><br></pre></td></tr></table></figure>
<p>在测试FDFS与python交互时，输入以上代码，这是官方文档的代码，当我输入<br>ret = client.upload_by_filename(‘test’)后，就报错了。</p>
<p>错误如下：<br>Traceback (most recent call last):<br>File “”, line 1, in<br>File “/root/.virtualenvs/Cole_py3/lib/python3.6/site-packages/fdfs_client/client.py”, line 88, in upload_by_filename<br>raise DataError(errmsg + ‘(uploading)’)<br>fdfs_client.exceptions.DataError: [-] Error: test1 is not a file.(uploading)</p>
<p>主要还是太天真了，以为按照官方测试代码输入就没错，后来查看了client.py的代码，才发现，ret = client.upload_by_filename(’ ‘) 括号里面填写的是要在你本机存在的文件名或者文件路径<br>ret = client.upload_by_filename(’ /home/cole/python/test/test1.py ‘)<br>ret = client.upload_by_filename(’ test1.py ‘)<br>这两种写法都可以，前提是test1.py是要存在你本机</p>
<h4 id="type-object-argument-after-must-be-a-mapping-not-str"><a href="#type-object-argument-after-must-be-a-mapping-not-str" class="headerlink" title="type object argument after ** must be a mapping, not str"></a>type object argument after ** must be a mapping, not str</h4><p>django自定义fdfs文件存储时报了这个错误。</p>
<p>创建client实例对象的时候不能直接传入配置文件的地址字符串,否则报错.<br>错误代码:TypeError: type object argument after ** must be a mapping, not str</p>
<p>解决办法：通过模块内<strong>get_tracker_conf</strong>函数, 获取配置文件后传入。</p>
<p>原代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fdfs_client.client <span class="keyword">import</span> Fdfs_client</span><br><span class="line">	client = （./utils/fdfs/client.con<span class="string">f')</span></span><br><span class="line"><span class="string">	ret = client.upload_by_buffer(content.read())</span></span><br></pre></td></tr></table></figure>
<p>修改后代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fdfs_client.client <span class="keyword">import</span> Fdfs_client, get_tracker_conf</span><br><span class="line">　　tracker_path = get_tracker_conf(<span class="string">'./utils/fdfs/client.conf'</span>)</span><br><span class="line">　　client = Fdfs_client(tracker_path)</span><br><span class="line">　　ret = client.upload_by_buffer(content.read())</span><br></pre></td></tr></table></figure>
<h4 id="python3使用fdfs上传文件时报str-returned-non-string-type-bytes-错误"><a href="#python3使用fdfs上传文件时报str-returned-non-string-type-bytes-错误" class="headerlink" title="python3使用fdfs上传文件时报str returned non-string (type bytes)错误"></a>python3使用fdfs上传文件时报<strong>str</strong> returned non-string (type bytes)错误</h4><p>上传成功后返回一个字典, 其中’Remote file_id’键对应的值由旧版模块string类型更改为byte类型。所以, 返回的文件id是byte类型，</p>
<p>原代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">filename = result.get(<span class="string">'Remote file_id'</span>)</span><br><span class="line"><span class="keyword">return</span> filename</span><br></pre></td></tr></table></figure>
<p>修改后代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">filename = result.get(<span class="string">'Remote file_id'</span>)</span><br><span class="line"><span class="keyword">return</span> filename.decode()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>问题总结</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>FastDFS</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建FastDFS及Nginx过程中遇到的问题</title>
    <url>/2020/02/23/%E6%90%AD%E5%BB%BAFastDFS%E5%8F%8ANginx%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<blockquote>
<p>摘要：安装个Nginx，配置文件那里整整用了一天时间，还是无法映射到8888端口，只能使用80端口实现了，无奈。</p>
</blockquote>
<a id="more"></a>
<h4 id="本地上传文件到FastDFS命令上传报错：ERROR-file-connection-pool-c-line-130-connect-to-x-x-x-x-22122-fail"><a href="#本地上传文件到FastDFS命令上传报错：ERROR-file-connection-pool-c-line-130-connect-to-x-x-x-x-22122-fail" class="headerlink" title="本地上传文件到FastDFS命令上传报错：ERROR - file: connection_pool.c, line: 130, connect to x.x.x.x:22122 fail"></a>本地上传文件到FastDFS命令上传报错：ERROR - file: connection_pool.c, line: 130, connect to x.x.x.x:22122 fail</h4><p><strong>问题分析</strong>：错误信息提示错误的原因为连接超时，连接超时有两种可能的原因，一种是云服务器拒绝我们的访问，另一种是我们服务器电脑开启了开机启动防火墙。<br><strong>注：不管你进行什么操作，只要是报了类似连接失败错误代号，大部分都是由于两种原因造成</strong></p>
<p><strong>解决方法一</strong>：<br>故先检查云服务是否对我们的22122端口（FastDFS的默认端口）进行了拦截，有的话创建安全组对该端口进行放行应用到实例上再次上传就能解决上传成功(这里我设置为所有端口都开放)。</p>
<p><img src="/2020/02/23/搭建FastDFS及Nginx过程中遇到的问题/1.png" alt="image-20200223114229884"></p>
<p><strong>解决方法二：</strong><br>由于出现该问题的原因是因为自己的防火墙没有开启，故开启防火墙即可解决问题，Linux上的指令如下：<br>1、关闭防火墙：</p>
<p><code>sudo systemctl stop firewalld.service</code><br>2、关闭开机启动：</p>
<p><code>sudo systemctl disable firewalld.service</code></p>
<p>再次上传：</p>
<p><img src="/2020/02/23/搭建FastDFS及Nginx过程中遇到的问题/2.png" alt="image-20200223114409066"></p>
<p>成功</p>
<h4 id="nginx-conf的配置"><a href="#nginx-conf的配置" class="headerlink" title="nginx.conf的配置"></a>nginx.conf的配置</h4><p>按照文档进行配置，但是无论如何都打不开8888的端口，只能改到默认的80端口，具体配置如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  x.x.x.x;</span><br><span class="line"></span><br><span class="line">        location ~/group[0-9]/ &#123;</span><br><span class="line">            ngx_fastdfs_module;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>问题总结</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>Linux</tag>
        <tag>FastDFS</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>23搭建FastDFS+Nginx分布式文件系统</title>
    <url>/2020/02/23/23%E6%90%AD%E5%BB%BAFastDFS-Nginx%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<blockquote>
<p>摘要：安装一个分布式文件系统花了一天时间，不过总算是搞出来了。</p>
</blockquote>
<a id="more"></a>
<h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p>我用的是Linux版本是centos7<br>准备搭建所需要的gz包：<br>    nginx-1.8.1.tar.gz<br>    fastdfs-master.zip<br>    fastdfs-nginx-module-master.zip<br>    libfastcommon-master.zip</p>
<h3 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install -y lrzsz</span><br></pre></td></tr></table></figure>
<p>安装完成之后可以使用<code>rz</code>命令从本地向云服务器上传文件</p>
<h3 id="安装FastDFS"><a href="#安装FastDFS" class="headerlink" title="安装FastDFS"></a>安装FastDFS</h3><h4 id="安装fastdfs依赖包"><a href="#安装fastdfs依赖包" class="headerlink" title="安装fastdfs依赖包"></a>安装fastdfs依赖包</h4><ol>
<li><p>将libfastcommon解压到/usr/local/文件夹下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ unzip libfastcommon-master.zip -d /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进入到libfastcommon-master目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/libfastcommon-master</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行./make.sh</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./make.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行./make.sh install</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./make.sh install</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="安装fastdfs"><a href="#安装fastdfs" class="headerlink" title="安装fastdfs"></a>安装fastdfs</h4><ol>
<li><p>解压缩fastdfs-master.zip</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ unzip fastdfs-master.zip -d /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进入到fastdfs-master目录中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fasdfs-master</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行./make.sh</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./make.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行./make.sh install</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./make.sh install</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="配置跟中服务器tracker"><a href="#配置跟中服务器tracker" class="headerlink" title="配置跟中服务器tracker"></a>配置跟中服务器tracker</h4><ol>
<li><p>将tracker.conf文件移动到/etc/fdfs/中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cp /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>在/usr/local/python3/目录中创建目录/fastdfs/tracker</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir -p /usr/<span class="built_in">local</span>/python3/fastdfs/tracker</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑/etc/fdfs/tracker.conf配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/fdfs/tracker.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">base_path=/usr/<span class="built_in">local</span>/python3/fastdfs/tracker</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="配置储存服务器storage"><a href="#配置储存服务器storage" class="headerlink" title="配置储存服务器storage"></a>配置储存服务器storage</h4><ol>
<li><p>将storage.conf文件移动到/etc/fdfs/中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cp /etc/fdfs/storage.conf.sample /etc/fdfs/storage.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>在/usr/local/python3/fastdfs/目录中创建目录storage</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir -p /usr/<span class="built_in">local</span>/python3/fastdfs/storage</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑/etc/fdfs/storage.conf配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/fdfs/storage.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">base_path=/usr/<span class="built_in">local</span>/python3/fastdfs/storage</span><br><span class="line">store_path0=/usr/<span class="built_in">local</span>/python3/fastdfs/storage</span><br><span class="line"><span class="comment"># 此处x.x.x.x为自己的云服务器的ip地址</span></span><br><span class="line">tracker_server=x.x.x.x:22122</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动tracker和storage</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ service fdfs_trackerd start</span><br><span class="line">$ service fdfs_storaged start</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="测试是否安装成功"><a href="#测试是否安装成功" class="headerlink" title="测试是否安装成功"></a>测试是否安装成功</h4><ol>
<li><p>将client.conf文件移动到/etc/fdfs/文件夹下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cp /etc/fdfs/client.conf.sample /etc/fdfs/client.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑/etc/fdfs/client.conf配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/fdfs/client.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">base_path=/usr/<span class="built_in">local</span>/python3/fastdfs/tracker</span><br><span class="line"><span class="comment"># 此处x.x.x.x为自己的云服务器的ip地址</span></span><br><span class="line">tracker_server=x.x.x.x:22122</span><br></pre></td></tr></table></figure>
</li>
<li><p>上传文件到/usr/local/文件夹下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span></span><br><span class="line">$ rz</span><br></pre></td></tr></table></figure>
</li>
<li><p>上传文件测试</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ fdfs_upload_file /etc/fdfs/client.conf /usr/<span class="built_in">local</span>/1.jpg</span><br></pre></td></tr></table></figure>
</li>
<li><p>正确返回内容</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">group1/M00/00/00/rBBVCV5SUomAZGXzAAJsTkkrCMI580.jpg</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="安装nginx及fastdfs-nginx-module"><a href="#安装nginx及fastdfs-nginx-module" class="headerlink" title="安装nginx及fastdfs-nginx-module"></a>安装nginx及fastdfs-nginx-module</h3><h4 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h4><ol>
<li><p>将nginx-1.8.1.tar.gz解压至/usr/local</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tar -zxvf nginx-1.8.1.tar.gz -C /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进入nginx-1.8.1目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx-1.8.1</span><br></pre></td></tr></table></figure>
</li>
<li><p>参数配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./configure --prefix=/usr/<span class="built_in">local</span>/nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动nginx</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/sbin</span><br><span class="line">$ nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果启动成功可以在浏览器访问自己的服务器</p>
<p><img src="/2020/02/23/23搭建FastDFS-Nginx分布式文件系统/1.png" alt="image-20200223180515518"></p>
</li>
</ol>
<h4 id="添加fastdfs-nginx-module"><a href="#添加fastdfs-nginx-module" class="headerlink" title="添加fastdfs-nginx-module"></a>添加fastdfs-nginx-module</h4><ol>
<li><p>将fastdfs-nginx-module-master.zip解压到/usr/local/文件夹下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ unzip fastdfs-nginx-module-master.zip -d /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在nginx中添加该模块 </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx-1.8.1</span><br><span class="line">$ ./configure --add-module=/usr/<span class="built_in">local</span>/fastdfs-nginx-module/src</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改fastdfs-nginx-module配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fastdfs-nginx-module/src</span><br><span class="line">$ vim config</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CORE_INCS=<span class="string">"<span class="variable">$CORE_INCS</span> /usr/include/fastdfs /usr/include/fastcommon"</span></span><br><span class="line">CORE_LIBS=<span class="string">"<span class="variable">$CORE_LIBS</span> -L/usr/lib -lfastcommon -lfdfsclient"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将src目录下的mod_fastdfs.conf文件复制到/etc/fdfs/目录下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cp /usr/<span class="built_in">local</span>/fastdfs-nginx-module-master/src/mod_fastdfs.conf /etc/fdfs</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改/etc/fdfs/mod_fastdfs.conf的内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/fdfs/mod_fastdfs.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">connect_timeout=10</span><br><span class="line"><span class="comment"># 此处x.x.x.x为自己的云服务器的ip地址</span></span><br><span class="line">tracker_server=x.x.x.x:22122</span><br><span class="line">url_have_group_name=<span class="literal">true</span></span><br><span class="line">store_path0=/usr/<span class="built_in">local</span>/python3/fastdfs/storage</span><br></pre></td></tr></table></figure>
</li>
<li><p>将fastdfs-master/conf/目录下的两个文件复制到/etc/fdfs/中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fastdfs-master/conf</span><br><span class="line">$ cp http.conf /etc/fdfs/http.conf</span><br><span class="line">$ cp mime.types /etc/fdfs/mime.types</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入/usr/local/nginx/conf目录下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改nginx.conf配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim nginx.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  x.x.x.x;</span><br><span class="line"></span><br><span class="line">        location ~/group[0-9]/ &#123;</span><br><span class="line">            ngx_fastdfs_module;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新启动nginx</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/sbin</span><br><span class="line">$ nginx -s reload</span><br></pre></td></tr></table></figure>
</li>
<li><p>将之前上传图片时的返回内容复制到浏览器地址栏可以查看到文件</p>
<p><img src="/2020/02/23/23搭建FastDFS-Nginx分布式文件系统/2.png" alt="image-20200223182448549"></p>
</li>
</ol>
]]></content>
      <categories>
        <category>毕业设计</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>Linux</tag>
        <tag>FastDFS</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>22Linux中部署项目环境</title>
    <url>/2020/02/22/22Linux%E4%B8%AD%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<blockquote>
<p>经常用Linux系统进行开发，但是没有专门记录过。今天买了阿里云的服务器准备把项目部署到云端，把部署环境的过程记录一下。</p>
</blockquote>
<a id="more"></a>
<p>安装环境</p>
<blockquote>
<p>系统版本：CentOS 7.6（自带Python2.7）<br>安装版本：Python3.6<br>安装插件：virtualenv、virtualenvwrapper</p>
</blockquote>
<h4 id="一、安装Python3"><a href="#一、安装Python3" class="headerlink" title="一、安装Python3"></a>一、安装Python3</h4><p>由于CentOS7原本就安装了Python2，而且这个Python2不能被删除，因为有很多系统命令，比如yum都要用到。所以我们要额外安装Python3。</p>
<p>我们先来查看python安装位置，一般是位于<code>/usr/bin/python</code>目录下。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ which python</span><br><span class="line">&gt;&gt; /usr/bin/python</span><br></pre></td></tr></table></figure>
<p>下面介绍安装Python3的方法：</p>
<p><strong>1. 安装依赖包</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ yum -y groupinstall &quot;Development tools&quot;</span><br><span class="line">$ yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel</span><br></pre></td></tr></table></figure>
<p><strong>2.下载Python3安装包</strong><br>我这里下载的是Python3.6.2</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ wget https://www.python.org/ftp/python/3.6.2/Python-3.6.2.tar.xz</span><br></pre></td></tr></table></figure>
<p><strong>3. 新建python3存放目录</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir /usr/<span class="built_in">local</span>/python3</span><br></pre></td></tr></table></figure>
<p><strong>4. 安装Python3</strong><br>解压压缩包，进入解压目录，指定安装目录，安装Python3。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tar -xvJf  Python-3.6.2.tar.xz</span><br><span class="line">$ <span class="built_in">cd</span> Python-3.6.2</span><br><span class="line">$ ./configure --prefix=/usr/<span class="built_in">local</span>/python3</span><br><span class="line">$ make</span><br><span class="line">$ make install</span><br></pre></td></tr></table></figure>
<p>安装Python3时，会自动安装pip。假如没有，需要自己手动安装。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ yum -y install python-pip</span><br></pre></td></tr></table></figure>
<p><strong>5. 创建软链接</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ln -s /usr/<span class="built_in">local</span>/python3/bin/python3 /usr/bin/python3</span><br><span class="line">$ ln -s /usr/<span class="built_in">local</span>/python3/bin/pip3 /usr/bin/pip3</span><br></pre></td></tr></table></figure>
<p><strong>6. 安装完成，输入<code>python3</code>测试</strong></p>
<p><img src="/2020/02/22/22Linux中部署项目环境/1.png" alt="image-20200222184903576"></p>
<p>安装成功</p>
<h4 id="二、创建虚拟环境"><a href="#二、创建虚拟环境" class="headerlink" title="二、创建虚拟环境"></a>二、创建虚拟环境</h4><p><code>virtualenv</code>是一个可以在同一计算机中隔离多个python版本的工具。有时，两个不同的项目可能需要不同版本的python，如 python2.7 / python3.6 ，但是如果都装到一起，经常会导致问题。<code>virtualenv</code>能够用于创建独立的Python虚拟环境，多个Python相互独立，互不影响。<br><code>virtualenvwrapper</code>这个软件包可以让我们管理虚拟环境变得更加简单。不用再跑到某个目录下通过<code>virtualenv</code>来创建虚拟环境，并且激活的时候也要跑到具体的目录下去激活。</p>
<p>使用<code>pip</code>安装包前，先更新<code>pip</code>。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pip3 install --upgrade pip</span><br></pre></td></tr></table></figure>
<p><strong>1. 安装virtualenv、virtualenvwrapper</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pip3 install virtualenv</span><br><span class="line">$ pip3 install virtualenvwrapper</span><br></pre></td></tr></table></figure>
<p><strong>2. 进入<code>.bashrc</code>文件中，定义<code>virtualenvwrapper</code>路径</strong></p>
<p>使用vim编辑<code>.bashrc</code>文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ vim ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>在文末填入以下代码并保存</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 指定virtualenvwrapper执行的python版本</span></span><br><span class="line"><span class="built_in">export</span> VIRTUALENVWRAPPER_PYTHON=/usr/<span class="built_in">local</span>/python3/bin/python3</span><br><span class="line"><span class="comment"># 指定虚拟环境存放目录</span></span><br><span class="line"><span class="built_in">export</span> WORKON_HOME=~/Envs    </span><br><span class="line"><span class="comment"># 指定virtualenv的目录</span></span><br><span class="line"><span class="built_in">export</span> VIRTUALENVWRAPPER_VIRTUALENV=/usr/loacl/python3/bin/virtualenv</span><br><span class="line"><span class="comment"># virtualenvwrapper.sh所在目录</span></span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/python3/bin/virtualenvwrapper.sh</span><br></pre></td></tr></table></figure>
<p><strong>3. 运行<code>.bashrc</code>文件</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
<p><strong>4. 创建虚拟环境</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ mkvirtualenv py3-env</span><br></pre></td></tr></table></figure>
<p>也可指定虚拟环境的python版本</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$ mkvirtualenv --python=<span class="regexp">/usr/</span>local/python3/bin/python3 my_prj</span><br></pre></td></tr></table></figure>
<h4 id="导入项目所需的库文件"><a href="#导入项目所需的库文件" class="headerlink" title="导入项目所需的库文件"></a>导入项目所需的库文件</h4><p><strong>1. 进入虚拟环境中，然后进入到项目所在目录，安装好相应的包</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
<p>附：自动生成项目安装包的依赖文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>
<p>虚拟环境搭建完成！</p>
]]></content>
      <categories>
        <category>毕业设计</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>21Django2.0部分问题总结</title>
    <url>/2020/02/21/21Django2-0%E9%83%A8%E5%88%86%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<blockquote>
<p>摘要：记录一下今天遇到的问题，导包时用相对路径，pycharm不会报错，但项目启动不起来，用绝对路径可以启动起来，但pycharm会报错。</p>
</blockquote>
<a id="more"></a>
<h4 id="python引入模块报错ValueError-attempted-relative-import-beyond-top-level-package"><a href="#python引入模块报错ValueError-attempted-relative-import-beyond-top-level-package" class="headerlink" title="python引入模块报错ValueError: attempted relative import beyond top-level package"></a>python引入模块报错ValueError: attempted relative import beyond top-level package</h4><p>​        原因：导包时使用了相对路径，比如 <code>from . import XXX</code>或者<code>from .. import XXX</code></p>
<p>​        在涉及到相对导入时，package所对应的文件夹必须正确的被python解释器视作package，而不是普通文件夹。否则由于不被视作package，无法利用package之间的嵌套关系实现python中包的相对导入。</p>
<p>​        文件夹被python解释器视作package需要满足两个条件：</p>
<p>1、文件夹中必须有<strong>init</strong>.py文件，该文件可以为空，但必须存在该文件。</p>
<p>2、不能作为顶层模块来执行该文件夹中的py文件（即不能作为主函数的入口）。</p>
<p>​        补充：在”from YY import XX”这样的代码中，无论是XX还是YY，只要被python解释器视作package，就会首先调用该package的<strong>init</strong>.py文件。如果都是package，则调用顺序是YY，XX。</p>
<p>​        解决办法：使用绝对路径即可，或者在文件中添加下面两行代码</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys,os</span><br><span class="line">sys.path.append(os.path.dirname(__file__) + os.sep + <span class="string">'../'</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>问题总结</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
      </tags>
  </entry>
  <entry>
    <title>20使用celery异步发送邮件过程中遇到的问题</title>
    <url>/2020/02/20/20%E4%BD%BF%E7%94%A8celery%E5%BC%82%E6%AD%A5%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<blockquote>
<p>摘要：今天使用celery进行异步发送激活邮件，主要是为了防止发送邮件过程中系统反应过慢，影响用户体验。</p>
</blockquote>
<a id="more"></a>
<ol>
<li><p>启动worker过程中目标计算机积极拒绝，无法连接。</p>
<ul>
<li>下载并安装Redis-x64-3.0.503.msi，地址：<a href="https://github.com/MicrosoftArchive/redis/releases" target="_blank" rel="noopener">https://github.com/MicrosoftArchive/redis/releases</a></li>
<li>双击redis-cli.exe，启动服务即可。</li>
</ul>
</li>
<li><p>windows下安装Redis第一次启动报错：Creating Server TCP listening socket 127.0.0.1:6379: bind: No error</p>
<ul>
<li><p>双击redis-cli.exe</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;shutdown</span><br><span class="line">not connected&gt;exit</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>​    然后重新运行redis-server.exe redis.windows.conf，启动成功！</p>
<p>​    启动成功后不要关闭启动页面</p>
</li>
<li><p>发送邮件是worker报错：ValueError: not enough values to unpack (expected 3, got 0)</p>
<ul>
<li><p>原网页:<a href="https://github.com/celery/celery/issues/4081" target="_blank" rel="noopener">Unable to run tasks under Windows</a></p>
<p>看别人描述大概就是说win10上运行celery4.x就会出现这个问题，解决办法如下,原理未知：</p>
<p>先安装一个eventlet</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install eventlet</span><br></pre></td></tr></table></figure>
<p>然后启动worker的时候加一个参数<code>-P eventlet</code>，如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">celery -A &lt;mymodule&gt; worker -l info -P eventlet</span><br></pre></td></tr></table></figure>
<p>然后就可以正常的调用了。</p>
</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>问题总结</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>Django2.0</tag>
      </tags>
  </entry>
  <entry>
    <title>19使用邮箱进行账号激活</title>
    <url>/2020/02/19/19%E4%BD%BF%E7%94%A8%E9%82%AE%E7%AE%B1%E8%BF%9B%E8%A1%8C%E8%B4%A6%E5%8F%B7%E6%BF%80%E6%B4%BB/</url>
    <content><![CDATA[<blockquote>
<p>摘要：今天对登录注册模块进行重新设计，增加了邮箱激活功能。</p>
</blockquote>
<a id="more"></a>
<h4 id="邮箱开启STMP服务"><a href="#邮箱开启STMP服务" class="headerlink" title="邮箱开启STMP服务"></a>邮箱开启STMP服务</h4><p>可以免费开启STMP服务的邮箱有163,126，QQ，我选择的是QQ邮箱</p>
<p><img src="/2020/02/19/19使用邮箱进行账号激活/1.png" alt="image-20200219134229787"></p>
<p>选择设置下面的账户，下滑找到STMP服务一项，选择开启</p>
<p><img src="/2020/02/19/19使用邮箱进行账号激活/2.png" alt="image-20200219134522351"></p>
<p><img src="/2020/02/19/19使用邮箱进行账号激活/3.png" alt="image-20200219134738744"></p>
<p>使用密保手机发送一条信息</p>
<p><img src="/2020/02/19/19使用邮箱进行账号激活/4.png" alt="image-20200219134903997"></p>
<p>然后就可以拿到开启STMP服务的授权码，我们将授权码复制下来保存</p>
<h4 id="配置项目settings-py文件"><a href="#配置项目settings-py文件" class="headerlink" title="配置项目settings.py文件"></a>配置项目settings.py文件</h4><p>在项目的settings.py文件中加上以下配置</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"># 发送邮件配置</span></span><br><span class="line"><span class="xml"># SMTP服务地址</span></span><br><span class="line"><span class="xml">EMAIL_HOST = "smtp.qq.com"</span></span><br><span class="line"><span class="xml">EMAIL_PORT = 25</span></span><br><span class="line"><span class="xml"># 发送邮件的邮箱</span></span><br><span class="line"><span class="xml">EMAIL_HOST_USER = "你的邮箱"</span></span><br><span class="line"><span class="xml"># 客户端授权码密码</span></span><br><span class="line"><span class="xml">EMAIL_HOST_PASSWORD = "刚刚复制的授权码"</span></span><br><span class="line"><span class="xml">EMAIL_USE_TLS= False</span></span><br><span class="line"><span class="xml"># 收件人看到的发件人</span></span><br><span class="line"><span class="xml">EMAIL_FROM = "你的邮箱"</span></span><br></pre></td></tr></table></figure>
<h4 id="在响应的应用的views-py文件中新建视图send"><a href="#在响应的应用的views-py文件中新建视图send" class="headerlink" title="在响应的应用的views.py文件中新建视图send"></a>在响应的应用的views.py文件中新建视图send</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用Django内置的邮件库进行邮件发送</span></span><br><span class="line"><span class="keyword">from</span> django.core.mail <span class="keyword">import</span> send_mail</span><br><span class="line"><span class="keyword">from</span> itsdangerous <span class="keyword">import</span> TimedJSONWebSignatureSerializer <span class="keyword">as</span> Serializer</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用itsdangerous对用户ID进行加密,生成激活token</span></span><br><span class="line"><span class="comment"># ID加密是为了防止用户恶意攻击</span></span><br><span class="line">serializer = Serializer(settings.SECRET_KEY, <span class="number">3600</span>)</span><br><span class="line">info = &#123;<span class="string">'confirm'</span>:user.id&#125;</span><br><span class="line">token = serializer.dumps(info)</span><br><span class="line">token = token.decode()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发邮件</span></span><br><span class="line">subject = <span class="string">"邮件标题"</span></span><br><span class="line">message = <span class="string">'邮件正文'</span></span><br><span class="line">html_message = <span class="string">'请点击下面的链接激活您的账号&lt;br/&gt;&lt;a href=" 激活链接 "&gt;激活链接 &lt;/a&gt;'</span> %      </span><br><span class="line">send = settings.EMAIL_FROM</span><br><span class="line">receiver = [email]</span><br><span class="line">send_mail(subject, message, send, receiver,html_message=html_message)</span><br></pre></td></tr></table></figure>
<h4 id="配置响应应用的urls-py"><a href="#配置响应应用的urls-py" class="headerlink" title="配置响应应用的urls.py"></a>配置响应应用的urls.py</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用re_path进行正则路径匹配，path无法进行正则匹配</span></span><br><span class="line">re_path(<span class="string">r"^active/(?P&lt;token&gt;.*)$"</span>, ActiveView.as_view(), name=<span class="string">"active"</span>),</span><br></pre></td></tr></table></figure>
<h4 id="设置响应的点击发送后的链接对应的视图来处理事务"><a href="#设置响应的点击发送后的链接对应的视图来处理事务" class="headerlink" title="设置响应的点击发送后的链接对应的视图来处理事务"></a>设置响应的点击发送后的链接对应的视图来处理事务</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用itsdangerous库对用户ID进行解密</span></span><br><span class="line"><span class="keyword">from</span> itsdangerous <span class="keyword">import</span> TimedJSONWebSignatureSerializer <span class="keyword">as</span> Serializer</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ActiveView</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="string">"""用户激活"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, token)</span>:</span></span><br><span class="line">        <span class="comment"># 用户激活</span></span><br><span class="line">        <span class="comment"># 进行解密， 获取激活信息</span></span><br><span class="line">        serializer = Serializer(settings.SECRET_KEY, <span class="number">3600</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            info = serializer.loads(token)</span><br><span class="line">            user_id = info[<span class="string">"confirm"</span>]</span><br><span class="line">            <span class="comment"># 根据id获取用户信息</span></span><br><span class="line">            user = User.objects.get(id=user_id)</span><br><span class="line">            user.is_active = <span class="number">1</span></span><br><span class="line">            user.save()</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 跳转到登录页面</span></span><br><span class="line">            <span class="keyword">return</span> redirect(reverse(<span class="string">"user:login"</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> SignatureExpired <span class="keyword">as</span> e:</span><br><span class="line">            <span class="comment"># 激活链接已经过期</span></span><br><span class="line">            <span class="keyword">return</span> HttpResponse(<span class="string">"激活链接已过期"</span>)</span><br></pre></td></tr></table></figure>
<p>本文中代码均是在Django2.0环境下写的，更换环境可能需要修改，而且部分内容与应用中其他内容呼应，比如登录注册等等，所以本文只用作记录，其他系统并不适用。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>STMP</tag>
      </tags>
  </entry>
  <entry>
    <title>18Django升级到2.0过程中遇到的问题</title>
    <url>/2020/02/18/18Django%E5%8D%87%E7%BA%A7%E5%88%B02-0%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<blockquote>
<p>今天突发奇想把Django升级到2.0，过程艰难，自找苦吃。</p>
</blockquote>
<a id="more"></a>
<h4 id="Django2-0-中外键ForeignKey需要添加属性on-delete"><a href="#Django2-0-中外键ForeignKey需要添加属性on-delete" class="headerlink" title="Django2.0 中外键ForeignKey需要添加属性on_delete"></a>Django2.0 中外键ForeignKey需要添加属性on_delete</h4><p>on_delete参数的各个值的含义:</p>
<p>​    on_delete=None,        # 删除关联表中的数据时,当前表与其关联的field的行为<br>​    on_delete=models.CASCADE,   # 删除关联数据,与之关联也删除<br>​    on_delete=models.DO_NOTHING,  # 删除关联数据,什么也不做<br>​    on_delete=models.PROTECT,   # 删除关联数据,引发错误ProtectedError<br>​    # models.ForeignKey(‘关联表’, on_delete=models.SET_NULL, blank=True, null=True)<br>​    on_delete=models.SET_NULL,   # 删除关联数据,与之关联的值设置为null（前提FK字段需要设置为可空,一对一同理）<br>​    # models.ForeignKey(‘关联表’, on_delete=models.SET_DEFAULT, default=’默认值’)<br>​    on_delete=models.SET_DEFAULT, # 删除关联数据,与之关联的值设置为默认值（前提FK字段需要设置默认值,一对一同理）<br>​    on_delete=models.SET,     # 删除关联数据,<br>​         a. 与之关联的值设置为指定值,设置：models.SET(值)<br>​         b. 与之关联的值设置为可执行对象的返回值,设置：models.SET(可执行对象)</p>
<h4 id="Django中blank-True和null-True的区别"><a href="#Django中blank-True和null-True的区别" class="headerlink" title="Django中blank=True和null=True的区别"></a>Django中blank=True和null=True的区别</h4><p>null 是针对数据库而言，如果 null=True, 表示数据库的该字段可以为空。那么在新建一个model对象的时候是不会报错的！！</p>
<p>blank 是针对表单的，如果 blank=True，表示你的表单填写该字段的时候可以不填。比如 admin 界面下增加 model 一条记录的时候，直观的看到就是该字段不是粗体。</p>
<h4 id="Django2-0中urlpattern匹配写法"><a href="#Django2-0中urlpattern匹配写法" class="headerlink" title="Django2.0中urlpattern匹配写法"></a>Django2.0中urlpattern匹配写法</h4><p>例如：仅匹配<a href="http://127.0.0.1:8000/时想要跳转到某个页面，这时urlpattern中的url规则应该写成：" target="_blank" rel="noopener">http://127.0.0.1:8000/时想要跳转到某个页面，这时urlpattern中的url规则应该写成：</a></p>
<p><strong>情况1：使用url</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">　　from django.contrib import admin</span><br><span class="line">　　from django.urls import path</span><br><span class="line">　　from django.conf.urls import url</span><br><span class="line"></span><br><span class="line">　　urlpatterns = [</span><br><span class="line">    　　path(&apos;admin/&apos;, admin.site.urls),</span><br><span class="line">    　　url(r&apos;&apos;,include(&apos;CRM.urls&apos;)),</span><br></pre></td></tr></table></figure>
<pre><code>　　# 以前习惯用url(r&apos;^$&apos;,view.somedef)
　　# 如果这么写会报错：
　　# Your URL pattern &apos;^$&apos; uses include with a route ending with a &apos;$&apos;
</code></pre><p>　　]</p>
<p>情况2：使用path</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">　　from django.contrib import admin</span><br><span class="line">　　from django.urls import path</span><br><span class="line">　　</span><br><span class="line">　　urlpatterns = [</span><br><span class="line">　　　　path(&apos;admin/&apos;, admin.site.urls),</span><br><span class="line">　　　　　path(&apos;&apos;,include(&apos;CRM.urls&apos;)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>情况3：使用re_path</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line">from django.conf.urls import re_path</span><br><span class="line"></span><br><span class="line">　　urlpatterns = [</span><br><span class="line">　　　　path(&apos;admin/&apos;, admin.site.urls),</span><br><span class="line">　　　　re_path(r&apos;&apos;,include(&apos;CRM.urls&apos;)),</span><br><span class="line"></span><br><span class="line">　　]</span><br></pre></td></tr></table></figure>
<h4 id="form表单的action写法"><a href="#form表单的action写法" class="headerlink" title="form表单的action写法"></a>form表单的action写法</h4><p><strong>问题：</strong>RuntimeError: You called this URL via POST, but the URL doesn’t end in a slash and you have APPEN…</p>
<p>提示form的action地址最后不是/结尾的，而且APPEND_SLASH的值是Ture</p>
<p><strong>解决办法：</strong>将form的action地址改为/结尾的就可以了，或者将APPEND_SLASH的值改为False</p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>问题总结</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>Django2.0</tag>
      </tags>
  </entry>
  <entry>
    <title>一种解决github项目下载失败的方法</title>
    <url>/2020/02/17/%E4%B8%80%E7%A7%8D%E8%A7%A3%E5%86%B3github%E9%A1%B9%E7%9B%AE%E4%B8%8B%E8%BD%BD%E5%A4%B1%E8%B4%A5%E7%9A%84%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<blockquote>
<p>摘要：借助码云实现第三方快速下载</p>
</blockquote>
<a id="more"></a>
<p>今天下载一个 <del>比较大型</del> 30m大小的项目的时候由于网络问题接连失败，然后在网上找了一种可行的方法，记录下来。</p>
<h4 id="1-首先需要一个码云账户，如果你没有，这个是官网地址https-gitee-com"><a href="#1-首先需要一个码云账户，如果你没有，这个是官网地址https-gitee-com" class="headerlink" title="1. 首先需要一个码云账户，如果你没有，这个是官网地址https://gitee.com/"></a>1. 首先需要一个码云账户，如果你没有，这个是官网地址<a href="https://gitee.com/" target="_blank" rel="noopener">https://gitee.com/</a></h4><p><img src="/2020/02/17/一种解决github项目下载失败的方法/1.png" alt></p>
<h4 id="2-注册一个账号"><a href="#2-注册一个账号" class="headerlink" title="2. 注册一个账号"></a>2. 注册一个账号</h4><p><img src="/2020/02/17/一种解决github项目下载失败的方法/2.png" alt="image-20200217214348392"></p>
<h4 id="3-新建一个仓库"><a href="#3-新建一个仓库" class="headerlink" title="3.新建一个仓库"></a>3.新建一个仓库</h4><p><img src="/2020/02/17/一种解决github项目下载失败的方法/3.png" alt="image-20200217214722401"></p>
<h4 id="4-选择导入已有仓库"><a href="#4-选择导入已有仓库" class="headerlink" title="4. 选择导入已有仓库"></a>4. 选择导入已有仓库</h4><p><img src="/2020/02/17/一种解决github项目下载失败的方法/4.png" alt="image-20200217214928948"></p>
<h4 id="5-复制github项目地址"><a href="#5-复制github项目地址" class="headerlink" title="5.复制github项目地址"></a>5.复制github项目地址</h4><p><img src="/2020/02/17/一种解决github项目下载失败的方法/5.png" alt="image-20200217215524197"></p>
<h4 id="6-粘贴刚刚刚创建的仓库，然后点击创建"><a href="#6-粘贴刚刚刚创建的仓库，然后点击创建" class="headerlink" title="6.粘贴刚刚刚创建的仓库，然后点击创建"></a>6.粘贴刚刚刚创建的仓库，然后点击创建</h4><p><img src="/2020/02/17/一种解决github项目下载失败的方法/6.png" alt="image-20200217215817678"></p>
<h4 id="7-等待创建完成之后的，将仓库下载到本地"><a href="#7-等待创建完成之后的，将仓库下载到本地" class="headerlink" title="7.等待创建完成之后的，将仓库下载到本地"></a>7.等待创建完成之后的，将仓库下载到本地</h4><p><img src="/2020/02/17/一种解决github项目下载失败的方法/7.png" alt="image-20200217220141506"></p>
<p>输入验证码之后就可以用正常网速下载项目到本地了。</p>
]]></content>
      <categories>
        <category>桌边闲话</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>17ionic4中数据交互</title>
    <url>/2020/02/17/17ionic4%E4%B8%AD%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92/</url>
    <content><![CDATA[<blockquote>
<p>ionic中数据交互请求服务器端数据和angular中几乎一样，get和post都使用HttpClientModule模块。</p>
</blockquote>
<a id="more"></a>
<h4 id="ionic4-get请求数据"><a href="#ionic4-get请求数据" class="headerlink" title="ionic4 get请求数据"></a>ionic4 get请求数据</h4><p><strong>1、在app.module.ts中引入HttpClientModule 并注入</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;HttpClientModule&#125; <span class="keyword">from</span> <span class="string">'@angular/common/http'</span>;</span><br><span class="line"></span><br><span class="line">imports: [</span><br><span class="line"> BrowserModule,</span><br><span class="line"> HttpClientModule </span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>2、在用到的地方引入HttpClient并在构造函数声明</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;HttpClient&#125; <span class="keyword">from</span> <span class="string">"@angular/common/http"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span>(public http:HttpClient) &#123; &#125;</span><br></pre></td></tr></table></figure>
<p><strong>3、ionic4 get请求数据</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> api = <span class="string">"http://a.itying.com/api/productlist"</span>;</span><br><span class="line"><span class="keyword">this</span>.http.get(api).subscribe(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(response); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="ionic4-post提交数据"><a href="#ionic4-post提交数据" class="headerlink" title="ionic4 post提交数据"></a>ionic4 post提交数据</h4><p><strong>1、在app.module.ts中引入HttpClientModule 并注入</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;HttpClientModule&#125; <span class="keyword">from</span> <span class="string">'@angular/common/http'</span>;</span><br><span class="line"></span><br><span class="line">imports: [</span><br><span class="line">  BrowserModule,</span><br><span class="line">  HttpClientModule </span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>2、在用到的地方引入HttpClient、HttpHeaders并在构造函数声明HttpClient</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;HttpClient,HttpHeaders&#125; <span class="keyword">from</span> <span class="string">"@angular/common/http"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span>(public http:HttpClient) &#123; &#125;</span><br></pre></td></tr></table></figure>
<p><strong>3、post提交数据</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> httpOptions = &#123;</span><br><span class="line">   headers: <span class="keyword">new</span> HttpHeaders(&#123; <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span> &#125;)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> api = <span class="string">"http://127.0.0.1:3000/doLogin"</span>;</span><br><span class="line"><span class="keyword">this</span>.http.post(api,&#123;<span class="attr">username</span>:<span class="string">'张三'</span>,<span class="attr">age</span>:<span class="string">'20'</span>&#125;,httpOptions).subscribe(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(response);      </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="ionic4-Jsonp请求数据"><a href="#ionic4-Jsonp请求数据" class="headerlink" title="ionic4 Jsonp请求数据"></a>ionic4 Jsonp请求数据</h4><p><strong>1、在app.module.ts中引入HttpClientModule、HttpClientJsonpModule 并注入</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;HttpClientModule,HttpClientJsonpModule&#125; <span class="keyword">from</span> <span class="string">'@angular/common/http'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">imports: [</span><br><span class="line">   BrowserModule,</span><br><span class="line">   HttpClientModule,</span><br><span class="line">   HttpClientJsonpModule</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>2、在用到的地方引入HttpClient并在构造函数声明</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;HttpClient&#125; <span class="keyword">from</span> <span class="string">"@angular/common/http"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span>(public http:HttpClient) &#123; &#125;</span><br></pre></td></tr></table></figure>
<p><strong>3、jsonp请求数据</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> api = <span class="string">"http://a.itying.com/api/productlist"</span>;</span><br><span class="line"><span class="keyword">this</span>.http.jsonp(api,<span class="string">'callback'</span>).subscribe(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(response); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>毕业设计</category>
        <category>移动端应用搭建</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>Ionic</tag>
      </tags>
  </entry>
  <entry>
    <title>16TypeScript和JavaScript的比较</title>
    <url>/2020/02/16/16TypeScript%E5%92%8CJavaScript%E7%9A%84%E6%AF%94%E8%BE%83/</url>
    <content><![CDATA[<blockquote>
<p>TypeScript和JavaScript很像，但是又有很大不同。</p>
</blockquote>
<a id="more"></a>
<h4 id="JavaScript-和-TypeScript-的概要介绍"><a href="#JavaScript-和-TypeScript-的概要介绍" class="headerlink" title="JavaScript 和 TypeScript 的概要介绍"></a>JavaScript 和 TypeScript 的概要介绍</h4><p><strong>JavaScript:</strong><br>JavaScript 是一种轻量级的解释性脚本语言，可嵌入到 HTML 页面中，在浏览器端执行，能够实现浏览器端丰富的交互功能，为用户带来流畅多样的用户体验。</p>
<p>JavaScript 是基于对象和事件驱动的，无需特定的语言环境，只需在支持的浏览器上就能运行。</p>
<p>JavaScript 语言具有以下特点：</p>
<ul>
<li>JavaScript 是一种脚本编写语言，无需编译，只要嵌入 HTML 代码中，就能由浏览器逐行加载解释执行。</li>
<li>JavaScript 是一种基于对象的语言，可以创建对象同时使用现有对象。但是 Javascript 并不支持其它面向对象语言所具有的继承和重载功能。</li>
<li>JavaScript 的语法简单，使用的变量为弱类型。</li>
<li>JavaScript 语言较为安全，仅在浏览器端执行，不会访问本地硬盘数据。</li>
<li>JavaScript 语言具有动态性。JavaScript 是事件驱动的，只根据用户的操作做出相应的反应处理。</li>
<li>JavaScript 只依赖于浏览器，与操作系统的因素无关。因此 JavaScript 是一种跨平台的语言。</li>
<li>JavaScript 兼容性较好，能够与其他技术（如 XML，REST API 等）一起使用。</li>
</ul>
<p><strong>TypeScript：</strong></p>
<p>TypeScript 是 Microsoft 开发和维护的一种面向对象的编程语言。它是 JavaScript 的超集，包含了 JavaScript 的所有元素，可以载入 JavaScript 代码运行，并扩展了 JavaScript 的语法。</p>
<p>TypeScript 具有以下特点：</p>
<ul>
<li>TypeScript 是 Microsoft 推出的开源语言，使用 Apache 授权协议</li>
<li>TypeScript 增加了静态类型、类、模块、接口和类型注解</li>
<li>TypeScript 可用于开发大型的应用</li>
<li>TypeScript 易学易于理解</li>
</ul>
<h4 id="JavaScript-和-TypeScript-的主要差异"><a href="#JavaScript-和-TypeScript-的主要差异" class="headerlink" title="JavaScript 和 TypeScript 的主要差异"></a>JavaScript 和 TypeScript 的主要差异</h4><p>TypeScript 可以使用 JavaScript 中的所有代码和编码概念，TypeScript 是为了使 JavaScript 的开发变得更加容易而创建的。例如，TypeScript 使用类型和接口等概念来描述正在使用的数据，这使开发人员能够快速检测错误并调试应用程序。</p>
<ul>
<li>TypeScript 从核心语言方面和类概念的模塑方面对 JavaScript 对象模型进行扩展。</li>
<li>JavaScript 代码可以在无需任何修改的情况下与 TypeScript 一同工作，同时可以使用编译器将 TypeScript 代码转换为 JavaScript。</li>
<li>TypeScript 通过类型注解提供编译时的静态类型检查。</li>
<li>TypeScript 中的数据要求带有明确的类型，JavaScript不要求。</li>
<li>TypeScript 为函数提供了缺省参数值。</li>
<li>TypeScript 引入了 JavaScript 中没有的“类”概念。</li>
<li>TypeScript 中引入了模块的概念，可以把声明、数据、函数和类封装在模块中。</li>
</ul>
<h4 id="TypeScript-的优势"><a href="#TypeScript-的优势" class="headerlink" title="TypeScript 的优势"></a>TypeScript 的优势</h4><p>下面列举 TypeScript 相比于 JavaScript 的显著优势：</p>
<ol>
<li>静态输入<br>静态类型化是一种功能，可以在开发人员编写脚本时检测错误。查找并修复错误是当今开发团队的迫切需求。有了这项功能，就会允许开发人员编写更健壮的代码并对其进行维护，以便使得代码质量更好、更清晰。</li>
<li>大型的开发项目<br>有时为了改进开发项目，需要对代码库进行小的增量更改。这些小小的变化可能会产生严重的、意想不到的后果，因此有必要撤销这些变化。使用TypeScript工具来进行重构更变的容易、快捷。</li>
<li>更好的协作<br>当发开大型项目时，会有许多开发人员，此时乱码和错误的机也会增加。类型安全是一种在编码期间检测错误的功能，而不是在编译项目时检测错误。这为开发团队创建了一个更高效的编码和调试过程。</li>
<li>更强的生产力<br>干净的 ECMAScript 6 代码，自动完成和动态输入等因素有助于提高开发人员的工作效率。这些功能也有助于编译器创建优化的代码。</li>
</ol>
<blockquote>
<p>版权声明：本文为CSDN博主「powertoolsteam」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/powertoolsteam/article/details/79000989" target="_blank" rel="noopener">https://blog.csdn.net/powertoolsteam/article/details/79000989</a></p>
</blockquote>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>移动端应用搭建</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>15ionic的组件</title>
    <url>/2020/02/15/15ionic%E7%9A%84%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<blockquote>
<p>摘要：今天学了一些ionic的相关组件，官网提供了相关的文档。我主要在需要的时候上官网进行查阅。</p>
</blockquote>
<a id="more"></a>
<h4 id="ionic只是一个容器"><a href="#ionic只是一个容器" class="headerlink" title="ionic只是一个容器"></a>ionic只是一个容器</h4><p>在使用ionic的过程中发现，Ionic只是一个容易，它里面放着一些我们常用的东西供我们使用，比如Angular，React，TypeScript等等，我们用的时候只需要用相关的东西去描述我们想要的内容，描述完成Ionic会自动使用相关的技术帮我们搭建好这些东西，至于搭建的过程我们不需要去管，只要交给Ionic就可以了，我们可以更加专注于前端。</p>
<h4 id="typescript的学习"><a href="#typescript的学习" class="headerlink" title="typescript的学习"></a>typescript的学习</h4><p>做的过程中发现ionic更多地用到TypeScript语言，TypeScript相比于JavaScript虽然说是它的超集，但是typescript实际上是一门面向对象的语言，它包含了 JavaScript 的所有元素，可以载入 JavaScript 代码运行，并扩展了 JavaScript 的语法。</p>
<p>正是因为TypeScript增加了静态类型，类，模块，接口和类型注解，所以TypeScript可以用于大型应用的开发，学习起来也更容易。所以我还想继续深入学习一下TypeScript，算是立一个flag吧，接下来几天边做移动端的开发边学习TypeScript。</p>
<p>加油加油加油！</p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>移动端应用搭建</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>Ionic</tag>
      </tags>
  </entry>
  <entry>
    <title>14ionic页面操作</title>
    <url>/2020/02/14/14ionic%E9%A1%B5%E9%9D%A2%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<blockquote>
<p>摘要：ionic创建页面以及页面跳转以及自定义公共模块。</p>
</blockquote>
<a id="more"></a>
<h4 id="1-ionic创建页面"><a href="#1-ionic创建页面" class="headerlink" title="1.ionic创建页面"></a>1.ionic创建页面</h4><p>命令：<code>ionic g page 页面名称</code></p>
<p>我在项目目录打开cmd命令行，输入<code>ionic g page news</code>，可以看到在app目录下新增了news文件夹。</p>
<p><img src="/2020/02/14/14ionic页面操作/1.png" alt="image-20200214182959503"></p>
<p><img src="/2020/02/14/14ionic页面操作/2.png" alt="image-20200214183713725"></p>
<p>news实际上是一个模块，打开news文件夹里面有6个子文件，这就是news模块。同时，ionic会自动在app-routing.module.ts文件中自动更新news的路由信息。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: <span class="string">'news'</span>,</span><br><span class="line">  loadChildren: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./news/news.module'</span>).then( <span class="function"><span class="params">m</span> =&gt;</span> m.NewsPageModule)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-ionic页面跳转"><a href="#2-ionic页面跳转" class="headerlink" title="2.ionic页面跳转"></a>2.ionic页面跳转</h4><p>要实现由tab1页面跳转到news页面</p>
<ol>
<li>首先我们在tab1的html页面设置一个按钮，在\&lt;ion-content>中写入：</li>
</ol>
<p>\&lt;ion-button color=”primary” [routerLink]=”[ ‘/news’]”> 跳转新闻\</p>
<p>其中[routerLink]=[ ‘/news’]一句就是跳转到相应的页面语句</p>
<ol start="2">
<li>在news.page.ts文件中我们写一个循环：</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> list:<span class="built_in">any</span>=[];</span><br><span class="line"></span><br><span class="line"> <span class="keyword">constructor</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line"> ngOnInit() &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">   <span class="keyword">this</span>.list.push(<span class="string">'这是第'</span>+ i +<span class="string">'条数据'</span>)</span><br><span class="line">   </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>然后在news.page.html中实现循环输出：</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ion-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ion-item</span> *<span class="attr">ngFor</span>=<span class="string">"let item of list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ion-label</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">ion-label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ion-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ion-list</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/14/14ionic页面操作/2.gif" alt></p>
<p>ionic4.x默认没有加返回按钮，我们可以在news.page.html页面的\&lt;ion-header>中加上</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ion-buttons</span> <span class="attr">slot</span>=<span class="string">"start"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ion-back-button</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-back-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ion-buttons</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样就可以实现返回功能。</p>
<p><img src="/2020/02/14/14ionic页面操作/3.gif" alt></p>
<h4 id="3-自定义公共模块"><a href="#3-自定义公共模块" class="headerlink" title="3.自定义公共模块"></a>3.自定义公共模块</h4><p>ionic4.x中多个模块没法共用一个组件，这时候就需要把组件封装成模块，让模块引入模块。</p>
<p>创建模块及组件命令：</p>
<p><code>ionic g module 模块名称</code></p>
<p><code>ionic g component 组件名称</code></p>
<ol>
<li>我们创建一个slide组件，我们输入：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ionic g module module/slide</span><br><span class="line">ionic g component module/slide</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/14/14ionic页面操作/3.png" alt="image-20200214193247584"></p>
<p>在app文件夹下面可以看到module/slide文件夹，slide.component.html文件中有默认语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  slide works!</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>想要在其他页面中引入这个组件，就需要把这个组件暴露出来</p>
<ol start="2">
<li><p>在slide.module.ts文件的declarstions中加入SlideCompnent并使用<code>exports:[SlideComponent]</code>把slide组件暴露出来</p>
<p><img src="/2020/02/14/14ionic页面操作/4.png" alt="image-20200214195744654"></p>
</li>
<li><p>在tab1的tab1.module.ts文件中<code>import { SlideModule } from &#39;../module/slide/slide.module&#39;</code>引入组件并在@NgModule中声明<code>SlideModule</code></p>
</li>
<li><p>接下来就可以在tab1.page.html文件中使用\&lt;app-slide>\&lt;/app-slide>引入该组件</p>
<p><img src="/2020/02/14/14ionic页面操作/5.png" alt="image-20200214200038514"></p>
<p>在tab1页面中已经引入了slide.module.html页面的内容，其他页面引入Slide组件也是同样的方式。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>移动端应用搭建</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>Ionic</tag>
      </tags>
  </entry>
  <entry>
    <title>13ionic目录结构分析</title>
    <url>/2020/02/13/13ionic%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<blockquote>
<p>摘要：ionic目录比较复杂，但是实际操作起来比较简单，所有页面都是模块化的。</p>
</blockquote>
<a id="more"></a>
<p><img src="/2020/02/13/13ionic目录结构分析/1.png" alt="image-20200213184457342"></p>
<p>e2e：端对端测试文件(一般情况下不用管)</p>
<p>node_modules ：项目所需要的依赖包 resources ：android/ios 资源（更换图标和启</p>
<p>动动画）</p>
<p>src：开发工作目录，页面、样式、脚本和图片都放在这个目录下 （很重要） </p>
<p>angular.json angular 配置文件</p>
<p>config.xml: 打包成app 的配置文件</p>
<p>package.json: 配置项目的元数据和管理项目所需要的依赖</p>
<p>ionic.config.json、ionic.starter.json：ionic 配置文件</p>
<p>tsconfig.json: TypeScript 项目的根目录，指定用来编译这个项目的根文件和编译选项</p>
<p>tslint.json：格式化和校验typescript</p>
<p><strong>其他还会出现的文件：</strong></p>
<p>在运行<code>ionic build --prod</code>命令之后还会出现一个www文件夹，这是页面的静态文件夹</p>
<p>运行<code>cordova platform add android</code>打包命令后还会出现一个platforms文件夹，里面放油生成Android或iOS安装包所需要的资源</p>
<p>plugins：插件文件夹，里面放置各种cordova安装的插件</p>
<p><strong>src目录分析：</strong></p>
<p><img src="/2020/02/13/13ionic目录结构分析/2.png" alt="image-20200213185626342"></p>
<p><strong>app:</strong>项目所需要的模块，组件，服务等</p>
<p><strong>assets:</strong>项目的静态文件，主要是图片等等</p>
<p><strong>environment：</strong>环境相关文件，配置项目运行的环境</p>
<p><strong>theme：</strong>主题文件，可以修改项目的默认主题，比如配色</p>
<p><strong>global.scss：</strong>全局css样式文件</p>
<p><strong>index.html：</strong>入口文件</p>
<p><strong>main.ts：</strong>主入口文件</p>
<p><strong>polyfills.ts：</strong>填充库，在项目加载之前完成</p>
<p><strong>test：</strong>测试文件</p>
<p><strong>zone-flags.ts：</strong>配置文件</p>
<p>ionic中有很多配置相关的文件，并不需要每一个都去学习，我们只要知道一些常用的就可以尝试开发功能了。</p>
<p>好了，ionic的安装和介绍就学到这里，其实这几天还学了一些如何开发，做了几个简单的静态页面，就不写了，明天开始尝试做功能。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>移动端应用搭建</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title>12ionic框架的安装</title>
    <url>/2020/02/12/12ionic%E6%A1%86%E6%9E%B6%E7%9A%84%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<blockquote>
<p>摘要：虽然之前接触过ionic框架，但是完全和小白一样，Angular也没有深入学习过。所以接下来的一段时候完全要重头开始学习，包括Angular，TypeScript等等。</p>
</blockquote>
<a id="more"></a>
<h4 id="1-node-js的安装"><a href="#1-node-js的安装" class="headerlink" title="1. node.js的安装"></a>1. node.js的安装</h4><p>简单的说 Node.js 就是运行在服务端的 JavaScript，如果有JavaScript基础的话学习起来会非常轻松。</p>
<p><img src="/2020/02/12/12ionic框架的安装/1.png" alt="image-20200212172705539"></p>
<p>在node.js官网上下载长期支持版本就可以，安装到本地。</p>
<h4 id="2-安装ionic"><a href="#2-安装ionic" class="headerlink" title="2. 安装ionic"></a>2. 安装ionic</h4><p>Win + R 打开命令行工具：</p>
<p><code>npm install -g cordova ionic</code></p>
<p>安装结束之后执行<code>ionic -v</code>出现版本号即为安装成功。</p>
<h4 id="3-创建第一个应用"><a href="#3-创建第一个应用" class="headerlink" title="3. 创建第一个应用"></a>3. 创建第一个应用</h4><p><code>ionic start myApp tabs</code>即为创建一个默认带tab栏的App。</p>
<p><img src="/2020/02/12/12ionic框架的安装/2.png" alt="image-20200212180304089"></p>
<p>这时候会让你选是基于Angular还是React，可以看到ionic框架支持Angular和React，其实Ionic4还支持VUE框架开发，但是我接下来计划用Angular进行开发，所以这里不深入研究了。选择Angular按下Enter，等待安装完成。</p>
<p>安装完成后<code>cd myApp</code>进入应用根目录，<code>ionic server</code>即可运行项目。</p>
<h4 id="4-其他问题"><a href="#4-其他问题" class="headerlink" title="4. 其他问题"></a>4. 其他问题</h4><p>由于node.js的服务器在国外，所以安装过程中速度会特别慢，这个时候我们可以切换到国内的镜像源：</p>
<p><code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p>
<p>再执行<code>cnpm install -g cordova ionic</code>安装速度会快很多。</p>
<h4 id="5-视频教程链接"><a href="#5-视频教程链接" class="headerlink" title="5. 视频教程链接"></a>5. 视频教程链接</h4><p>IT营的大地老师是目前我觉得讲的最好的老师，过程详细全面，相关教程可以去IT营的官网查看。</p>
<p>IT营：<a href="https://www.itying.com/" target="_blank" rel="noopener">https://www.itying.com/</a></p>
<p>Ionic4.x入门实战教程：<a href="https://www.itying.com/goods-1067.html" target="_blank" rel="noopener">https://www.itying.com/goods-1067.html</a></p>
<p>Angular8视频教程：<a href="https://www.itying.com/goods-1047.html" target="_blank" rel="noopener">https://www.itying.com/goods-1047.html</a></p>
<p>TypeScript视频教程：<a href="https://www.itying.com/goods-905.html" target="_blank" rel="noopener">https://www.itying.com/goods-905.html</a></p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>移动端应用搭建</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>Ionic</tag>
      </tags>
  </entry>
  <entry>
    <title>11系统整合</title>
    <url>/2020/02/11/11%E7%B3%BB%E7%BB%9F%E6%95%B4%E5%90%88/</url>
    <content><![CDATA[<blockquote>
<p>摘要：今天主要把前两天做的内容进行整合，整合成一个完整的系统。</p>
</blockquote>
<a id="more"></a>
<p>整体来说没有什么太大的问题，只是整合过程中的一些语法问题和Python的库导入问题，第二个是为了提高后台的管理，引入了xadmin，也是今天在看视频的时候接触到的，之前一直使用admin来管理，xadmin相较于admin更加强大，管理功能也更完善。</p>
<ol>
<li><p>xadmin的安装</p>
<ul>
<li>pip  install  xadmin</li>
</ul>
</li>
<li><p>注册xadmin</p>
<ul>
<li><p>在settings.py中注册xadmin</p>
</li>
<li><p>然后在urls.py中配置url指向xadmin</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import xadmin</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r&apos;^xadmin/&apos;, xadmin.site.urls),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>将user app中的admin.py文件中注册的内容注释掉。</p>
</li>
</ol>
<p>PC端系统的开发暂时就到这里，下个阶段主要是移动端的开发，之前接触过ionic框架，使用起来感觉很不错，虽然是基于HTML5技术的移动APP开发框架，但是开发出来的应用很接近原生开发，所以明天开始学习ionic框架。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
      </tags>
  </entry>
  <entry>
    <title>10基于TensorFlow利用卷积神经网络训练图像样本数据</title>
    <url>/2020/02/10/10%E5%9F%BA%E4%BA%8ETensorFlow%E5%88%A9%E7%94%A8%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E8%AE%AD%E7%BB%83%E5%9B%BE%E5%83%8F%E6%A0%B7%E6%9C%AC%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<blockquote>
<p>摘要：TensorFlow以及卷积神经网络属于比较深度的内容，我做毕业设计暂时只能使用现成的TF-Slim算法和TensorFlow官网提供的数据集进行训练。</p>
</blockquote>
<a id="more"></a>
<p>这里我选用的是TF-Slim算法模型，预训练模型采用<a href="http://download.tensorflow.org/models/inception_v3_2016_08_28.tar.gz" target="_blank" rel="noopener">Inception V3</a></p>
<p>具体过程：</p>
<h4 id="准备图片数据"><a href="#准备图片数据" class="headerlink" title="准备图片数据"></a>准备图片数据</h4><ul>
<li>准备好自定义的图片数据</li>
<li>放到 data_prepare/pic/train 和 data_prepare/pic/validation 中</li>
<li>自己建立分类文件夹，文件夹名为分类标签名</li>
</ul>
<h4 id="将图片数据转换成TF-Record格式文件"><a href="#将图片数据转换成TF-Record格式文件" class="headerlink" title="将图片数据转换成TF-Record格式文件"></a>将图片数据转换成TF-Record格式文件</h4><ul>
<li>在 data_prepare/ 下，执行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python data_convert.py -t pic/ \</span><br><span class="line">  --train-shards 2 \</span><br><span class="line">  --validation-shards 2 \</span><br><span class="line">  --num-threads 2 \</span><br><span class="line">  --dataset-name satellite</span><br></pre></td></tr></table></figure>
<ul>
<li>会生成4个tf-record文件和1个label文件</li>
</ul>
<h4 id="将转换生成的5个文件复制到-slim-satellite-data-下"><a href="#将转换生成的5个文件复制到-slim-satellite-data-下" class="headerlink" title="将转换生成的5个文件复制到 slim\satellite\data 下"></a>将转换生成的5个文件复制到 slim\satellite\data 下</h4><h4 id="修改-slim-datasets-satellite-py-文件"><a href="#修改-slim-datasets-satellite-py-文件" class="headerlink" title="修改 slim\datasets\satellite.py 文件"></a>修改 slim\datasets\satellite.py 文件</h4><ul>
<li><em>FILE_PATTERN = ‘satellite</em>%s_*.tfrecord’     （tf-record文件名格式）</li>
<li>SPLITS_TO_SIZES = {‘train’: 16, ‘validation’: 4}  （训练集和测试集文件总数）</li>
<li>_NUM_CLASSES = 2                  （分类类目总数）</li>
<li>‘image/format’: tf.FixedLenFeature((), tf.string, default_value=’jpg’)  （图片格式，这里是jpg）</li>
</ul>
<h4 id="下载预训练模型Inception-V3"><a href="#下载预训练模型Inception-V3" class="headerlink" title="下载预训练模型Inception V3"></a>下载预训练模型Inception V3</h4><ul>
<li><a href="http://download.tensorflow.org/models/inception_v3_2016_08_28.tar.gz" target="_blank" rel="noopener">http://download.tensorflow.org/models/inception_v3_2016_08_28.tar.gz</a></li>
<li>解压后，复制到 slim\satellite\pretrained 下</li>
</ul>
<h4 id="在-slim-文件夹下执行如下命令，进行训练："><a href="#在-slim-文件夹下执行如下命令，进行训练：" class="headerlink" title="在 slim/ 文件夹下执行如下命令，进行训练："></a>在 slim/ 文件夹下执行如下命令，进行训练：</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python train_image_classifier.py \</span><br><span class="line">  --train_dir=satellite/train_dir \</span><br><span class="line">  --dataset_name=satellite \</span><br><span class="line">  --dataset_split_name=train \</span><br><span class="line">  --dataset_dir=satellite/data \</span><br><span class="line">  --model_name=inception_v3 \</span><br><span class="line">  --checkpoint_path=satellite/pretrained/inception_v3.ckpt \</span><br><span class="line">  --checkpoint_exclude_scopes=InceptionV3/Logits,InceptionV3/AuxLogits \</span><br><span class="line">  --trainable_scopes=InceptionV3/Logits,InceptionV3/AuxLogits \</span><br><span class="line">  --max_number_of_steps=100000 \</span><br><span class="line">  --batch_size=32 \</span><br><span class="line">  --learning_rate=0.001 \</span><br><span class="line">  --learning_rate_decay_type=fixed \</span><br><span class="line">  --save_interval_secs=300 \</span><br><span class="line">  --save_summaries_secs=2 \</span><br><span class="line">  --log_every_n_steps=10 \</span><br><span class="line">  --optimizer=rmsprop \</span><br><span class="line">  --weight_decay=0.00004</span><br></pre></td></tr></table></figure>
<h4 id="在-slim-文件夹下执行如下命令，进行模型能力评估："><a href="#在-slim-文件夹下执行如下命令，进行模型能力评估：" class="headerlink" title="在 slim/ 文件夹下执行如下命令，进行模型能力评估："></a>在 slim/ 文件夹下执行如下命令，进行模型能力评估：</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python eval_image_classifier.py \</span><br><span class="line">  --checkpoint_path=satellite/train_dir \</span><br><span class="line">  --eval_dir=satellite/eval_dir \</span><br><span class="line">  --dataset_name=satellite \</span><br><span class="line">  --dataset_split_name=validation \</span><br><span class="line">  --dataset_dir=satellite/data \</span><br><span class="line">  --model_name=inception_v3</span><br></pre></td></tr></table></figure>
<h4 id="导出训练好的模型"><a href="#导出训练好的模型" class="headerlink" title="导出训练好的模型"></a>导出训练好的模型</h4><ul>
<li>在 slim/ 文件夹下面执行如下命令：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python export_inference_graph.py \</span><br><span class="line">  --alsologtostderr \</span><br><span class="line">  --model_name=inception_v3 \</span><br><span class="line">  --output_file=satellite/inception_v3_inf_graph.pb \</span><br><span class="line">  --dataset_name satellite</span><br></pre></td></tr></table></figure>
<ul>
<li>在 项目根目录 执行如下命令（需将5271改成train_dir中保存的实际的模型训练步数）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python freeze_graph.py \</span><br><span class="line">  --input_graph slim/satellite/inception_v3_inf_graph.pb \</span><br><span class="line">  --input_checkpoint slim/satellite/train_dir/model.ckpt-5271 \</span><br><span class="line">  --input_binary true \</span><br><span class="line">  --output_node_names InceptionV3/Predictions/Reshape_1 \</span><br><span class="line">  --output_graph slim/satellite/frozen_graph.pb</span><br></pre></td></tr></table></figure>
<h4 id="对单张图片进行预测"><a href="#对单张图片进行预测" class="headerlink" title="对单张图片进行预测"></a>对单张图片进行预测</h4><ul>
<li>在 项目根目录 执行如下命令</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python classify_image_inception_v3.py \</span><br><span class="line">  --model_path slim/satellite/frozen_graph.pb \</span><br><span class="line">  --label_path data_prepare/pic/label.txt \</span><br><span class="line">  --image_file test_image.jpg</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>图库爬取</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>TensorFlow</tag>
      </tags>
  </entry>
  <entry>
    <title>09Python爬取图库</title>
    <url>/2020/02/09/09Python%E7%88%AC%E5%8F%96%E5%9B%BE%E5%BA%93/</url>
    <content><![CDATA[<blockquote>
<p>摘要：昨天爬了一半出现了代理问题，今天继续解决。。。</p>
<p>ps: 今天成功爬取到图片，但是网速太慢了，爬取很耗时。</p>
</blockquote>
<a id="more"></a>
<h4 id="打开unsplash分析网页"><a href="#打开unsplash分析网页" class="headerlink" title="打开unsplash分析网页"></a>打开<a href="https://unsplash.com/" target="_blank" rel="noopener">unsplash</a>分析网页</h4><p><img src="/2020/02/09/09Python爬取图库/1.png" alt="image-20200209182714684"></p>
<p>可以看到这个网页属于动态网页，鼠标向下滑动图片是一组一组出来的，接下来就可以分析网页了</p>
<h4 id="分析网页代码"><a href="#分析网页代码" class="headerlink" title="分析网页代码"></a>分析网页代码</h4><p>F12打开开发者工具，点选一张图片，查看它的代码</p>
<p><img src="/2020/02/09/09Python爬取图库/2.png" alt="image-20200209183627772"></p>
<p>可以看到，图片 img 在一个 <code>div</code> 的 tag 里面，而且<code>class = “IEpfq”</code>，再看其他的图片发现都是一个样子的，那就可以用代码寻找网页里面IEpfq属性的div，然后进行下载。可以开始写代码了</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">img_class = soup.find_all(<span class="string">'div'</span>, &#123;<span class="string">"class"</span>: <span class="string">"IEpfq"</span>&#125;)        <span class="comment">#找到div里面有class ="IEpfq"的内容</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> img_list <span class="keyword">in</span> img_class:</span><br><span class="line">    imgs = img_list.find_all(<span class="string">'img'</span>)                         <span class="comment">#接着往下找到 img 标签</span></span><br><span class="line">    <span class="keyword">for</span> img <span class="keyword">in</span> imgs:</span><br><span class="line">        src = img[<span class="string">'src'</span>]                                    <span class="comment">#以"src"为 key，找到 value</span></span><br><span class="line">        r = requests.get(src, stream=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><center>部分代码</center><br>这个是最简单的图片爬取，只适用于测试，而且很容易被网站的反爬虫拦截。</p>
<h4 id="自动翻页-amp-分类爬取"><a href="#自动翻页-amp-分类爬取" class="headerlink" title="自动翻页 &amp; 分类爬取"></a>自动翻页 &amp; 分类爬取</h4><p>下午我使用了另一种方法爬取网站，从Unsplash的主页上可以看到，网站把图片按类别分类好了已经，有壁纸，纹理图案，自然，建筑，动物等等，这样爬取下来的图片很容易自动分类保存。</p>
<p>打开可以看到分类里面同样使用动态加载的方式加载图片。</p>
<p><img src="/2020/02/09/09Python爬取图库/3.png" alt="image-20200209185757841"></p>
<p>多组图片URL：</p>
<p><a href="https://unsplash.com/napi/collections/3330445/photos?page=8&amp;per_page=10&amp;order_by=latest" target="_blank" rel="noopener">https://unsplash.com/napi/collections/3330445/photos?page=8&amp;per_page=10&amp;order_by=latest</a></p>
<p><a href="https://unsplash.com/napi/collections/3330445/photos?page=9&amp;per_page=10&amp;order_by=latest" target="_blank" rel="noopener">https://unsplash.com/napi/collections/3330445/photos?page=9&amp;per_page=10&amp;order_by=latest</a></p>
<p><a href="https://unsplash.com/napi/collections/3330445/photos?page=10&amp;per_page=10&amp;order_by=latest" target="_blank" rel="noopener">https://unsplash.com/napi/collections/3330445/photos?page=10&amp;per_page=10&amp;order_by=latest</a></p>
<p>可以看到动态加载是固定格式的，而且每一页包含10张图片，page=x ，这个x是递增的。</p>
<p>这样就可以通过改变page的值来模拟页面滑动，再通过下载URL进行下载。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">key = <span class="string">'\"download\":\"https://unsplash.com/photo/(.*?)/download\" '</span>       <span class="comment"># 下载图片的URL</span></span><br><span class="line">img_id = re.findall(key,r.text,re.S)                                      <span class="comment"># 提取图片的固定ID</span></span><br><span class="line">images = requests.get(<span class="string">'https://unsplash.com/photos/'</span>+img_id+<span class="string">'/download'</span>)  <span class="comment"># 获取图片数据</span></span><br></pre></td></tr></table></figure>
<p><center>部分代码</center><br>这样就很方便的爬取各类图片了，接下来就是考验网速的时候了。。。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>图库爬取</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>08Python爬虫</title>
    <url>/2020/02/08/08Python%E7%88%AC%E8%99%AB/</url>
    <content><![CDATA[<blockquote>
<p>摘要：选取的图库是外国著名图片网站Unsplash，Unsplash的图质量一直很高，而且基于“CC0协议”，用户可以免费使用网站上的图片用于个人或商用。</p>
<p>Unsplash：<a href="https://unsplash.com/" target="_blank" rel="noopener">https://unsplash.com/</a></p>
</blockquote>
<a id="more"></a>
<p>努力整了一天的爬虫代码，分析页面数据，结果死在了用户代理上，无论怎么添加代理都报同样的错误。</p>
<p>卒。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>图库爬取</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>07完善图案定制功能</title>
    <url>/2020/02/07/07%E5%AE%8C%E5%96%84%E5%9B%BE%E6%A1%88%E5%AE%9A%E5%88%B6%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<blockquote>
<p>摘要：前端功能部分主要是JavaScript来完成交互，其实还需要用到svg的相关知识。之后再补吧，先用JavaScript来完成交互。</p>
</blockquote>
<a id="more"></a>
<p><img src="/2020/02/07/07完善图案定制功能/1.png" alt="image-20200207175718192"></p>
<center>操作界面</center>

<p><img src="/2020/02/07/07完善图案定制功能/2.png" alt="image-20200207180004284"></p>
<center>预览效果</center>



<p>为了界面效果调试了一天，都是些细节性的问题，就不记录了。</p>
<p>中期检查的时候建民老师说要加上大数据相关的技术，所以明天准备爬取图片加到图库里面，然后实现自动为图片加标签的功能。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
      </tags>
  </entry>
  <entry>
    <title>06JavaScript基础学习2</title>
    <url>/2020/02/06/06JavaScript%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A02/</url>
    <content><![CDATA[<blockquote>
<p>摘要：JavaScript进阶，JavaScript函数……</p>
</blockquote>
<a id="more"></a>
<h4 id="两种函数定义方式"><a href="#两种函数定义方式" class="headerlink" title="两种函数定义方式"></a>两种函数定义方式</h4><p><strong>1.</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">参数</span>) </span>&#123;</span><br><span class="line">    ……</span><br><span class="line">    函数体</span><br><span class="line">    ……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <strong>2.</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = <span class="function"><span class="keyword">function</span> (<span class="params">参数</span>) </span>&#123;</span><br><span class="line">    ……</span><br><span class="line">    函数体</span><br><span class="line">    ……</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>第二种方法没有函数名，只是把函数的结果赋值给变量。</p>
<p>注意第二种结束时要加上<code>;</code>表示结束。</p>
<h4 id="关于argument"><a href="#关于argument" class="headerlink" title="关于argument"></a>关于argument</h4><p>以前没有学习JavaScript的时候，读代码始终搞不清楚argument是怎么来的，这次借机会记录一下。</p>
<p>argument属于函数体自带的关键字，它永远指向当前函数的调用者传入的所有参数。注意是 “所有” 参数。所以可以使用argument来判断传入的参数个数，获取参数的值，遍历参数等等。</p>
<h4 id="注意JavaScript的行末自动添加-机制"><a href="#注意JavaScript的行末自动添加-机制" class="headerlink" title="注意JavaScript的行末自动添加;机制"></a>注意JavaScript的行末自动添加<code>;</code>机制</h4><p>这就造成有些语句无法分两行书写，如果为了美观想要分两行书写，只能使用<code>{……}</code>语句块。如<code>return x</code>分两行就会变成：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span>;</span><br><span class="line">        x;</span><br></pre></td></tr></table></figure>
<p>返回结果为 undefined</p>
<h4 id="函数体内变量提升"><a href="#函数体内变量提升" class="headerlink" title="函数体内变量提升"></a>函数体内变量提升</h4><p>JavaScript函数在解释过程中会先扫描一遍变量，并将变量名“提升”到函数顶部，但是不提升其赋值，所以调用之后声明的变量不会报错，但是无法使用变量的值。</p>
<h4 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h4><ol>
<li><p>JavaScript里面的全局变量被绑定到window的一个属性，所以调用全局变量时也可以用<code>window.变量名</code>的方式调用。</p>
</li>
<li><p>不同的JavaScript文件如果都使用相同的全局变量<code>window</code>，那么会造成冲突，所以我们写JavaScript文件的使用要是用自己的全局变量命名空间</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> APP = &#123;&#125;;</span><br><span class="line">APP.a = <span class="number">1</span>;</span><br><span class="line">APP.b = <span class="string">'b'</span>;</span><br></pre></td></tr></table></figure>
<p>把自己的代码放到唯一的名字空间<code>APP</code>中，可以减少冲突的发生。</p>
</li>
</ol>
<h4 id="var，let-和-const"><a href="#var，let-和-const" class="headerlink" title="var，let 和 const"></a>var，let 和 const</h4><ol>
<li>let/const定义的变量不会出现变量提升，而var定义的变量会提升。</li>
<li>let可以用于声明块变量，如只在for循环内部使用的变量；而var在for循环内声明的变量在函数内部也可以使用。</li>
<li>相同作用域中，let和const不能出现重复声明，而var可以。</li>
<li>const声明变量时必须设置初始值。</li>
<li>const声明一个只读的常量，这个常量不可改变。</li>
<li>JS中，复杂数据类型，存储在栈中的是堆内存的地址，存在栈中的这个地址是不变的，但是存在堆中的值是可以变得。</li>
</ol>
<h4 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h4><p>解构赋值，可以同时对一组变量进行赋值（从ES6开始）。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> [x, y] = [<span class="string">'Hello'</span>, <span class="string">'World'</span>];</span><br></pre></td></tr></table></figure>
<p>从一个对象中取出若干属性，也可以使用解构赋值</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    age: <span class="number">20</span>,</span><br><span class="line">    gender: <span class="string">'male'</span>,</span><br><span class="line">    passport: <span class="string">'G-12345678'</span>,</span><br><span class="line">    school: <span class="string">'No.4 middle school'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> &#123;name, age, passport&#125; = person;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>使用场景</p>
<ul>
<li><p>交换赋值</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x=<span class="number">1</span>, y=<span class="number">2</span>;</span><br><span class="line">[x, y] = [y, x]</span><br></pre></td></tr></table></figure>
</li>
<li><p>快速获取当前页面的域名和路径</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123;<span class="attr">hostname</span>:domain, <span class="attr">pathname</span>:path&#125; = location;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果一个函数接收一个对象作为参数，那么，可以使用解构直接把对象的属性绑定到变量中</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildDate</span>(<span class="params">&#123;year, month, day, hour=<span class="number">0</span>, minute=<span class="number">0</span>, second=<span class="number">0</span>&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(year + <span class="string">'-'</span> + month + <span class="string">'-'</span> + day + <span class="string">' '</span> + hour + <span class="string">':'</span> + minute + <span class="string">':'</span> + second);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样可以方便很多，传入对象时候只需要<code>year</code>、<code>month</code>和<code>day</code>这三个属性就可以。</p>
</li>
</ul>
</li>
</ul>
<p>使用解构赋值可以大大减少代码量，但是，需要浏览器支持ES6解构赋值特性。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>JavaScript学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>05JavaScript基础学习</title>
    <url>/2020/02/05/05JavaScript%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<blockquote>
<p>摘要：JavaScript，1995年由Brendan Eich设计产生，仅用时10天，网景公司想借Java的名气火一把，取名JavaScript ……</p>
</blockquote>
<a id="more"></a>
<h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ol>
<li>变量本质是一个盒子，盒子里面记载着对象的内存地址，变量的意义就是方便我们去操作对象。</li>
</ol>
<ul>
<li>变量命名规范：<ul>
<li>可以由字母(<code>a-zA-Z</code>)，数字(<code>0-9</code>)，下划线(<code>_</code>)以及美元符号(<code>$</code>)组成</li>
<li>不能由数字开头</li>
<li>命名尽量用英文并且具有一定的含义</li>
<li>如果有多个英文单词, 后面单词的首字母大写</li>
<li>不能使用关键字</li>
<li>首字母不要大写，大写是有特殊含义的</li>
</ul>
</li>
</ul>
<ol start="2">
<li>JavaScript的数据类型<ul>
<li>字符串(<code>String</code>)：比如”Hello World”；</li>
<li>数字(<code>Number</code>)：整数和浮点数；</li>
<li>布尔(<code>Boolean</code>)：true 和 false；</li>
<li><code>Null</code>: 表示空缺，即此处应该有一个值，但目前为空；</li>
<li><code>Undefined</code>: 表示未定义或不存在，即此处目前没有任何值；</li>
<li><code>Symbol</code>：Symbol 是 ES6 引入了一种新的原始数据类型，表示独一无二的值；</li>
<li>对象（<code>object</code>）：各种值组成的集合。</li>
<li>数组（<code>array</code>）：数组类型</li>
<li>函数（<code>function</code>）：函数数据类型</li>
</ul>
</li>
</ol>
<h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><ol>
<li>JavaScript严格区分大小写。</li>
<li>JavaScript不区分整数和浮点数，统一用Number表示，以下表示都合法：</li>
</ol>
<blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; 123; // 整数123</span><br><span class="line">&gt; 0.456; // 浮点数0.456</span><br><span class="line">&gt; 1.2345e3; // 科学计数法表示1.2345x1000，等同于1234.5</span><br><span class="line">&gt; -99; // 负数</span><br><span class="line">&gt; NaN; // NaN表示Not a Number，当无法计算结果时用NaN表示</span><br><span class="line">&gt; Infinity; // Infinity表示无限大，当数值超过了JavaScript的Number所能表示的最大值时，就表示为Infinity</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<ol start="3">
<li><p>关于相等运算符<code>==</code>。JavaScript在设计时，有两种比较运算符：</p>
<ul>
<li><p>第一种是<code>==</code>比较，它会自动转换数据类型再比较，很多时候，会得到非常诡异的结果；</p>
</li>
<li><p>第二种是<code>===</code>比较，它不会自动转换数据类型，如果数据类型不一致，返回<code>false</code>，如果一致，再比较。</p>
</li>
</ul>
<p>所以在进行比较的时候不要使用<code>==</code>比较，始终坚持使用<code>===</code>比较。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>毕业设计</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
        <tag>JavaScript学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>04服务端功能完成总结</title>
    <url>/2020/02/04/04%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%88%90%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<blockquote>
<p>摘要：这几天学习Django框架主要用于完成后台管理功能，因为后台比较简单，就是普通网上商城管理员对用户，商品以及订单的管理，所以边学边做，基本把后台管理的功能完成了，接下来一段时间主要做前台用户的功能和图案定制的核心功能。</p>
</blockquote>
<a id="more"></a>
<p><img src="/2020/02/04/04服务端功能完成总结/1.png" alt></p>
<p>这两天通过Django的学习简单实现了后台的功能，虽然做出来的demo比较简单，但是对Django的掌握确实提高了不少，现在把这中间遇到的问题总结一下：</p>
<h4 id="1-使用Django实现上传图片"><a href="#1-使用Django实现上传图片" class="headerlink" title="1. 使用Django实现上传图片"></a>1. 使用Django实现上传图片</h4><ul>
<li><p>首先在项目中创建一个app。例如 python manage.py startapp app1，然后将其加入到settings.py文件中。</p>
<p>  INSTALLED_APPS = [</p>
<pre><code>&apos;django.contrib.admin&apos;,
&apos;django.contrib.auth&apos;,
&apos;django.contrib.contenttypes&apos;,
&apos;django.contrib.sessions&apos;,
&apos;django.contrib.messages&apos;,
&apos;django.contrib.staticfiles&apos;,
&apos;app1&apos;,
</code></pre><p>  ] </p>
</li>
</ul>
<ul>
<li>然后再数据库中建立保存图片的表。</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IMG</span> <span class="params">( models.Model )</span> :</span></span><br><span class="line">  img = models.ImageField ( upload_to = <span class="string">'img'</span> )</span><br><span class="line">  name = models.CharField ( max_length = <span class="number">20</span> )</span><br></pre></td></tr></table></figure>
<p>代码中的upload_to指的是图片存储的文件夹名称，上传图片之后会自动创建。</p>
<ul>
<li>修改settings.py文件</li>
</ul>
<p>在settings.py文件后面加上两行代码：</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line">#设置静态文件路径为主目录下的media文件夹</span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, 'media').replace('\\', '/')    </span><br><span class="line">#url映射</span><br><span class="line">MEDIA_URL = '/media/'</span><br></pre></td></tr></table></figure>
<ul>
<li>创建模板</li>
</ul>
<p>在templates文件下创建一个文件（最好是我们的app的名字，以此来把页面按app分开），比如叫app1，然后在app1文件下创建uploading.html页面：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">        &#123;% csrf_token %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"img"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>上传<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以及用于图片展示的showing.html页面：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    &#123;% for img in imgs %&#125;</span><br><span class="line">         <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; img.img.url &#125;&#125;"</span> /&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>创建视图函数</li>
</ul>
<p>view.py：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> app1.models <span class="keyword">import</span> IMG</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">uploadImg</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    图片上传</span></span><br><span class="line"><span class="string">    :param request: </span></span><br><span class="line"><span class="string">    :return: </span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        new_img = IMG(</span><br><span class="line">            img=request.FILES.get(<span class="string">'img'</span>),</span><br><span class="line">            name = request.FILES.get(<span class="string">'img'</span>).name</span><br><span class="line">        )</span><br><span class="line">        new_img.save()</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'app1/uploading.html'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">showImg</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    图片显示</span></span><br><span class="line"><span class="string">    :param request: </span></span><br><span class="line"><span class="string">    :return: </span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    imgs = IMG.objects.all()</span><br><span class="line">    content = &#123;</span><br><span class="line">        <span class="string">'imgs'</span>:imgs,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> imgs:</span><br><span class="line">        <span class="keyword">print</span> (i.img.url)</span><br><span class="line">    <span class="keyword">return</span> render(request,<span class="string">'app1/showing.html'</span>,content)</span><br></pre></td></tr></table></figure>
<ul>
<li>配置urls.py</li>
</ul>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml">urlpatterns = [</span></span><br><span class="line"><span class="xml">    path('admin/', admin.site.urls),</span></span><br><span class="line"><span class="xml">    url(r'^upload', views.uploadImg),</span></span><br><span class="line"><span class="xml">    url(r'^show', views.showImg),</span></span><br><span class="line"><span class="xml">] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span></span><br></pre></td></tr></table></figure>
<h4 id="2-Django表单的一些注意点"><a href="#2-Django表单的一些注意点" class="headerlink" title="2.Django表单的一些注意点"></a>2.Django表单的一些注意点</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/search-post"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span>        </span><br><span class="line">    &#123;% csrf_token %&#125;        </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>form表单后面有一个csrf_token的标签。csrf 全称是 Cross Site Request Forgery。这是Django提供的防止伪装提交请求的功能。POST 方法提交的表格，必须有此标签。</p>
<h4 id="3-模板继承"><a href="#3-模板继承" class="headerlink" title="3.模板继承"></a>3.模板继承</h4><p>Django提供了特别好的HTML继承功能，在HTML中看到block和endblock标签，表示标签内部的内容可以供其他模板重载，只需要在其他模板中加入extends标签即可，如：</p>
<p>example.html</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;示例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Hello World!&lt;/h1&gt;</span><br><span class="line">    &#123;% block mainbody %&#125;</span><br><span class="line">       &lt;p&gt;23333&lt;/p&gt;</span><br><span class="line">    &#123;% endblock %&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>helloworld.html：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;%extends &quot;example.html&quot; %&#125;</span><br><span class="line"> </span><br><span class="line">&#123;% block mainbody %&#125;</span><br><span class="line">&lt;p&gt;此部分继承了 example.html 文件&lt;/p&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<p>打开helloworld.html文件即可看到example.html里面block标签内的内容被替换：</p>
<p><img src="/2020/02/04/04服务端功能完成总结/2.png" alt></p>
<p>这些是学习过程中特别注意到的一些点和遇到的几个问题，特别感谢<a href="https://www.runoob.com/" target="_blank" rel="noopener">菜鸟教程</a>，在上面学到了很多东西，明天开始做核心功能，主要是和用户交互部分和核心算法，接下来会主要学习一下JavaScript和Python。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
      </tags>
  </entry>
  <entry>
    <title>03Django框架学习</title>
    <url>/2020/02/03/03Django%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<blockquote>
<p>摘要：Django框架是一个比较大型的框架，相较于flask等等。也正是因为Django的体量比较大，做很多功能有现成的方案，实现起来比较简单和方便，所以我在毕设当中采用了Django框架。</p>
</blockquote>
<a id="more"></a>
<p>在学校的时候虽然用Django框架做出来一部分功能和界面，但是我对于Django的理解还很停留在表面，想做出许多功能但是不知道在Django中如何进行操作。所以趁着假期对Django框架和Python语言进行一下深入的学习，这次的课程实在<a href="https://www.bilibili.com/" target="_blank" rel="noopener">哔哩哔哩</a>上找的<a href="https://www.bilibili.com/video/av45473851" target="_blank" rel="noopener">Django2.1框架教学</a>，虽然教学是关于Django框架的，但是还是学到了很多加深对软件开发理解性的东西，比如网站的层次概念，Django框架的MVT概念等等。</p>
<p><img src="/2020/02/03/03Django框架学习/1.png" alt="前后端分离网站层次图" title="前后端分离网站层次图"></p>
<p><img src="/2020/02/03/03Django框架学习/2.png" alt title="MVT框架"></p>
<p>Django通过MVT框架对前后端进行管理，即：</p>
<ul>
<li><p>Model（模型）用于和数据库进行交互</p>
</li>
<li><p>View（视图）用于接收请求，进行处理，与M和T进行交互，返回应答</p>
</li>
<li><p>Template（模板）用于产生HTML页面</p>
</li>
</ul>
<p>这样用户使用起来就方便了很多，对数据的管理交给框架就可以了，我们开发时候可以专注于功能，框架的方便性就体现了出来。</p>
<p>写的有些少，但是学到了很多，还是要多动手练习。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
      </tags>
  </entry>
  <entry>
    <title>02重新设计数据库</title>
    <url>/2020/02/02/02%E9%87%8D%E6%96%B0%E8%AE%BE%E8%AE%A1%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<blockquote>
<p>摘要：今天根着网上的一个实战项目类比发现我之前做的一些东西还不够完善，底层数据库的设计也很简单，只能是把简单的业务功能实现了，远远没有达到实际中的项目需要，尤其是管理员界面，离实际使用还有很大距离。</p>
</blockquote>
<a id="more"></a>
<p>管理界面在学习阶段是我们自己经常用的，我们作为研发人员知道自己想要什么，怎么使用。但是实际交付工作，管理端往往是交付给完全没有软件设计经验的管理人员使用，他们也需要像普通用户一样简单易懂的管理界面。因此要把后台也是值得更加精细化，便于管理员使用。</p>
<p><img src="/2020/02/02/02重新设计数据库/1.png" alt></p>
<p>这是我的网站首页，现在这个网站的轮播图只能通过修改代码和后台图片实现。通过网上学习项目，我第一次接触到后台管理可通过上传图片，指定某张具体的图片进行管理首页，当然也包括后面的销量图，活动图等等，这就需要管理端的数据库更加精细化，设计更多的表对需要指定的内容进行一一对应。所以我今天对照视频把自己的数据库进行了重新设计。加入了之前没有的对前端页面显示的管理，又增加了对产品的一些细节化管理，比如详情图片管理，简介管理等等。</p>
<p>之前对于管理端的理解比较简单，今天对管理端又有了重新的认识，管理端也是普通用户的一端，所有用户接触到的一端都应该设计的简单，方便，易用，易于理解。</p>
]]></content>
      <categories>
        <category>毕业设计</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
      </tags>
  </entry>
  <entry>
    <title>01毕设学习进度记录</title>
    <url>/2020/02/01/01%E6%AF%95%E8%AE%BE%E5%AD%A6%E4%B9%A0%E8%BF%9B%E5%BA%A6%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<blockquote>
<p>摘要：寒假期间毕业设计进度记录。主要用于督促自己毕业设计的进度，也是对自己这个过程的一个记录，方便以后回顾。</p>
</blockquote>
<a id="more"></a>  
<p>寒假前几天学习了近一个星期Django框架，过年几天没有学习。</p>
<p>今天是年后第一天开始做毕设，Django框架学习起来比较简单，虽然Django框架很大，学习周期比较长，但是借助于Django模板的方便性，学习起来还是很快，尤其是连接数据库的简单让我很惊讶，从Java到Python再到Django，连接数据库越来越趋于简单，可能以后的编程会越来越趋于 “拼接” 这种方向。</p>
<p>接下来几天的计划都是对Django框架的学习，以及对毕设项目的完善，下面简单描述一下毕设项目。</p>
<hr>
<h3 id="毕设项目介绍"><a href="#毕设项目介绍" class="headerlink" title="毕设项目介绍"></a>毕设项目介绍</h3><p>项目名称：<strong>文化衫定制平台的设计与实现</strong></p>
<ol>
<li><p>设计要求</p>
<p>文化衫定制平台的设计与实现要求学生独立设计文化衫交流社区，基于在线交互模式实现文化衫个性化定制、发布、销售、交流和推荐等功能。</p>
<p>(1)系统要求开发工具采用 Pycharm + Android SDK + MySQL + Tomcat等。</p>
<p>(2)要求系统界面设计美观，交互友好，操作方便。</p>
</li>
<li><p>设计内容</p>
<p>文化衫定制平台的角色包括平台管理员、制造销售商、设计师和会员用户等，系统分别为管理员、制造销售商、设计师和会员提供如下功能：</p>
<p>(1)管理员、销售制造商、设计师和会员的信息管理功能。</p>
<p>(2)基于交互模式的文化衫图案在线设计功能，并提供侵权举报功能。</p>
<p>(3)提供文化衫定制、销售功能，并基于文化衫销售数据提供数据分析与定价推荐功能。</p>
<p>(4)提供制造销售商、设计师和会员用户的积分预等级管理功能。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>毕业设计</category>
      </categories>
      <tags>
        <tag>毕业设计</tag>
      </tags>
  </entry>
  <entry>
    <title>欢 迎</title>
    <url>/2019/04/14/hello-world/</url>
    <content><![CDATA[<center>print(“Hello World”)</center><br><center>欢迎，这是我的第一篇博客！</center>
]]></content>
  </entry>
</search>
