<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>白茶清欢</title>
  
  <subtitle>像三月的风扑击明亮的草垛，春天在每个夜晚数她的花朵</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-03-12T12:30:16.174Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>陈剑</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>39面试总结</title>
    <link href="http://yoursite.com/2020/03/10/39%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2020/03/10/39%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/</id>
    <published>2020-03-10T11:30:20.000Z</published>
    <updated>2020-03-12T12:30:16.174Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：面试之前紧张得要死，准备了好多相关方面的问题，结果都没用到。。</p></blockquote><a id="more"></a><p>​        今天面试了石家庄一家公司的web前端工程师，因为之前一面的时候告诉我二面是技术面试，所以我还特意准备了一下，网上找了好多前端的面试题，HTML5的新特性，CSS3如何实现一些界面效果，jQuery相关知识点，Ajax的原理以及jsonp等等等等，因为是校招嘛，还准备了之前学的课程的一些技术点特地复习了一些，线程进程，数据库三大范式之类的。结果面试当天，包括人事在内的总共四位公司领导面试，一句专业性的技术问题都没有问，都是一些简历上的东西让描述一下，感觉一腔热血付诸东流😂。</p><p>​        可能之前没有接触过面试，上个学期一直在准备考研，没有实际去了解这些东西，对于校招不是很了解，可能因为是校招，也可能因为公司不是互联网相关的，对于技术方面不像专业互联网公司那样去考核。但是我内心还是很向往互联网公司的，包括工作方式，工作内容等等，所以还是准备学学Java基础或者Python基础，去找找真正的互联网公司应聘一下，接下来几天边做毕设边准备学习一下吧。</p><p>继续加油😠</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：面试之前紧张得要死，准备了好多相关方面的问题，结果都没用到。。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="web前端面试" scheme="http://yoursite.com/categories/web%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/"/>
    
      <category term="总结" scheme="http://yoursite.com/categories/web%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="面试" scheme="http://yoursite.com/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>38HTML基本知识</title>
    <link href="http://yoursite.com/2020/03/09/38HTML%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/"/>
    <id>http://yoursite.com/2020/03/09/38HTML%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/</id>
    <published>2020-03-09T12:04:54.000Z</published>
    <updated>2020-03-12T11:28:57.560Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：web前端面试HTML篇。</p></blockquote><a id="more"></a><ol><li>你是如何理解HTML语义化的？</li></ol><ul><li>比较简单的回答：我理解的语义化就是 标签用在合适的位置，比如段落要用<code>p</code>标签，标题要用<code>h1-h6</code>标签.</li><li>更细点的回答：我理解的HTML语义化是正确的标签做正确的事情，能够便于开发者阅读和写出更优雅的代码的同时，让网络爬虫更好的解析。</li></ul><ol start="2"><li>为什么要做到语义化？</li></ol><ul><li>有利于SEO，有利于搜索引擎爬虫更好的解析我们的页面，从而获取更多的有效信息，提升网页的权重。</li><li>在没有CSS的时候，能够清晰看出网页的结构，增强可读性。</li><li>便于团队合作开发和维护，提高开发效率</li></ul><ol start="3"><li><p>\&lt;!DOCTYPE> 文档声明，它不是HTML标签，是一个指示web浏览关于页面使用哪个HTML版本编写的指令。&lt;!DOCTYPE&gt; 声明必须位于文档的第一行，位于<html>标签之前。</html></p></li><li><p>\&lt;html lang=’en’>lang属性设定文档语言。</p><p>作用：SEO搜索引擎优化;有助于阅读障碍人士，通过读屏器阅读页面，还可以是\&lt;html lang=’zh-CN’></p></li><li><p>meta标签的几种用法。</p></li></ol><ul><li>meta指定文档编码</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这行代码的意思是，文档用UTF-8编码的，浏览器解析的时候用UTF-8编码解析。</span></span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br></pre></td></tr></table></figure><ul><li>适配移动页面</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span>  <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0"</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>添加页面描述</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"腾讯网(www.qq.com)是中国最浏览量最大的门户网站"</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="6"><li>HTML5标签。</li></ol><blockquote><p>内容性的标签:</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span>          网页的头部</span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span>                网页的导航</span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span>          标签定义文档中的节(比如章节、页眉、页脚或文档中的其他部分。)</span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span>            标签的内容独立于文档的其余部分。比如外部的一篇文章，一个博客，论文等。</span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span>              网页侧边栏</span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span>            网页的页脚</span><br></pre></td></tr></table></figure><blockquote><p>功能性的标签</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span>&gt;</span>  通过脚本绘制图像</span><br><span class="line"><span class="tag">&lt;<span class="name">Audio</span>&gt;</span>    播放音频</span><br><span class="line"><span class="tag">&lt;<span class="name">Video</span>&gt;</span>    播放视频</span><br></pre></td></tr></table></figure><ol start="7"><li>什么是H5？<br> H5是中国人制造的一个专有名词。实际上是指移动端页面，从某种意义上来说它是 HTML5，微信网页，移动PPT的母级。</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：web前端面试HTML篇。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="web前端面试" scheme="http://yoursite.com/categories/web%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/"/>
    
      <category term="HTML" scheme="http://yoursite.com/categories/web%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/HTML/"/>
    
    
      <category term="HTML" scheme="http://yoursite.com/tags/HTML/"/>
    
  </entry>
  
  <entry>
    <title>37jQuery基本知识</title>
    <link href="http://yoursite.com/2020/03/08/37jQuery%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/"/>
    <id>http://yoursite.com/2020/03/08/37jQuery%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/</id>
    <published>2020-03-08T11:05:17.000Z</published>
    <updated>2020-03-08T11:07:12.342Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>web前端面试jQuery篇。</p></blockquote><a id="more"></a><h4 id="jQuery库中的-是什么："><a href="#jQuery库中的-是什么：" class="headerlink" title="jQuery库中的$()是什么："></a>jQuery库中的$()是什么：</h4><p>$()时jQuery()函数的别称，$()函数可以把任何对象包裹成jQuery对象，然后就可以调用定义在jQuery对象上的多个不同方法。还可以把选择器字符串传入$()函数，它会返回一个匹配所有DOM元素数组的jQuery对象。</p><h4 id="如何用jQuery选择网页上的5个-lt-div-元素"><a href="#如何用jQuery选择网页上的5个-lt-div-元素" class="headerlink" title="如何用jQuery选择网页上的5个\&lt;div>元素"></a>如何用jQuery选择网页上的5个\&lt;div>元素</h4><p>如果网页上只有5个\&lt;div>的话，可以直接使用标签选择器进行选择，$(“div”)</p><p>如果网页上的\&lt;div>超过5个的话，使用ID选择器或者class选择器进行选择。</p><h4 id="jQuery里的ID选择器和class选择器有什么不同"><a href="#jQuery里的ID选择器和class选择器有什么不同" class="headerlink" title="jQuery里的ID选择器和class选择器有什么不同"></a>jQuery里的ID选择器和class选择器有什么不同</h4><p>ID选择器：$(‘#id_name’)</p><p>class选择器：$(‘.class_name’)</p><h4 id="点击一个按钮时使用jQuery隐藏一个图片"><a href="#点击一个按钮时使用jQuery隐藏一个图片" class="headerlink" title="点击一个按钮时使用jQuery隐藏一个图片"></a>点击一个按钮时使用jQuery隐藏一个图片</h4><p>使用ID或者class定位到图片，然后使用hide()方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#button'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">$(<span class="string">'iamge'</span>).hide();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="document-ready-是个什么函数？为什么要用它？"><a href="#document-ready-是个什么函数？为什么要用它？" class="headerlink" title="$(document).ready() 是个什么函数？为什么要用它？"></a>$(document).ready() 是个什么函数？为什么要用它？</h4><p>ready() 函数用于在文档进入ready状态时执行代码。当DOM 完全加载（例如HTML被完全解析DOM树构建完成时），jQuery允许你执行代码。使用$(document).ready()的最大好处在于它适用于所有浏览器，jQuery帮你解决了跨浏览器的难题。需要进一步了解的用户可以点击 answer链接查看详细讨论。</p><h4 id="this-和-this-关键字在-jQuery-中有何不同"><a href="#this-和-this-关键字在-jQuery-中有何不同" class="headerlink" title="$(this) 和 this 关键字在 jQuery 中有何不同"></a>$(this) 和 this 关键字在 jQuery 中有何不同</h4><p>$(this) 返回一个 jQuery 对象，你可以对它调用多个 jQuery 方法，比如用 text() 获取文本，用val() 获取值等等。而 this 代表当前元素，它是 JavaScript 关键词中的一个，表示上下文中的当前 DOM 元素。你不能对它调用 jQuery 方法，直到它被 $() 函数包裹，例如 $(this)。</p><h4 id="使用jQuery来提取一个HTML-标记的属性-例如-链接的href"><a href="#使用jQuery来提取一个HTML-标记的属性-例如-链接的href" class="headerlink" title="使用jQuery来提取一个HTML 标记的属性 例如. 链接的href"></a>使用jQuery来提取一个HTML 标记的属性 例如. 链接的href</h4><p>attr() 方法被用来提取任意一个HTML元素的一个属性的值. 你首先需要利用jQuery选择及选取到所有的链接或者一个特定的链接，然后你可以应用attr()方法来获得他们的href属性的值。下面的代码会找到页面中所有的链接并返回href值：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;a&apos;).each(function()&#123;</span><br><span class="line">   alert($(this).attr(&apos;href&apos;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="jquery中attr和prop的区别"><a href="#jquery中attr和prop的区别" class="headerlink" title="jquery中attr和prop的区别"></a>jquery中attr和prop的区别</h4><p> 对于html元素本身就带有的固定属性（本身就带有的属性），在处理时，使用prop方法 可以操作布尔类型的属性</p><p>对于html元素我们自己定义的dom属性，在处理时，使用attr方法  不可以操作布尔类型的属性</p><h4 id="jQuery中-detach-和-remove-方法的区别是什么"><a href="#jQuery中-detach-和-remove-方法的区别是什么" class="headerlink" title="jQuery中 detach() 和 remove() 方法的区别是什么"></a>jQuery中 detach() 和 remove() 方法的区别是什么</h4><p>detach() 和 remove() 方法都被用来移除一个DOM元素, 两者之间的主要不同在于 detach() 会保持对过去被解除元素的跟踪, 因此它可以被取消解除, 而 remove() 方法则会保持过去被移除对象的引用。</p><h4 id="利用jQuery来向一个元素中添加和移除CSS类"><a href="#利用jQuery来向一个元素中添加和移除CSS类" class="headerlink" title="利用jQuery来向一个元素中添加和移除CSS类"></a>利用jQuery来向一个元素中添加和移除CSS类</h4><p> .addClass(“类名”)添加元素   .removeClass() 删除样式类  </p><h4 id="使用-CDN-加载-jQuery-库的主要优势"><a href="#使用-CDN-加载-jQuery-库的主要优势" class="headerlink" title="使用 CDN 加载 jQuery 库的主要优势"></a>使用 CDN 加载 jQuery 库的主要优势</h4><p>除了报错节省服务器带宽以及更快的下载速度这许多的好处之外, 最重要的是，如果浏览器已经从同一个CDN下载类相同的 jQuery 版本, 那么它就不会再去下载它一次. 因此今时今日，许多公共的网站都将jQuery用于用户交互和动画, 如果浏览器已经有了下载好的jQuery库，网站就能有非常好的展示机会。</p><h4 id="jQuery-get-和-jQuery-ajax-方法之间的区别"><a href="#jQuery-get-和-jQuery-ajax-方法之间的区别" class="headerlink" title="jQuery.get() 和 jQuery.ajax() 方法之间的区别"></a>jQuery.get() 和 jQuery.ajax() 方法之间的区别</h4><p>ajax() 方法更强大，更具可配置性, 让你可以指定等待多久，以及如何处理错误。get() 方法是一个只获取一些数据的专门化方法。</p><h4 id="jQuery-中的方法链是什么？使用方法链有什么好处"><a href="#jQuery-中的方法链是什么？使用方法链有什么好处" class="headerlink" title="jQuery 中的方法链是什么？使用方法链有什么好处?"></a>jQuery 中的方法链是什么？使用方法链有什么好处?</h4><p>方法链是对一个方法返回的结果调用另一个方法，这使得代码简洁明了，同时由于只对 DOM 进行了一轮查找，性能方面更加出色。</p><h4 id="哪种方式更高效：document-getElementbyId-“myId”-还是-“-myId”-？"><a href="#哪种方式更高效：document-getElementbyId-“myId”-还是-“-myId”-？" class="headerlink" title="哪种方式更高效：document.getElementbyId(“myId”) 还是 $(“#myId”)？"></a>哪种方式更高效：document.getElementbyId(“myId”) 还是 $(“#myId”)？</h4><p>第一种，因为它直接调用了 JavaScript 引擎。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;web前端面试jQuery篇。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="web前端面试" scheme="http://yoursite.com/categories/web%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/"/>
    
      <category term="jQuery" scheme="http://yoursite.com/categories/web%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/jQuery/"/>
    
    
      <category term="jQuery" scheme="http://yoursite.com/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>36CSS相关知识</title>
    <link href="http://yoursite.com/2020/03/07/36CSS%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/"/>
    <id>http://yoursite.com/2020/03/07/36CSS%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/</id>
    <published>2020-03-07T13:38:35.000Z</published>
    <updated>2020-03-07T13:41:29.191Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：web前端面试CSS篇</p></blockquote><a id="more"></a><ol><li><h5 id="CSS-盒子模型，绝对定位和相对定位"><a href="#CSS-盒子模型，绝对定位和相对定位" class="headerlink" title="CSS 盒子模型，绝对定位和相对定位"></a>CSS 盒子模型，绝对定位和相对定位</h5><p><strong>盒子模型</strong>也叫框模型，它规定了元素框处理元素内容、内边距、边框 和 外边距 的方式。在HTML文档中，每个元素都有盒子模型。</p><p>CSS盒子模型包含了内容（content）、内边距（padding）、边框（border）、外边距（margin）、宽度（width）、高度（height）几个要素，如图（图为标准盒子模型）</p><p><strong>绝对定位（absolute）的概念</strong>：如果设置它的偏移量，将会影响其他元素的位置。设置绝对定位时，元素会相对于离自己最近的设置了绝对定位的父元素进行定位。</p><p><strong>相对定位（relative）的概念</strong>：通过设置可使边框“相对于”它的起点移动，不影响其他元素的位置，依旧占据着原来的空间。</p></li><li><h5 id="清除浮动，什么时候需要清除浮动，清除浮动都有哪些方法"><a href="#清除浮动，什么时候需要清除浮动，清除浮动都有哪些方法" class="headerlink" title="清除浮动，什么时候需要清除浮动，清除浮动都有哪些方法"></a>清除浮动，什么时候需要清除浮动，清除浮动都有哪些方法</h5><p>浮动float最开始出现的意义是为了让文字环绕图片而已，后来用于让三个块级元素并排展示，这时候就出现了浮动</p><p>不过，由于float会导致浮动元素的父元素高度坍塌，所以，这时候就要去清除浮动。</p><p><strong>清除浮动的方式：</strong><br>解决这种问题的方式主要有两种：</p><ol><li><p>在父元素内添加冗余元素clear:both;</p><p>Clear属性存在的值有left,right,both,none,inherit.<br>如果是left,则表示在左侧不允许出现浮动元素，意思就是对父元素中左边的子元素起作用。</p></li><li><p>在父元素中设置属性overflow:hidden||auto</p><p>增加后，父元素会形成一个块级格式化上下文，即BFC，overflow: hidden本意是将父元素中溢出的内容裁切掉，而BFC中，在计算父元素真实高度时候，也把float元素的高度算入其中，所以在计算裁切的同时，顺带达成了清除浮动的目的。</p><p>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然。<br>计算BFC的高度时，浮动元素也参与计算。</p></li></ol></li><li><p>如何保持浮层水平垂直居中</p><p>利用flexbox</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">　<span class="attribute">justify-content</span>:center;</span><br><span class="line">　<span class="attribute">align-items</span>:center;</span><br><span class="line">　<span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>position 和 display 的取值和各自的意思和用法</p><ul><li><p>position属性取值：static(默认)、relative、absolute、fixed、inherit。</p><ul><li>static；始终处于文档流给予的位置。看起来好像没有用，但它可以快速取消定位，让top，right，bottom，left的值失效。在切换的时候可以尝试这个方法。</li><li>除了static值，在其他三个值的设置下，z-index才会起作用。（确切地说z-index只在定位元素上有效）</li><li>relative和absolute都可以用于定位，区别在于前者的div还属于正常的文档流，后者已经是脱离了正常文档流，不占据空间位置，不会将父类撑开。定位原点relative是相对于它在正常流中的默认位置偏移，它原本占据的空间任然保留；absolute相对于第一个position属性值不为static的父类。所以设置了position：absolute，其父类的该属性值要注意，而且overflow：hidden也不能乱设置，因为不属于正常文档流，不会占据父类的高度，也就不会有滚动条。</li><li>fixed 旧版本IE不支持，定位原点相对于浏览器窗口，而且不能变。常用于header，footer，或者一些固定的悬浮div，随滚动条滚动又稳定又流畅，比JS好多了。fixed可以有很多创造性的布局和作用，兼容性是问题。</li><li>inherit。规定从父类继承position属性的值。但是任何版本的IE都不支持该属性值。</li></ul></li><li><p>display属性取值：none、inline、inline-block、block、flex、inherit。</p><ul><li>display属性规定元素应该生成的框的类型。文档内任何元素都是框，块框或行内框。</li><li>none和visiability：hidden都可以隐藏div，区别有点像absolute和relative，前者不占据文档的空间，后者还是占据文档的位置。</li><li>inline和block，又叫行内元素和块级元素。表现出来的区别就是block独占一行，在浏览器中通常垂直布局，可以用margin来控制块级元素之间的间距；而inline以水平方式布局，垂直方向的margin和padding都是无效的，大小跟内容一样，且无法设置宽高。inline就像塑料袋，内容怎么样，就长得怎么样；block就像盒子，有固定的宽和高。</li><li>inline-block就介于两者之间。</li><li>flex 意为”弹性盒布局模型”，用来为盒状模型提供最大的灵活性。任何一个容器都可以指定为flex布局。设为Flex布局以后，子元素的float、clear和vertical-align属性将失效。采用flex布局的元素，称为flex容器。它的所有子元素自动成为容器成员，称为flex项目（flex item）。</li></ul></li></ul></li><li><p>样式的层级关系，选择器优先级，样式冲突，以及抽离样式模块怎么写，说出思路，有无实践经验</p><p><strong>样式的层级关系：</strong>一个是权重，另一个就是共用样式和私用样式了，比如说两个ul，它们的子元素除了背景色之外都一样，那可以直接用li {}来定义相同的公用样式，用 .ul_1 li {} ， .ul_2 li {} 来定义不相同的样式。可以根据元素之间的差别来选择用哪种方法。推荐用多层级的方式书写css选择器。</p><p><strong>选择器优先级：</strong>（!important&gt;）id选择器&gt;class选择器（属性选择器/伪类选择器）&gt;标签选择器（伪元素选择器） 同类选择符条件下层级越多的优先级越高。优先级就近原则，同权重情况下样式定义最近者为准。载入样式以最后载入的定位为准。</p><p><strong>样式冲突：</strong>  如果同个元素有两个或以上冲突的CSS规则，浏览器有一些基本的规则来决定哪一个非常特殊而胜出。  选择器一样的情况下后面的会覆盖前面的属性。</p><p><strong>抽离样式模块：</strong>因为浏览器的兼容问题，不同浏览器对有些标签的默认值是不同的，如果没对CSS初始化往往会出现浏览器之间的页面显示差异。当然，初始化样式会对SEO有一定的影响，但鱼和熊掌不可兼得，但力求影响最小的情况下初始化。</p></li><li><p>css3动画效果属性，canvas、svg的区别，CSS3中新增伪类举例</p></li><li><p>px和em和rem的区别，CSS中link 和@import的区别是?</p></li><li><p>了解过flex吗?</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：web前端面试CSS篇&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="web前端面试" scheme="http://yoursite.com/categories/web%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/"/>
    
      <category term="CSS" scheme="http://yoursite.com/categories/web%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/CSS/"/>
    
    
      <category term="CSS" scheme="http://yoursite.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>35Python3使用支付宝接口</title>
    <link href="http://yoursite.com/2020/03/06/35Python3%E4%BD%BF%E7%94%A8%E6%94%AF%E4%BB%98%E5%AE%9D%E6%8E%A5%E5%8F%A3/"/>
    <id>http://yoursite.com/2020/03/06/35Python3%E4%BD%BF%E7%94%A8%E6%94%AF%E4%BB%98%E5%AE%9D%E6%8E%A5%E5%8F%A3/</id>
    <published>2020-03-06T12:37:37.000Z</published>
    <updated>2020-03-06T12:54:57.718Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：因为官方没有提供Python的SDK，所以我采用了github上一个开源的第三方SDK。</p></blockquote><a id="more"></a><p><strong>python-alipay-sdk:</strong> <a href="https://github.com/fzlee/alipay" target="_blank" rel="noopener">https://github.com/fzlee/alipay</a></p><p><strong>python3使用python-alipay-sdk对接支付宝的时候，可能会出现以下error</strong><br><strong>不支持RSA密钥格式</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">alipay = AliPay(</span><br><span class="line">    appid=<span class="string">"2016101900723846"</span>,</span><br><span class="line">    app_notify_url=<span class="literal">None</span>,  <span class="comment"># 默认回调url</span></span><br><span class="line">    app_private_key_string=os.path.join(settings.BASE_DIR, <span class="string">'apps/order/app_private_key.pem'</span>),</span><br><span class="line">    <span class="comment"># 支付宝的公钥，验证支付宝回传消息使用，不是你自己的公钥,</span></span><br><span class="line">    alipay_public_key_string=os.path.join(settings.BASE_DIR, <span class="string">'apps/order/alipay_public_key.pem'</span>),</span><br><span class="line">    sign_type=<span class="string">"RSA2"</span>,  <span class="comment"># RSA 或者 RSA2</span></span><br><span class="line">    debug = <span class="literal">True</span>  <span class="comment"># 默认False</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>运行时出现错误：<strong>ValueError：RSA key format is not supported</strong></p><p><strong>解决办法:<br>把公钥和私钥的内容先读出来，然后再用读出来的内容去创建Alipay对象</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app_private_key_string = open(os.path.join(settings.BASE_DIR, <span class="string">'apps/order/app_private_key.pem'</span>)).read()</span><br><span class="line">alipay_public_key_string = open(os.path.join(settings.BASE_DIR, <span class="string">'apps/order/alipay_public_key.pem'</span>)).read()</span><br><span class="line">        </span><br><span class="line">alipay = AliPay(</span><br><span class="line">    appid=<span class="string">"2016101900723846"</span>,</span><br><span class="line">    app_notify_url=<span class="literal">None</span>,  <span class="comment"># 默认回调url</span></span><br><span class="line">    app_private_key_string=app_private_key_string,</span><br><span class="line">    <span class="comment"># 支付宝的公钥，验证支付宝回传消息使用，不是你自己的公钥,</span></span><br><span class="line">    alipay_public_key_string=alipay_public_key_string,</span><br><span class="line">    sign_type=<span class="string">"RSA2"</span>,  <span class="comment"># RSA 或者 RSA2</span></span><br><span class="line">    debug = <span class="literal">True</span>  <span class="comment"># 默认False</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>本来想投机取巧一下，其实按照作者给的文档即可完美运行。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：因为官方没有提供Python的SDK，所以我采用了github上一个开源的第三方SDK。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="问题总结" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    
    
  </entry>
  
  <entry>
    <title>34python-alipay的SDK应用</title>
    <link href="http://yoursite.com/2020/03/05/34python-alipay%E7%9A%84SDK%E5%BA%94%E7%94%A8/"/>
    <id>http://yoursite.com/2020/03/05/34python-alipay%E7%9A%84SDK%E5%BA%94%E7%94%A8/</id>
    <published>2020-03-05T13:41:19.000Z</published>
    <updated>2020-03-05T13:41:19.549Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>33使用uwsgi作为服务器</title>
    <link href="http://yoursite.com/2020/03/04/33%E4%BD%BF%E7%94%A8uwsgi%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>http://yoursite.com/2020/03/04/33%E4%BD%BF%E7%94%A8uwsgi%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1%E5%99%A8/</id>
    <published>2020-03-04T12:56:58.000Z</published>
    <updated>2020-03-04T13:15:04.272Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：Django自带的只是用于调试的服务器，要部署到云服务器上还是要用第三方的服务器。</p></blockquote><a id="more"></a><h4 id="uwsgi的安装"><a href="#uwsgi的安装" class="headerlink" title="uwsgi的安装"></a>uwsgi的安装</h4><p>切换到虚拟环境中，然后安装:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c conda-forge uwsgi</span><br></pre></td></tr></table></figure><h4 id="uwsgi的配置"><a href="#uwsgi的配置" class="headerlink" title="uwsgi的配置"></a>uwsgi的配置</h4><p>修改项目settings.py文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DEBUG = FALSE</span><br><span class="line">ALLOWED_HOSTS = [&apos;*&apos;]</span><br></pre></td></tr></table></figure><p>项目中建立一个uwsgi.ini文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line"># 使用nginx连接时使用</span><br><span class="line"># socket=127.0.0.1:8080</span><br><span class="line"># 直接做web服务器使用 python manage.py runserver</span><br><span class="line">http=127.0.0.1:8080</span><br><span class="line"># 项目目录</span><br><span class="line">chdir=/home/worksapce/DH_HX</span><br><span class="line"># 项目中的wsgi.py文件的目录, 相当于项目目录, 里面有项目的入口</span><br><span class="line">wsgi-file=DH_HX/wsgi.py</span><br><span class="line"># 指定启动的工作进程数</span><br><span class="line">processes=4</span><br><span class="line"># 指定工作进程中的线程数</span><br><span class="line">threads=2</span><br><span class="line">master=True</span><br><span class="line"># 保存启动之后主进程的pid</span><br><span class="line">pidfile=uwsgi.pid</span><br><span class="line"># 设置uwsgi后台运行,uwsgi.log保存日志信息</span><br><span class="line">daemonize=uwsgi.log</span><br><span class="line"># 设置虚拟环境的路径</span><br><span class="line">virtualenv=/usr/local/anaconda/envs/DjangoTest</span><br></pre></td></tr></table></figure><h4 id="启动uwsgi"><a href="#启动uwsgi" class="headerlink" title="启动uwsgi"></a>启动uwsgi</h4><p>启动：uwsgi –ini 配置文件路径 例如：uwsgi –ini uwsgi.ini<br>停止：uwsgi –stop uwsgi.pid 路径 例如：uwsgi –stop uwsgi.pid</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：Django自带的只是用于调试的服务器，要部署到云服务器上还是要用第三方的服务器。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="学习笔记" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Django2.0" scheme="http://yoursite.com/tags/Django2-0/"/>
    
  </entry>
  
  <entry>
    <title>32使用xadmin替换Django的admin</title>
    <link href="http://yoursite.com/2020/03/03/32%E4%BD%BF%E7%94%A8xadmin%E6%9B%BF%E6%8D%A2Django%E7%9A%84admin/"/>
    <id>http://yoursite.com/2020/03/03/32%E4%BD%BF%E7%94%A8xadmin%E6%9B%BF%E6%8D%A2Django%E7%9A%84admin/</id>
    <published>2020-03-03T13:16:41.000Z</published>
    <updated>2020-03-04T13:31:30.886Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：Django自带有admin后台，但是其风格并不漂亮、功能也不是让人很满意。 所以从网上找了xadmin用来替换。</p></blockquote><a id="more"></a><h4 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h4><p>项目github地址为<a href="https://github.com/sshwsfc/xadmin，其中的xadmin文件夹是源码文件夹。" target="_blank" rel="noopener">https://github.com/sshwsfc/xadmin，其中的xadmin文件夹是源码文件夹。</a></p><h4 id="放置文件夹"><a href="#放置文件夹" class="headerlink" title="放置文件夹"></a>放置文件夹</h4><p>把xadmin文件夹放置在项目文件夹下面的，和templates同一级目录即可。</p><h4 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">NSTALLED_APPS = [</span><br><span class="line">    &apos;django.contrib.admin&apos;,</span><br><span class="line">    &apos;django.contrib.auth&apos;,</span><br><span class="line">    &apos;django.contrib.contenttypes&apos;,</span><br><span class="line">    &apos;django.contrib.sessions&apos;,</span><br><span class="line">    &apos;django.contrib.messages&apos;,</span><br><span class="line">    &apos;django.contrib.staticfiles&apos;,</span><br><span class="line">    &apos;xadmin&apos;,#添加</span><br><span class="line">    &apos;crispy_forms&apos;,#添加</span><br><span class="line">    &apos;reversion&apos;,#添加(可选)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="修改主路由"><a href="#修改主路由" class="headerlink" title="修改主路由"></a>修改主路由</h4><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">from django.conf.urls import url,include</span></span><br><span class="line"></span><br><span class="line"><span class="xml"># from django.contrib import admin 注释admin</span></span><br><span class="line"></span><br><span class="line"><span class="xml">#以下四句为新添加内容</span></span><br><span class="line"></span><br><span class="line"><span class="xml">import xadmin </span></span><br><span class="line"><span class="xml">xadmin.autodiscover()</span></span><br><span class="line"></span><br><span class="line"><span class="xml">from xadmin.plugins import xversion</span></span><br><span class="line"><span class="xml">xversion.register_models()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml">urlpatterns = [</span></span><br><span class="line"><span class="xml">  # url(r'^admin/', admin.site.urls),注释原路由</span></span><br><span class="line"><span class="xml">  url(r'^xadmin/',include(xadmin.site.urls)), #添加新路由</span></span><br><span class="line"><span class="xml">]</span></span><br></pre></td></tr></table></figure><h4 id="在应用中新建adminx-py文件"><a href="#在应用中新建adminx-py文件" class="headerlink" title="在应用中新建adminx.py文件"></a>在应用中新建adminx.py文件</h4><p>文件必须命名为这个名字，用于替换原有的admin文件，以后admin中的操作放到adminx中即可。</p><p>到此就可以了，xadmin还是非常方便好用，界面看起来也很舒适。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：Django自带有admin后台，但是其风格并不漂亮、功能也不是让人很满意。 所以从网上找了xadmin用来替换。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="学习笔记" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Django2.0" scheme="http://yoursite.com/tags/Django2-0/"/>
    
  </entry>
  
  <entry>
    <title>31关于毕设的一些思考</title>
    <link href="http://yoursite.com/2020/03/02/31%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/"/>
    <id>http://yoursite.com/2020/03/02/31%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/</id>
    <published>2020-03-02T13:02:15.000Z</published>
    <updated>2020-03-02T13:46:58.002Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：随着毕业设计的深入，对项目也积累了一些认识，虽然在开发的路上还刚刚起步，但是这几天静下心来敲代码感觉还是爱上了这种产品在手中一步步成型的感觉。</p></blockquote><a id="more"></a><h4 id="做好自己的选择"><a href="#做好自己的选择" class="headerlink" title="做好自己的选择"></a>做好自己的选择</h4><p>程序世界里面可以选择的技术千千万万，每年的新技术也不停的出现，因此做技术注定是学习无止境的，提前选好自己的技术路线是一个首要性的问题，然后逐渐往深挖掘，往广拓展，这要比浅尝辄止重要得多。</p><h4 id="做项目应该求快还是应该求好"><a href="#做项目应该求快还是应该求好" class="headerlink" title="做项目应该求快还是应该求好"></a>做项目应该求快还是应该求好</h4><p>从某种目的出发，如果是老师或者课程要求的话，我认为应该注重功能，把更多的精力放到功能实现上去，如果时间富裕，可以充分向外拓展，使用更高级的技术，或者往深挖掘，探索更优的策略，优化项目。</p><p>如果是自己做项目，我觉得还是尽量打磨得更加精美比较好，让体验更加好一些，可以尝试研究一些技术之外的东西运用在项目里面，比如项目中如何贴近用户习惯，用户心理等等。</p><h4 id="规划自我发展路线"><a href="#规划自我发展路线" class="headerlink" title="规划自我发展路线"></a>规划自我发展路线</h4><p>及早去探索发现自己的发展路线，很多涉及到自身的发展问题不要抱着“水到渠成”，“车到山前必有路”这样的想法，时间越长，我越发现路是自己探索出来的，有时候也许发现是错的，但是总比停在原地要好，时常抬抬头看看前面的路可以更好的走好脚下的路。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：随着毕业设计的深入，对项目也积累了一些认识，虽然在开发的路上还刚刚起步，但是这几天静下心来敲代码感觉还是爱上了这种产品在手中一步步成型的感觉。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="问题总结" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    
    
  </entry>
  
  <entry>
    <title>30使用haystack进行全文检索</title>
    <link href="http://yoursite.com/2020/03/01/30%E4%BD%BF%E7%94%A8haystack%E8%BF%9B%E8%A1%8C%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/"/>
    <id>http://yoursite.com/2020/03/01/30%E4%BD%BF%E7%94%A8haystack%E8%BF%9B%E8%A1%8C%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/</id>
    <published>2020-03-01T10:59:33.000Z</published>
    <updated>2020-03-01T11:28:07.769Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：搜索功能升级，使用haystack进行全文搜索。</p></blockquote><a id="more"></a><h4 id="Haystack介绍以及安装"><a href="#Haystack介绍以及安装" class="headerlink" title="Haystack介绍以及安装"></a>Haystack介绍以及安装</h4><p>全文检索不同于特定字段的模糊查询，使用全文检索的效率更高，并且能够对于中文进行分词处理。</p><ul><li>haystack：全文检索的框架，支持whoosh、solr、Xapian、Elasticsearc四种全文检索引擎，<a href="http://haystacksearch.org/" target="_blank" rel="noopener">官方网站</a></li><li>whoosh：纯Python编写的全文搜索引擎，虽然性能比不上sphinx、xapian、Elasticsearc等，但是无二进制包，程序不会莫名其妙的崩溃，对于小型的站点，whoosh已经足够使用，<a href="https://whoosh.readthedocs.io/en/latest/" target="_blank" rel="noopener">whoosh文档</a></li><li>jieba：中文分词包，用于语句拆分。</li></ul><p>1）在虚拟环境中依次安装需要的包。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install django-haystack</span><br><span class="line">pip install whoosh</span><br><span class="line">pip install jieba</span><br></pre></td></tr></table></figure><p>2）修改项目settings.py文件，安装应用haystack。</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">INSTALLED_APPS = (</span></span><br><span class="line"><span class="xml">    'haystack',</span></span><br><span class="line"><span class="xml">)</span></span><br></pre></td></tr></table></figure><p>3）在test6/settings.py文件中配置搜索引擎。</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">...</span></span><br><span class="line"><span class="xml">HAYSTACK_CONNECTIONS = &#123;</span></span><br><span class="line"><span class="xml">    'default': &#123;</span></span><br><span class="line"><span class="xml">        #使用whoosh引擎</span></span><br><span class="line"><span class="xml">        'ENGINE': 'haystack.backends.whoosh_backend.WhooshEngine',</span></span><br><span class="line"><span class="xml">        #索引文件路径</span></span><br><span class="line"><span class="xml">        'PATH': os.path.join(BASE_DIR, 'whoosh_index'),</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">#当添加、修改、删除数据时，自动生成索引</span></span><br><span class="line"><span class="xml">HAYSTACK_SIGNAL_PROCESSOR = 'haystack.signals.RealtimeSignalProcessor'</span></span><br></pre></td></tr></table></figure><p>4）在项目urls.py中添加搜索的配置。</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">path('search/', include('haystack.urls')),</span></span><br></pre></td></tr></table></figure><h4 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h4><p>1）在需要索引的应用目录下创建search_indexes.py文件，比如我要索引商品，就在goods目录下新建search_indexes.py文件，注意文件名很重要，不能修改。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> haystack <span class="keyword">import</span> indexes</span><br><span class="line"><span class="keyword">from</span> goods.models <span class="keyword">import</span> GoodsSKU</span><br><span class="line"><span class="comment">#指定对于某个类的某些数据建立索引</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsSKUIndex</span><span class="params">(indexes.SearchIndex, indexes.Indexable)</span>:</span></span><br><span class="line">    text = indexes.CharField(document=<span class="literal">True</span>, use_template=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_model</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> GoodsSKU</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">index_queryset</span><span class="params">(self, using=None)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.get_model().objects.all()</span><br></pre></td></tr></table></figure><p>2）在templates目录下创建”search/indexes/goods/“目录。</p><p><img src="/2020/03/01/30使用haystack进行全文检索/1.png" alt="image-20200301191212079"></p><p>3）在上面的目录中创建”goodssku_text.txt”文件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 指定根据表中的哪些字段建立索引</span><br><span class="line">&#123;&#123; object.name &#125;&#125;# 商品名称</span><br><span class="line">&#123;&#123; object.desc &#125;&#125;# 商品简介</span><br><span class="line">&#123;&#123; object.goods.detail &#125;&#125;# 商品详情</span><br></pre></td></tr></table></figure><p>4）找到虚拟环境下的haystack目录,我的项目环境是Anaconda创建的DjangoTest环境。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\ProgramFiles\Anaconda\envs\DjangoTest\Lib\site-packages\haystack\backends</span><br></pre></td></tr></table></figure><p>5）在上面的目录中创建ChineseAnalyzer.py文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">from</span> whoosh.analysis <span class="keyword">import</span> Tokenizer, Token</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChineseTokenizer</span><span class="params">(Tokenizer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, value, positions=False, chars=False,keeporiginal=False,removestops=True,start_pos=<span class="number">0</span>, start_char=<span class="number">0</span>, mode=<span class="string">''</span>, **kwargs)</span>:</span></span><br><span class="line">        t=Token(positions,chars,removestops=removestops, mode=mode,**kwargs)</span><br><span class="line">        seglist = jieba.cut(value, cut_all=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> seglist:</span><br><span class="line">            t.original = t.text = w</span><br><span class="line">            t.boost = <span class="number">1.0</span></span><br><span class="line">            <span class="keyword">if</span> positions:</span><br><span class="line">                t.pos = start_pos + value.find(w)</span><br><span class="line">            <span class="keyword">if</span> chars:</span><br><span class="line">                t.startchar = start_char + value.find(w)</span><br><span class="line">                t.endchar = start_char + value.find(w) + len(w)</span><br><span class="line">             <span class="keyword">yield</span> t</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ChineseAnalyzer</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> ChineseTokenizer()</span><br></pre></td></tr></table></figure><p>6）复制whoosh_backend.py文件，改为如下名称：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whoosh_cn_backend.py</span><br></pre></td></tr></table></figure><p>7）打开复制出来的新文件，引入中文分析类，内部采用jieba分词。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> .ChineseAnalyzer <span class="keyword">import</span> ChineseAnalyzer</span><br></pre></td></tr></table></figure><p>8）更改词语分析类。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查找</span><br><span class="line">analyzer=StemmingAnalyzer()</span><br><span class="line">改为</span><br><span class="line">analyzer=ChineseAnalyzer()</span><br></pre></td></tr></table></figure><p>9）初始化索引数据。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py rebuild_index</span><br></pre></td></tr></table></figure><p>初始化之后项目目录中会自动生成whoosh_index目录，目录里是whoosh的索引结构.</p><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>按照配置，在admin管理中添加数据后，会自动为数据创建索引，可以直接进行搜索，可以先创建一些测试数据。</p><p>1）在goods/views.py中定义视图query。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render(request,<span class="string">'goods/query.html'</span>)</span><br></pre></td></tr></table></figure><p>2）在goods/urls.py中配置。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(&apos;query/&apos;, views.query),</span><br></pre></td></tr></table></figure><p>3）在templates/目录中创建模板query.html。</p><blockquote><p>参数q表示搜索内容，传递到模板中的数据为query。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>全文检索<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">'get'</span> <span class="attr">action</span>=<span class="string">"/search/"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"q"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"查询"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4）自定义搜索结果模板：在templates/search/目录下创建search.html。</p><p>搜索结果进行分页，视图向模板中传递的上下文如下：</p><ul><li>query：搜索关键字</li><li>page：当前页的page对象</li><li>paginator：分页paginator对象</li></ul><p>视图接收的参数如下：</p><ul><li>参数q表示搜索内容，传递到模板中的数据为query</li><li>参数page表示当前页码</li></ul><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>全文检索--结果页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>搜索<span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span></span><span class="template-variable">&#123;&#123;query&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="symbol">&amp;nbsp;</span>结果如下：<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">for</span></span> item <span class="keyword">in</span> page%&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><span class="template-variable">&#123;&#123;item.object.id&#125;&#125;</span><span class="xml">--</span><span class="template-variable">&#123;&#123;item.object.gcontent|<span class="name">safe</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">empty</span></span>%&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>啥也没找到<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">endfor</span></span>%&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">for</span></span> pindex <span class="keyword">in</span> page.paginator.page_range%&#125;</span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;%<span class="name"><span class="name">if</span></span> pindex == page.number%&#125;</span></span><br><span class="line"><span class="xml">        </span><span class="template-variable">&#123;&#123;pindex&#125;&#125;</span><span class="xml"><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;%<span class="name"><span class="name">else</span></span>%&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"?q=</span></span></span><span class="template-variable">&#123;&#123;query&#125;&#125;</span><span class="xml"><span class="tag"><span class="string"><span class="symbol">&amp;amp;</span>page=</span></span></span><span class="template-variable">&#123;&#123;pindex&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span><span class="template-variable">&#123;&#123;pindex&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;%<span class="name"><span class="name">endif</span></span>%&#125;</span></span><br><span class="line"><span class="template-tag">&#123;%<span class="name"><span class="name">endfor</span></span>%&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>5）运行服务器，在浏览器中输入如下地址：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/query/</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：搜索功能升级，使用haystack进行全文搜索。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="学习笔记" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Haystack" scheme="http://yoursite.com/tags/Haystack/"/>
    
      <category term="Whoosh" scheme="http://yoursite.com/tags/Whoosh/"/>
    
  </entry>
  
  <entry>
    <title>29疑难问题记录</title>
    <link href="http://yoursite.com/2020/02/29/29%E7%96%91%E9%9A%BE%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
    <id>http://yoursite.com/2020/02/29/29%E7%96%91%E9%9A%BE%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</id>
    <published>2020-02-29T12:50:46.000Z</published>
    <updated>2020-02-29T13:00:13.693Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>咦，明明在我电脑上就没问题……</p></blockquote><a id="more"></a><p>今天继续修改代码，写完代码之后启动项目发现了一个问题：</p><p>Reverse for ‘detail’ with arguments ‘(‘’,)’ not found. 1 pattern(s) tried: [‘…</p><p>总之就是url跳转时候正则匹配有问题，查了很长时间的百度，也尝试了很多种办法，但是都没有解决，url跳转感觉也没什么问题。</p><p>后来没办法只能创建了一个git分支，然后把主分支版本回退，回退到昨天的版本之后可以正常启动项目了，说明昨天的代码没有问题。</p><p>然后我又切到分支版本重新启动，这次没什么问题了，分支版本也能正常启动，就很奇怪，不知道到底是哪里不对，总感觉代码哪里有隐患。</p><p>记录一下，等哪天问题再出来了再来填坑。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;咦，明明在我电脑上就没问题……&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="问题总结" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    
    
  </entry>
  
  <entry>
    <title>28页面静态化以及用户历史浏览记录的添加</title>
    <link href="http://yoursite.com/2020/02/28/28%E9%A1%B5%E9%9D%A2%E9%9D%99%E6%80%81%E5%8C%96%E4%BB%A5%E5%8F%8A%E7%94%A8%E6%88%B7%E5%8E%86%E5%8F%B2%E6%B5%8F%E8%A7%88%E8%AE%B0%E5%BD%95%E7%9A%84%E6%B7%BB%E5%8A%A0/"/>
    <id>http://yoursite.com/2020/02/28/28%E9%A1%B5%E9%9D%A2%E9%9D%99%E6%80%81%E5%8C%96%E4%BB%A5%E5%8F%8A%E7%94%A8%E6%88%B7%E5%8E%86%E5%8F%B2%E6%B5%8F%E8%A7%88%E8%AE%B0%E5%BD%95%E7%9A%84%E6%B7%BB%E5%8A%A0/</id>
    <published>2020-02-28T12:16:58.000Z</published>
    <updated>2020-02-28T12:40:43.185Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：使用页面静态化防止高并发用户访问时频繁刷新页面导致服务器卡顿，使用redis存储用户浏览记录也是同样的道理，防止用户频繁的数据库写入。</p></blockquote><a id="more"></a><h4 id="页面静态化"><a href="#页面静态化" class="headerlink" title="页面静态化"></a>页面静态化</h4><p>什么时候首页的静态页面需要重新生成？</p><p>当管理员后台修改首页信息对应的表格中的数据的时候，需要重新生成首页静态页面。</p><h4 id="页面数据的缓存"><a href="#页面数据的缓存" class="headerlink" title="页面数据的缓存:"></a>页面数据的缓存:</h4><p>把页面使用的数据放在缓存中，当再次使用这些数据的时候，先从缓存中读取，如果获取不到，再去查询数据库，减少数据库查询的次数。</p><h4 id="历史浏览记录的添加"><a href="#历史浏览记录的添加" class="headerlink" title="历史浏览记录的添加"></a>历史浏览记录的添加</h4><ul><li><p>什么时候需要添加历史浏览记录？</p><ul><li>访问商品的详情页面的时候（在商品详情对应的视图中），需要添加历史浏览记录。</li></ul></li><li><p>什么时候需要获取历史浏览记录？</p><ul><li>访问用户个人信息页面的时候获取用户历史浏览记录。</li></ul></li><li><p>历史浏览记录需要存储在哪里？</p><ul><li><p>redis数据库 -&gt; 内存型数据库</p><p>使用redis数据库存储历史浏览记录。</p></li></ul></li><li><p>redis中存储历史浏览记录的格式？</p><ul><li><p>string</p></li><li><p>hash</p></li><li><p>list</p></li><li><p>set</p></li><li><p>zset</p><p>存储用户的历史浏览记录时，所有用户的历史浏览记录用同一条数据保存</p><p>hash：</p><p>​        history：user_用户id: ‘1, 2, 3’</p><p>每个用户的历史浏览记录用一条数据结构保存：</p><p>list:</p><p>​    history_用户id：[3, 2, 1]</p><p>添加历史浏览记录时，用户最新的浏览的商品id从列表的左侧插入。</p></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：使用页面静态化防止高并发用户访问时频繁刷新页面导致服务器卡顿，使用redis存储用户浏览记录也是同样的道理，防止用户频繁的数据库写入。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="问题总结" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Redis" scheme="http://yoursite.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>27Linux上安装Anaconda3以及环境迁移</title>
    <link href="http://yoursite.com/2020/02/27/27Linux%E4%B8%8A%E5%AE%89%E8%A3%85Anaconda3%E4%BB%A5%E5%8F%8A%E7%8E%AF%E5%A2%83%E8%BF%81%E7%A7%BB/"/>
    <id>http://yoursite.com/2020/02/27/27Linux%E4%B8%8A%E5%AE%89%E8%A3%85Anaconda3%E4%BB%A5%E5%8F%8A%E7%8E%AF%E5%A2%83%E8%BF%81%E7%A7%BB/</id>
    <published>2020-02-27T12:40:53.000Z</published>
    <updated>2020-02-27T13:16:01.296Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：安装过程很简单，但是环境迁移很烦，尝试了很多次才成功，记录一下闭坑过程。</p></blockquote><a id="more"></a><h3 id="Anaconda3的安装"><a href="#Anaconda3的安装" class="headerlink" title="Anaconda3的安装"></a>Anaconda3的安装</h3><h4 id="安装包下载"><a href="#安装包下载" class="headerlink" title="安装包下载"></a>安装包下载</h4><ol><li>历史版本：<a href="https://repo.continuum.io/archive/" target="_blank" rel="noopener">https://repo.continuum.io/archive/</a></li><li>清华镜像源：<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a></li></ol><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bash Anaconda3-5.0.0-Linux-x86_64.sh</span><br></pre></td></tr></table></figure><p>之后提示接下来是许可协议，按Enter继续</p><p>许可协议有很多页，按Q跳到最后，输入yes接受协议</p><p>Anaconda默认按照位置是用户的home目录下的anaconda目录，修改为/usr/local目录下(我习惯把安装的软件都放到/usr/local/下面)，Enter开始进行安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[/root/anaconda3] &gt;&gt;&gt; /usr/<span class="built_in">local</span>/anaconda3</span><br></pre></td></tr></table></figure><p>等待安装几分钟后，会询问是否将Anaconda目录添加到.bashrc文件的PATH中，输入yes，安装完成后刷新.bashrc文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> /root/.bashrc</span><br></pre></td></tr></table></figure><h3 id="环境迁移"><a href="#环境迁移" class="headerlink" title="环境迁移"></a>环境迁移</h3><h4 id="Windows导出环境"><a href="#Windows导出环境" class="headerlink" title="Windows导出环境"></a>Windows导出环境</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda env <span class="built_in">export</span> &gt; environment.yaml</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">conda list -e &gt; requirments.txt</span><br></pre></td></tr></table></figure><p>环境会被保存在environment.yaml文件中，我们把文件上传到Linux服务器上面，通过以下命令进行环境复现</p><h4 id="Linux环境复现"><a href="#Linux环境复现" class="headerlink" title="Linux环境复现"></a>Linux环境复现</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda env create -f environment.yaml</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">conda install --yes --file requirements.txt</span><br></pre></td></tr></table></figure><p>因为是通过conda命令来创建虚拟环境，所以环境中使用到的库也是通过conda命令来安装，但是conda库没有我们需要的库的时候，我们会从pip库里面安装，这就导致conda命令无法安装pip的库，环境迁移不成功，所以我们在进行环境迁移的时候可以直接使用pip导出库，在Linux上进行install。</p><h4 id="一种实际上更好用的方法"><a href="#一种实际上更好用的方法" class="headerlink" title="一种实际上更好用的方法"></a>一种实际上更好用的方法</h4><p>pip导出库到requirements.txt</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure><p>Linux上创建虚拟环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n envname python=3.6</span><br></pre></td></tr></table></figure><p>进入虚拟环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> activate envname</span><br></pre></td></tr></table></figure><p>使用pip安装需要的包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>这样就会顺利很多。</p><p><strong>Linux上Anaconda进出环境命令比Windows多了一个source</strong></p><p>进入环境：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> activate env_name</span><br></pre></td></tr></table></figure><p>退出环境：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> deactivate</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：安装过程很简单，但是环境迁移很烦，尝试了很多次才成功，记录一下闭坑过程。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="学习笔记" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
      <category term="Anaconda3" scheme="http://yoursite.com/tags/Anaconda3/"/>
    
  </entry>
  
  <entry>
    <title>26CentOS7上安装MySQL</title>
    <link href="http://yoursite.com/2020/02/26/26CentOS7%E4%B8%8A%E5%AE%89%E8%A3%85MySQL/"/>
    <id>http://yoursite.com/2020/02/26/26CentOS7%E4%B8%8A%E5%AE%89%E8%A3%85MySQL/</id>
    <published>2020-02-26T13:23:29.000Z</published>
    <updated>2020-02-26T14:08:53.801Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：安装了一遍居然出错了，只能卸载再安一遍记录一下。</p><p>最近发现做东西总要出错，明明很简单的配置过程总要出点问题，偶尔顺利一次都要怀疑到底对不对。</p></blockquote><a id="more"></a><h4 id="为防止安装失败，先说卸载"><a href="#为防止安装失败，先说卸载" class="headerlink" title="为防止安装失败，先说卸载"></a>为防止安装失败，先说卸载</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看yum是否安装过mysql</span></span><br><span class="line">$ yum list installed mysql*</span><br></pre></td></tr></table></figure><p>如果显示了列表，说明系统中有MySQL。</p><p>根据列表上的名字进行yum卸载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ yum remove mysql-community-client mysql-community-common mysql-community-libs mysql-community-libs-compat mysql-community-server mysql57-community-release</span><br><span class="line"></span><br><span class="line">$ rm -rf /var/lib/mysql  </span><br><span class="line">$ rm /etc/my.cnf</span><br></pre></td></tr></table></figure><ol start="2"><li>rpm查看安装</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rpm -qa | grep -i mysql</span><br></pre></td></tr></table></figure><p>根据列表上的名字进行rpm卸载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ rpm -ev mysql57-community-release-el7-9.noarch</span><br><span class="line">$ rpm -ev mysql-community-server-5.7.17-1.el7.x86_64</span><br><span class="line">$ rpm -ev mysql-community-libs-5.7.17-1.el7.x86_64</span><br><span class="line">$ rpm -ev mysql-community-libs-compat-5.7.17-1.el7.x86_64</span><br><span class="line">$ rpm -ev mysql-community-common-5.7.17-1.el7.x86_64</span><br><span class="line">$ rpm -ev mysql-community-client-5.7.17-1.el7.x86_64</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> /var/lib/  </span><br><span class="line">$ rm -rf mysql/</span><br></pre></td></tr></table></figure><p>注意：这里有可能会抛依赖错误 error:Failed dependencies:，则加上 –nodeps不检查依赖关系删除，命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rpm -e --nodeps mysql-community-server-5.7.17-1.el7.x86_64</span><br></pre></td></tr></table></figure><p>清除余项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ whereis mysql</span><br><span class="line">mysql: /usr/bin/mysql /usr/lib64/mysql /usr/<span class="built_in">local</span>/mysql /usr/share/mysql /usr/share/man/man1/mysql.1.gz</span><br><span class="line"><span class="comment"># 删除上面的文件夹</span></span><br><span class="line">$ rm -rf /usr/bin/mysql</span><br><span class="line">…</span><br><span class="line">…</span><br></pre></td></tr></table></figure><p>删除配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ rm –rf /usr/my.cnf</span><br><span class="line">$ rm -rf /root/.mysql_sercret</span><br></pre></td></tr></table></figure><p>剩余配置检查</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ chkconfig --list | grep -i mysql</span><br><span class="line">$ chkconfig --del mysqld</span><br></pre></td></tr></table></figure><p>根据上面的列表，删除 , 如：mysqld</p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><ol><li>安装软件源</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://repo.mysql.com/mysql57-community-release-el7-9.noarch.rpm</span><br><span class="line">$ rpm -ivh mysql57-community-release-el7-9.noarch.rpm</span><br></pre></td></tr></table></figure><ol start="2"><li>接下来使用yum安装</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新yum软件包</span></span><br><span class="line">$ yum check-update  </span><br><span class="line"><span class="comment"># 更新系统 </span></span><br><span class="line">$ yum update</span><br><span class="line"> <span class="comment">#安装mysql</span></span><br><span class="line">$ yum install mysql mysql-server</span><br></pre></td></tr></table></figure><ol start="3"><li>安装完成后启动服务</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ service start mysqld</span><br><span class="line">$ systemctl start mysqld.service</span><br></pre></td></tr></table></figure><ol start="4"><li>查看MySQL的运行状态</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ service mysqld status</span><br><span class="line">$ systemctl status mysqld.service</span><br></pre></td></tr></table></figure><ol start="5"><li>获取MySQL的默认密码</li></ol><p>MySQL5.7安装完成后为root用户随机生成了一个密码，在error log中，关于error log的位置，如果安装的是RPM包，则默认是/var/log/mysqld.log。<br>只有启动过一次mysql才可以查看临时密码。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep <span class="string">'temporary password'</span> /var/<span class="built_in">log</span>/mysqld.log</span><br></pre></td></tr></table></figure><p><img src="/2020/02/26/26CentOS7上安装MySQL/1.png" alt="image-20200226214404829"></p><p>我这里的密码是rMThio2k&gt;aWp</p><ol start="6"><li>使用默认密码登录并修改密码</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;root&apos;;</span><br></pre></td></tr></table></figure><p>如果密码太简单，会出现一个错误<code>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</code>,对于这个错误，可以修改两个参数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global validate_password_policy=0; </span><br><span class="line">mysql&gt; set global validate_password_length=1;</span><br></pre></td></tr></table></figure><p>再次执行修改密码就可以了</p><ol start="7"><li>授权可以外网访问MySQL</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;mypassword&apos; WITH GRANT OPTION;</span><br><span class="line">mysql&gt; FLUSH  PRIVILEGES;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：安装了一遍居然出错了，只能卸载再安一遍记录一下。&lt;/p&gt;
&lt;p&gt;最近发现做东西总要出错，明明很简单的配置过程总要出点问题，偶尔顺利一次都要怀疑到底对不对。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="学习笔记" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>兼职酱前端设计图</title>
    <link href="http://yoursite.com/2020/02/26/%E5%85%BC%E8%81%8C%E9%85%B1%E5%89%8D%E7%AB%AF%E8%AE%BE%E8%AE%A1%E5%9B%BE/"/>
    <id>http://yoursite.com/2020/02/26/%E5%85%BC%E8%81%8C%E9%85%B1%E5%89%8D%E7%AB%AF%E8%AE%BE%E8%AE%A1%E5%9B%BE/</id>
    <published>2020-02-26T04:55:06.000Z</published>
    <updated>2020-02-26T05:01:57.119Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：以前做的一个项目的前端设计图，图中APP界面均为实际效果图。</p></blockquote><a id="more"></a><p><img src="/2020/02/26/兼职酱前端设计图/1.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：以前做的一个项目的前端设计图，图中APP界面均为实际效果图。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="前端设计" scheme="http://yoursite.com/tags/%E5%89%8D%E7%AB%AF%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>Redis随笔</title>
    <link href="http://yoursite.com/2020/02/25/Redis%E9%9A%8F%E7%AC%94/"/>
    <id>http://yoursite.com/2020/02/25/Redis%E9%9A%8F%E7%AC%94/</id>
    <published>2020-02-25T10:44:20.000Z</published>
    <updated>2020-02-25T10:47:11.926Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：把Redis移到服务器端进行配置实现购物车功能。</p></blockquote><a id="more"></a><h4 id="使用外网访问Linux上的Redis"><a href="#使用外网访问Linux上的Redis" class="headerlink" title="使用外网访问Linux上的Redis"></a>使用外网访问Linux上的Redis</h4><p>只需修改/etc/redis.conf文件。将bind注释掉即可。</p><p>linux上操作redis相关命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># service命令启动reids脚本</span></span><br><span class="line">service redis start</span><br><span class="line"><span class="comment"># service命令停止redis脚本</span></span><br><span class="line">service redis stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># systemctl命令兼容了service</span></span><br><span class="line">systemctl redis start</span><br><span class="line">systemctl redis stop</span><br><span class="line">systemctl redis restart</span><br></pre></td></tr></table></figure><h4 id="使用Redis实现购物车功能"><a href="#使用Redis实现购物车功能" class="headerlink" title="使用Redis实现购物车功能"></a>使用Redis实现购物车功能</h4><ol><li><p>什么时候添加购物车记录？</p><p>当用户点击加入购物车时需要添加购物车记录</p></li><li><p>什么时候需要获取购物车记录？</p><p>使用到购物车中数据和访问购物车页面的时候需要获取购物车记录</p></li><li><p>使用什么存储购物车记录?</p><p>Redis存储购物车记录</p></li><li><p>分析存储购物车记录的格式？</p><p>一个用户的购物车记录用户一条数据保存</p><p>hash:</p><p>‘cart_用户id’：[‘sku_id’：商品数目，’sku_id’：商品数目]</p><p>例子:</p><p>‘cart_1’：[‘1’：3，’2’：5]</p></li></ol><ol start="5"><li><p>获取用户购物车中商品总数目：</p><p>使用hlen</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：把Redis移到服务器端进行配置实现购物车功能。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="学习笔记" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Redis" scheme="http://yoursite.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>25FastDFS+Nginx学习记录</title>
    <link href="http://yoursite.com/2020/02/25/25FastDFS+Nginx%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <id>http://yoursite.com/2020/02/25/25FastDFS+Nginx%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</id>
    <published>2020-02-25T10:12:30.000Z</published>
    <updated>2020-02-25T10:43:35.280Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：简单介绍一下FastDFS和Nginx。</p></blockquote><a id="more"></a><h3 id="FastDFS"><a href="#FastDFS" class="headerlink" title="FastDFS"></a>FastDFS</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>FastDFS 是一个开源的高性能分布式文件系统（DFS）。 它的主要功能包括：文件存储，文件同步和文件访问，以及高容量和负载平衡。主要解决了海量数据存储问题，特别适合以中小文件（建议范围：4KB &lt; file_size &lt;500MB）为载体的在线服务。</p><p>FastDFS 系统有三个角色：跟踪服务器(Tracker Server)、存储服务器(Storage Server)和客户端(Client)。</p><p>　　<strong>Tracker Server</strong>：跟踪服务器，主要做调度工作，起到均衡的作用；负责管理所有的 storage server和 group，每个 storage 在启动后会连接 Tracker，告知自己所属 group 等信息，并保持周期性心跳。</p><p>　　<strong>Storage Server</strong>：存储服务器，主要提供容量和备份服务；以 group 为单位，每个 group 内可以有多台 storage server，数据互为备份。</p><p>　　<strong>Client</strong>：客户端，上传下载数据的服务器，也就是我们自己的项目所部署在的服务器。</p><p><img src="/2020/02/25/25FastDFS+Nginx学习记录/1.png" alt="img"></p><h4 id="FastDFS的存储策略"><a href="#FastDFS的存储策略" class="headerlink" title="FastDFS的存储策略"></a>FastDFS的存储策略</h4><p>为了支持大容量，存储节点（服务器）采用了分卷（或分组）的组织方式。存储系统由一个或多个卷组成，卷与卷之间的文件是相互独立的，所有卷的文件容量累加就是整个存储系统中的文件容量。一个卷可以由一台或多台存储服务器组成，一个卷下的存储服务器中的文件都是相同的，卷中的多台存储服务器起到了冗余备份和负载均衡的作用。</p><p>在卷中增加服务器时，同步已有的文件由系统自动完成，同步完成后，系统自动将新增服务器切换到线上提供服务。当存储空间不足或即将耗尽时，可以动态添加卷。只需要增加一台或多台服务器，并将它们配置为一个新的卷，这样就扩大了存储系统的容量。</p><h4 id="FastDFS的上传过程"><a href="#FastDFS的上传过程" class="headerlink" title="FastDFS的上传过程"></a>FastDFS的上传过程</h4><p>FastDFS向使用者提供基本文件访问接口，比如upload、download、append、delete等，以客户端库的方式提供给用户使用。</p><p>Storage Server会定期的向Tracker Server发送自己的存储信息。当Tracker Server Cluster中的Tracker Server不止一个时，各个Tracker之间的关系是对等的，所以客户端上传时可以选择任意一个Tracker。</p><p>当Tracker收到客户端上传文件的请求时，会为该文件分配一个可以存储文件的group，当选定了group后就要决定给客户端分配group中的哪一个storage server。当分配好storage server后，客户端向storage发送写文件请求，storage将会为文件分配一个数据存储目录。然后为文件分配一个fileid，最后根据以上的信息生成文件名存储文件。</p><p><img src="/2020/02/25/25FastDFS+Nginx学习记录/2.png" alt></p><h4 id="FastDFS的文件同步"><a href="#FastDFS的文件同步" class="headerlink" title="FastDFS的文件同步"></a>FastDFS的文件同步</h4><p>写文件时，客户端将文件写至group内一个storage server即认为写文件成功，storage server写完文件后，会由后台线程将文件同步至同group内其他的storage server。</p><p>每个storage写文件后，同时会写一份binlog，binlog里不包含文件数据，只包含文件名等元信息，这份binlog用于后台同步，storage会记录向group内其他storage同步的进度，以便重启后能接上次的进度继续同步；进度以时间戳的方式进行记录，所以最好能保证集群内所有server的时钟保持同步。</p><p>storage的同步进度会作为元数据的一部分汇报到tracker上，tracke在选择读storage的时候会以同步进度作为参考。</p><h4 id="FastDFS的文件下载"><a href="#FastDFS的文件下载" class="headerlink" title="FastDFS的文件下载"></a>FastDFS的文件下载</h4><p>客户端uploadfile成功后，会拿到一个storage生成的文件名，接下来客户端根据这个文件名即可访问到该文件。</p><p><img src="/2020/02/25/25FastDFS+Nginx学习记录/3.png" alt></p><p>跟upload file一样，在downloadfile时客户端可以选择任意tracker server。tracker发送download请求给某个tracker，必须带上文件名信息，tracke从文件名中解析出文件的group、大小、创建时间等信息，然后为该请求选择一个storage用来服务读请求。</p><h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><p><strong>Nginx：</strong>Nginx（“engine x”），Nginx是俄罗斯人Igor Sysoev编写的一款高性能的 HTTP 和反向代理服务器。也是一个IMAP/POP3/SMTP代理服务器，也就是说，Nginx本身就可以托管网站，进行HTTP服务处理，也可以作为反向代理服务器使用。</p><p>Nginx就是反向代理服务器。</p><p>代理服务器是介于客户端和Web服务器之间的另一台服务器，有了它之后，浏览器不是直接到Web服务器去取回网页，而是通过向代理服务器发送请求，信号会先送到代理服务器，由代理服务器来取回浏览器所需要的信息并传送给你的浏览器。</p><p><img src="/2020/02/25/25FastDFS+Nginx学习记录/4.png" alt></p><p>一个完整的代理请求过程为：客户端首先与代理服务器创建连接，然后根据代理服务器所使用的代理协议，请求对目标服务器创建连接、或则获得目标服务器的指定资源。</p><p>正向代理是一个位于客户端和原始服务器之间的服务器，为了从原始服务器取的内容，客户端向代理发送一个请求并指定目标（原始服务器），然后代理向原始服务器转交请求并将获得的内容返回给客户端，客户端必须要进行一些特别的设置才能使用正向代理。</p><p>反向代理服务器：在服务器端接收客户端的请求，然后把请求分发给具体的服务器进行处理，然后再将服务器的响应结果反馈给客户端。Nginx就是其中的一种反向代理服务器软件。</p><p><strong>简单的说：</strong></p><p>正向代理：客户端知道服务器端，通过代理端连接服务器端。代理端代理的是服务器端。<br>反向代理：所谓反向，是对正向而言的。服务器端知道客户端，客户端不知道服务器端，通过代理端连接服务器端。代理端代理的是客户端。代理对象刚好相反，所以叫反向代理。</p><h4 id="Nginx的特点"><a href="#Nginx的特点" class="headerlink" title="Nginx的特点"></a>Nginx的特点</h4><p>（1）跨平台：Nginx 可以在大多数 Unix like OS编译运行，而且也有Windows的移植版本。<br>（2）配置异常简单，非常容易上手。配置风格跟程序开发一样，神一般的配置<br>（3）非阻塞、高并发连接：数据复制时，磁盘I/O的第一阶段是非阻塞的。官方测试能够支撑5万并发连接，在实际生产环境中跑到2～3万并发连接数.(这得益于Nginx使用了最新的epoll模型)<br>（4）事件驱动：通信机制采用epoll模型，支持更大的并发连接。<br>（5）master/worker结构：一个master进程，生成一个或多个worker进程<br>（6）内存消耗小：处理大并发的请求内存消耗非常小。在3万并发连接下，开启的10个Nginx 进程才消耗150M内存（15M*10=150M）<br>（7）成本低廉：Nginx为开源软件，可以免费使用。而购买F5 BIG-IP、NetScaler等硬件负载均衡交换机则需要十多万至几十万人民币<br>（8）内置的健康检查功能：如果 Nginx Proxy 后端的某台 Web 服务器宕机了，不会影响前端访问。<br>（9）节省带宽：支持 GZIP 压缩，可以添加浏览器本地缓存的 Header 头。<br>（10）稳定性高：用于反向代理，宕机的概率微乎其微</p><h4 id="使用FastDFS-Nginx搭建文件分布系统"><a href="#使用FastDFS-Nginx搭建文件分布系统" class="headerlink" title="使用FastDFS + Nginx搭建文件分布系统"></a>使用FastDFS + Nginx搭建文件分布系统</h4><p>海量存储，存储容量扩展方便。</p><p>文件内容重复。</p><p>结合nginx提高网站提供图片的效率。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：简单介绍一下FastDFS和Nginx。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="学习笔记" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/tags/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="FastDFS" scheme="http://yoursite.com/tags/FastDFS/"/>
    
      <category term="Nginx" scheme="http://yoursite.com/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>24Python与FDFS交互时遇到的问题</title>
    <link href="http://yoursite.com/2020/02/24/24Python%E4%B8%8EFDFS%E4%BA%A4%E4%BA%92%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>http://yoursite.com/2020/02/24/24Python%E4%B8%8EFDFS%E4%BA%A4%E4%BA%92%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2020-02-24T11:59:16.000Z</published>
    <updated>2020-02-24T12:50:03.211Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>今天使用python在本地和服务器的FastDFS进行交互，遇到了几个问题，记录一下。</p></blockquote><a id="more"></a><h4 id="python与FDFS交互时报错"><a href="#python与FDFS交互时报错" class="headerlink" title="python与FDFS交互时报错"></a>python与FDFS交互时报错</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> fdfs_client.client <span class="keyword">import</span> Fdfs_client</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>client = Fdfs_client(<span class="string">'/etc/fdfs/client.conf'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret = client.upload_by_filename(<span class="string">'test'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret</span><br><span class="line">&#123;<span class="string">'Group name'</span>:<span class="string">'group1'</span>,<span class="string">'Status'</span>:<span class="string">'Upload successed.'</span>, <span class="string">'Remote file_id'</span>:<span class="string">'group1/M00/00/00/</span></span><br><span class="line"><span class="string">wKjzh0_xaR63RExnAAAaDqbNk5E1398.py'</span>,<span class="string">'Uploaded size'</span>:<span class="string">'6.0KB'</span>,<span class="string">'Local file name'</span>:<span class="string">'test'</span></span><br><span class="line">, <span class="string">'Storage IP'</span>:<span class="string">'192.168.243.133'</span>&#125;</span><br></pre></td></tr></table></figure><p>在测试FDFS与python交互时，输入以上代码，这是官方文档的代码，当我输入<br>ret = client.upload_by_filename(‘test’)后，就报错了。</p><p>错误如下：<br>Traceback (most recent call last):<br>File “”, line 1, in<br>File “/root/.virtualenvs/Cole_py3/lib/python3.6/site-packages/fdfs_client/client.py”, line 88, in upload_by_filename<br>raise DataError(errmsg + ‘(uploading)’)<br>fdfs_client.exceptions.DataError: [-] Error: test1 is not a file.(uploading)</p><p>主要还是太天真了，以为按照官方测试代码输入就没错，后来查看了client.py的代码，才发现，ret = client.upload_by_filename(’ ‘) 括号里面填写的是要在你本机存在的文件名或者文件路径<br>ret = client.upload_by_filename(’ /home/cole/python/test/test1.py ‘)<br>ret = client.upload_by_filename(’ test1.py ‘)<br>这两种写法都可以，前提是test1.py是要存在你本机</p><h4 id="type-object-argument-after-must-be-a-mapping-not-str"><a href="#type-object-argument-after-must-be-a-mapping-not-str" class="headerlink" title="type object argument after ** must be a mapping, not str"></a>type object argument after ** must be a mapping, not str</h4><p>django自定义fdfs文件存储时报了这个错误。</p><p>创建client实例对象的时候不能直接传入配置文件的地址字符串,否则报错.<br>错误代码:TypeError: type object argument after ** must be a mapping, not str</p><p>解决办法：通过模块内<strong>get_tracker_conf</strong>函数, 获取配置文件后传入。</p><p>原代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fdfs_client.client <span class="keyword">import</span> Fdfs_client</span><br><span class="line">client = （./utils/fdfs/client.con<span class="string">f')</span></span><br><span class="line"><span class="string">ret = client.upload_by_buffer(content.read())</span></span><br></pre></td></tr></table></figure><p>修改后代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fdfs_client.client <span class="keyword">import</span> Fdfs_client, get_tracker_conf</span><br><span class="line">　　tracker_path = get_tracker_conf(<span class="string">'./utils/fdfs/client.conf'</span>)</span><br><span class="line">　　client = Fdfs_client(tracker_path)</span><br><span class="line">　　ret = client.upload_by_buffer(content.read())</span><br></pre></td></tr></table></figure><h4 id="python3使用fdfs上传文件时报str-returned-non-string-type-bytes-错误"><a href="#python3使用fdfs上传文件时报str-returned-non-string-type-bytes-错误" class="headerlink" title="python3使用fdfs上传文件时报str returned non-string (type bytes)错误"></a>python3使用fdfs上传文件时报<strong>str</strong> returned non-string (type bytes)错误</h4><p>上传成功后返回一个字典, 其中’Remote file_id’键对应的值由旧版模块string类型更改为byte类型。所以, 返回的文件id是byte类型，</p><p>原代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filename = result.get(<span class="string">'Remote file_id'</span>)</span><br><span class="line"><span class="keyword">return</span> filename</span><br></pre></td></tr></table></figure><p>修改后代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filename = result.get(<span class="string">'Remote file_id'</span>)</span><br><span class="line"><span class="keyword">return</span> filename.decode()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;今天使用python在本地和服务器的FastDFS进行交互，遇到了几个问题，记录一下。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="问题总结" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/tags/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="FastDFS" scheme="http://yoursite.com/tags/FastDFS/"/>
    
  </entry>
  
  <entry>
    <title>搭建FastDFS及Nginx过程中遇到的问题</title>
    <link href="http://yoursite.com/2020/02/23/%E6%90%AD%E5%BB%BAFastDFS%E5%8F%8ANginx%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>http://yoursite.com/2020/02/23/%E6%90%AD%E5%BB%BAFastDFS%E5%8F%8ANginx%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2020-02-23T10:37:47.000Z</published>
    <updated>2020-02-23T10:42:56.061Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：安装个Nginx，配置文件那里整整用了一天时间，还是无法映射到8888端口，只能使用80端口实现了，无奈。</p></blockquote><a id="more"></a><h4 id="本地上传文件到FastDFS命令上传报错：ERROR-file-connection-pool-c-line-130-connect-to-x-x-x-x-22122-fail"><a href="#本地上传文件到FastDFS命令上传报错：ERROR-file-connection-pool-c-line-130-connect-to-x-x-x-x-22122-fail" class="headerlink" title="本地上传文件到FastDFS命令上传报错：ERROR - file: connection_pool.c, line: 130, connect to x.x.x.x:22122 fail"></a>本地上传文件到FastDFS命令上传报错：ERROR - file: connection_pool.c, line: 130, connect to x.x.x.x:22122 fail</h4><p><strong>问题分析</strong>：错误信息提示错误的原因为连接超时，连接超时有两种可能的原因，一种是云服务器拒绝我们的访问，另一种是我们服务器电脑开启了开机启动防火墙。<br><strong>注：不管你进行什么操作，只要是报了类似连接失败错误代号，大部分都是由于两种原因造成</strong></p><p><strong>解决方法一</strong>：<br>故先检查云服务是否对我们的22122端口（FastDFS的默认端口）进行了拦截，有的话创建安全组对该端口进行放行应用到实例上再次上传就能解决上传成功(这里我设置为所有端口都开放)。</p><p><img src="/2020/02/23/搭建FastDFS及Nginx过程中遇到的问题/1.png" alt="image-20200223114229884"></p><p><strong>解决方法二：</strong><br>由于出现该问题的原因是因为自己的防火墙没有开启，故开启防火墙即可解决问题，Linux上的指令如下：<br>1、关闭防火墙：</p><p><code>sudo systemctl stop firewalld.service</code><br>2、关闭开机启动：</p><p><code>sudo systemctl disable firewalld.service</code></p><p>再次上传：</p><p><img src="/2020/02/23/搭建FastDFS及Nginx过程中遇到的问题/2.png" alt="image-20200223114409066"></p><p>成功</p><h4 id="nginx-conf的配置"><a href="#nginx-conf的配置" class="headerlink" title="nginx.conf的配置"></a>nginx.conf的配置</h4><p>按照文档进行配置，但是无论如何都打不开8888的端口，只能改到默认的80端口，具体配置如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  x.x.x.x;</span><br><span class="line"></span><br><span class="line">        location ~/group[0-9]/ &#123;</span><br><span class="line">            ngx_fastdfs_module;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：安装个Nginx，配置文件那里整整用了一天时间，还是无法映射到8888端口，只能使用80端口实现了，无奈。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="问题总结" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/tags/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
      <category term="FastDFS" scheme="http://yoursite.com/tags/FastDFS/"/>
    
      <category term="Nginx" scheme="http://yoursite.com/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>23搭建FastDFS+Nginx分布式文件系统</title>
    <link href="http://yoursite.com/2020/02/23/23%E6%90%AD%E5%BB%BAFastDFS-Nginx%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
    <id>http://yoursite.com/2020/02/23/23%E6%90%AD%E5%BB%BAFastDFS-Nginx%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</id>
    <published>2020-02-23T10:27:26.000Z</published>
    <updated>2020-02-23T10:43:27.062Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要：安装一个分布式文件系统花了一天时间，不过总算是搞出来了。</p></blockquote><a id="more"></a><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p>我用的是Linux版本是centos7<br>准备搭建所需要的gz包：<br>    nginx-1.8.1.tar.gz<br>    fastdfs-master.zip<br>    fastdfs-nginx-module-master.zip<br>    libfastcommon-master.zip</p><h3 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y lrzsz</span><br></pre></td></tr></table></figure><p>安装完成之后可以使用<code>rz</code>命令从本地向云服务器上传文件</p><h3 id="安装FastDFS"><a href="#安装FastDFS" class="headerlink" title="安装FastDFS"></a>安装FastDFS</h3><h4 id="安装fastdfs依赖包"><a href="#安装fastdfs依赖包" class="headerlink" title="安装fastdfs依赖包"></a>安装fastdfs依赖包</h4><ol><li><p>将libfastcommon解压到/usr/local/文件夹下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ unzip libfastcommon-master.zip -d /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure></li><li><p>进入到libfastcommon-master目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/libfastcommon-master</span><br></pre></td></tr></table></figure></li><li><p>执行./make.sh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./make.sh</span><br></pre></td></tr></table></figure></li><li><p>执行./make.sh install</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./make.sh install</span><br></pre></td></tr></table></figure></li></ol><h4 id="安装fastdfs"><a href="#安装fastdfs" class="headerlink" title="安装fastdfs"></a>安装fastdfs</h4><ol><li><p>解压缩fastdfs-master.zip</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ unzip fastdfs-master.zip -d /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure></li><li><p>进入到fastdfs-master目录中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fasdfs-master</span><br></pre></td></tr></table></figure></li><li><p>执行./make.sh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./make.sh</span><br></pre></td></tr></table></figure></li><li><p>执行./make.sh install</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./make.sh install</span><br></pre></td></tr></table></figure></li></ol><h4 id="配置跟中服务器tracker"><a href="#配置跟中服务器tracker" class="headerlink" title="配置跟中服务器tracker"></a>配置跟中服务器tracker</h4><ol><li><p>将tracker.conf文件移动到/etc/fdfs/中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.conf</span><br></pre></td></tr></table></figure></li><li><p>在/usr/local/python3/目录中创建目录/fastdfs/tracker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p /usr/<span class="built_in">local</span>/python3/fastdfs/tracker</span><br></pre></td></tr></table></figure></li><li><p>编辑/etc/fdfs/tracker.conf配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/fdfs/tracker.conf</span><br></pre></td></tr></table></figure></li><li><p>修改内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base_path=/usr/<span class="built_in">local</span>/python3/fastdfs/tracker</span><br></pre></td></tr></table></figure></li></ol><h4 id="配置储存服务器storage"><a href="#配置储存服务器storage" class="headerlink" title="配置储存服务器storage"></a>配置储存服务器storage</h4><ol><li><p>将storage.conf文件移动到/etc/fdfs/中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp /etc/fdfs/storage.conf.sample /etc/fdfs/storage.conf</span><br></pre></td></tr></table></figure></li><li><p>在/usr/local/python3/fastdfs/目录中创建目录storage</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p /usr/<span class="built_in">local</span>/python3/fastdfs/storage</span><br></pre></td></tr></table></figure></li><li><p>编辑/etc/fdfs/storage.conf配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/fdfs/storage.conf</span><br></pre></td></tr></table></figure></li><li><p>修改内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">base_path=/usr/<span class="built_in">local</span>/python3/fastdfs/storage</span><br><span class="line">store_path0=/usr/<span class="built_in">local</span>/python3/fastdfs/storage</span><br><span class="line"><span class="comment"># 此处x.x.x.x为自己的云服务器的ip地址</span></span><br><span class="line">tracker_server=x.x.x.x:22122</span><br></pre></td></tr></table></figure></li><li><p>启动tracker和storage</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ service fdfs_trackerd start</span><br><span class="line">$ service fdfs_storaged start</span><br></pre></td></tr></table></figure></li></ol><h4 id="测试是否安装成功"><a href="#测试是否安装成功" class="headerlink" title="测试是否安装成功"></a>测试是否安装成功</h4><ol><li><p>将client.conf文件移动到/etc/fdfs/文件夹下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp /etc/fdfs/client.conf.sample /etc/fdfs/client.conf</span><br></pre></td></tr></table></figure></li><li><p>编辑/etc/fdfs/client.conf配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/fdfs/client.conf</span><br></pre></td></tr></table></figure></li><li><p>修改内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">base_path=/usr/<span class="built_in">local</span>/python3/fastdfs/tracker</span><br><span class="line"><span class="comment"># 此处x.x.x.x为自己的云服务器的ip地址</span></span><br><span class="line">tracker_server=x.x.x.x:22122</span><br></pre></td></tr></table></figure></li><li><p>上传文件到/usr/local/文件夹下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span></span><br><span class="line">$ rz</span><br></pre></td></tr></table></figure></li><li><p>上传文件测试</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fdfs_upload_file /etc/fdfs/client.conf /usr/<span class="built_in">local</span>/1.jpg</span><br></pre></td></tr></table></figure></li><li><p>正确返回内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">group1/M00/00/00/rBBVCV5SUomAZGXzAAJsTkkrCMI580.jpg</span><br></pre></td></tr></table></figure></li></ol><h3 id="安装nginx及fastdfs-nginx-module"><a href="#安装nginx及fastdfs-nginx-module" class="headerlink" title="安装nginx及fastdfs-nginx-module"></a>安装nginx及fastdfs-nginx-module</h3><h4 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h4><ol><li><p>将nginx-1.8.1.tar.gz解压至/usr/local</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zxvf nginx-1.8.1.tar.gz -C /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure></li><li><p>进入nginx-1.8.1目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx-1.8.1</span><br></pre></td></tr></table></figure></li><li><p>参数配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure --prefix=/usr/<span class="built_in">local</span>/nginx</span><br></pre></td></tr></table></figure></li><li><p>编译安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure></li><li><p>启动nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/sbin</span><br><span class="line">$ nginx</span><br></pre></td></tr></table></figure></li><li><p>如果启动成功可以在浏览器访问自己的服务器</p><p><img src="/2020/02/23/23搭建FastDFS-Nginx分布式文件系统/1.png" alt="image-20200223180515518"></p></li></ol><h4 id="添加fastdfs-nginx-module"><a href="#添加fastdfs-nginx-module" class="headerlink" title="添加fastdfs-nginx-module"></a>添加fastdfs-nginx-module</h4><ol><li><p>将fastdfs-nginx-module-master.zip解压到/usr/local/文件夹下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ unzip fastdfs-nginx-module-master.zip -d /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure></li><li><p>在nginx中添加该模块 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx-1.8.1</span><br><span class="line">$ ./configure --add-module=/usr/<span class="built_in">local</span>/fastdfs-nginx-module/src</span><br></pre></td></tr></table></figure></li><li><p>编译</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure></li><li><p>修改fastdfs-nginx-module配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fastdfs-nginx-module/src</span><br><span class="line">$ vim config</span><br></pre></td></tr></table></figure></li><li><p>修改内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CORE_INCS=<span class="string">"<span class="variable">$CORE_INCS</span> /usr/include/fastdfs /usr/include/fastcommon"</span></span><br><span class="line">CORE_LIBS=<span class="string">"<span class="variable">$CORE_LIBS</span> -L/usr/lib -lfastcommon -lfdfsclient"</span></span><br></pre></td></tr></table></figure></li><li><p>将src目录下的mod_fastdfs.conf文件复制到/etc/fdfs/目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp /usr/<span class="built_in">local</span>/fastdfs-nginx-module-master/src/mod_fastdfs.conf /etc/fdfs</span><br></pre></td></tr></table></figure></li><li><p>修改/etc/fdfs/mod_fastdfs.conf的内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/fdfs/mod_fastdfs.conf</span><br></pre></td></tr></table></figure></li><li><p>修改内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">connect_timeout=10</span><br><span class="line"><span class="comment"># 此处x.x.x.x为自己的云服务器的ip地址</span></span><br><span class="line">tracker_server=x.x.x.x:22122</span><br><span class="line">url_have_group_name=<span class="literal">true</span></span><br><span class="line">store_path0=/usr/<span class="built_in">local</span>/python3/fastdfs/storage</span><br></pre></td></tr></table></figure></li><li><p>将fastdfs-master/conf/目录下的两个文件复制到/etc/fdfs/中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fastdfs-master/conf</span><br><span class="line">$ cp http.conf /etc/fdfs/http.conf</span><br><span class="line">$ cp mime.types /etc/fdfs/mime.types</span><br></pre></td></tr></table></figure></li><li><p>进入/usr/local/nginx/conf目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/conf</span><br></pre></td></tr></table></figure></li><li><p>修改nginx.conf配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim nginx.conf</span><br></pre></td></tr></table></figure></li><li><p>修改内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  x.x.x.x;</span><br><span class="line"></span><br><span class="line">        location ~/group[0-9]/ &#123;</span><br><span class="line">            ngx_fastdfs_module;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>重新启动nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/sbin</span><br><span class="line">$ nginx -s reload</span><br></pre></td></tr></table></figure></li><li><p>将之前上传图片时的返回内容复制到浏览器地址栏可以查看到文件</p><p><img src="/2020/02/23/23搭建FastDFS-Nginx分布式文件系统/2.png" alt="image-20200223182448549"></p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要：安装一个分布式文件系统花了一天时间，不过总算是搞出来了。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
    
      <category term="毕业设计" scheme="http://yoursite.com/tags/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
      <category term="FastDFS" scheme="http://yoursite.com/tags/FastDFS/"/>
    
      <category term="Nginx" scheme="http://yoursite.com/tags/Nginx/"/>
    
  </entry>
  
</feed>
